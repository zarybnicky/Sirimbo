fragment Announcement on Upozorneni {
  __typename
  id: upId
  upKdo
  upLock
  upNadpis
  upText
  upTimestamp
  upTimestampAdd
  upKdo
  userByUpKdo {
    id: uId
    uJmeno
    uPrijmeni
  }
  upozorneniSkupiniesByUpsIdRodic {
    nodes {
      skupinyByUpsIdSkupina {
        ...CohortBasic
      }
    }
  }
  scheduledSince
  scheduledUntil
  isVisible
}

query MyAnnouncements($limit: Int, $offset: Int) {
  myAnnouncements(
    first: $limit,
    offset: $offset,
  ) {
    totalCount
    nodes {
      ...Announcement
    }
  }
}

query AnnouncementList($limit: Int, $offset: Int) {
  upozornenis(
    first: $limit,
    offset: $offset,
    orderBy: [UP_TIMESTAMP_ADD_DESC],
  ) {
    totalCount
    nodes {
      ...Announcement
    }
  }
}

mutation ToggleUpozorneniVisible($id: BigInt!, $visible: Boolean!) {
  updateUpozorneni(input: {upId: $id, patch: {isVisible: $visible}}) {
    upozorneni {
      id: upId
    }
  }
}


query Announcement($id: BigInt!) {
  upozorneni(upId: $id) {
    ...Announcement
  }
}

mutation CreateAnnouncement($input: UpozorneniInput!) {
  createUpozorneni(input: {upozorneni: $input}) {
    upozorneni {
      id: upId
    }
  }
}

mutation UpdateAnnouncement($id: BigInt!, $patch: UpozorneniPatch!) {
  updateUpozorneni(input: {upId: $id, patch: $patch}) {
    __typename
  }
}

mutation DeleteAnnouncement($id: BigInt!) {
  deleteUpozorneni(input: {upId: $id}) {
    __typename
  }
}
