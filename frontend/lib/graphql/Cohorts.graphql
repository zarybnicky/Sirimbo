fragment CohortBasic on Skupiny {
  __typename
  id: sId
  sName
  sLocation
  sVisible
  sColorRgb
  ordering
}

fragment Cohort on Skupiny {
  ...CohortBasic
  __typename
  sDescription
  internalInfo
  cohortGroup
}

fragment CohortWithMembers on Skupiny {
  ...Cohort
  usersByUSkupina(condition: {uBan: false, uSystem: false, uConfirmed: true}, orderBy: [U_PRIJMENI_ASC, U_JMENO_ASC]) {
    nodes {
      ...UserPublic
      hasValidPayment
    }
  }
}

query CohortList($limit: Int, $offset: Int, $visible: Boolean) {
  skupinies(first: $limit, offset: $offset, condition: {sVisible: $visible}, orderBy: [ORDERING_ASC]) {
    nodes {
      ...Cohort
    }
  }
}

query CohortListWithMembers($visible: Boolean) {
  skupinies(condition: {sVisible: $visible}, orderBy: [ORDERING_ASC]) {
    nodes {
      ...CohortWithMembers
    }
  }
}

query Cohort($id: BigInt!) {
  skupiny(sId: $id) {
    ...Cohort
  }
}

mutation CreateCohort($input: SkupinyInput!) {
  createSkupiny(input: {skupiny: $input}) {
    skupiny {
      ...Cohort
    }
  }
}

mutation UpdateCohort($id: BigInt!, $patch: SkupinyPatch!) {
  updateSkupiny(input: {sId: $id, patch: $patch}) {
    skupiny {
      ...Cohort
    }
  }
}

mutation DeleteCohort($id: BigInt!) {
  deleteSkupiny(input: {sId: $id}) {
    __typename
  }
}
