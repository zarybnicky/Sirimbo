fragment Event on Akce {
  __typename
  id: aId
  aOd
  aDo
  summary
  aInfo
  aDokumenty
  aJmeno
  aKapacita
  aKde
  aLock
  aTimestamp
  aVisible
  isPublic
  enableNotes
}

fragment EventItem on AkceItem {
  id: aiId
  notes
  aiRokNarozeni
  userByAiUser {
    uJmeno
    uPrijmeni
    uRodneCislo
    uTelefon
    uEmail
  }
}

fragment EventWithItems on Akce {
  ...Event
  akceItemsByAiIdRodic {
    totalCount
    nodes {
      ...EventItem
    }
  }
}

query Event($id: BigInt!) {
  akce(aId: $id) {
    ...EventWithItems
  }
}

query EventList($limit: Int, $offset: Int, $visible: Boolean) {
  akces(first: $limit, offset: $offset, orderBy: [A_OD_DESC], condition: {aVisible: $visible}) {
    totalCount
    nodes {
      ...EventWithItems
    }
  }
}

mutation ToggleEventVisible($id: BigInt!, $visible: Boolean!) {
  updateAkce(input: {aId: $id, patch: {aVisible: $visible}}) {
    akce {
      aId
    }
  }
}

mutation CreateEvent($input: AkceInput!) {
  createAkce(input: {akce: $input}) {
    akce {
      id: aId
    }
  }
}

mutation UpdateEvent($id: BigInt!, $patch: AkcePatch!) {
  updateAkce(input: {aId: $id, patch: $patch}) {
    __typename
  }
}

mutation DeleteEvent($id: BigInt!) {
  deleteAkce(input: {aId: $id}) {
    __typename
  }
}

fragment MyEvent on Akce {
  ...Event
  myNotes
  hasCapacity
  freeSlots
  signedUp
}

query MyEvents {
  akces(condition: {aVisible: true}) {
    nodes {
      ...MyEvent
    }
  }
}

mutation CreateParticipation($input: CreateParticipationInput!) {
  createParticipation(input: $input) {
    __typename
  }
}

mutation CancelParticipation($input: CancelParticipationInput!) {
  cancelParticipation(input: $input) {
    __typename
  }
}
