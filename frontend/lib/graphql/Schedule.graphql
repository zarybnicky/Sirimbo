fragment ScheduleBasic on Rozpi {
  __typename
  rDatum
  id: rId
  rKde
  rLock
  rTrener
  rVisible
  userByRTrener {
    id: uId
    uJmeno
    uPrijmeni
    fullName
  }
}

fragment ScheduleItemBasic on RozpisItem {
  __typename
  riOd
  riDo
  id: riId
  riLock
  riPartner
  paryByRiPartner {
    ...CouplePartial
  }
}

fragment ScheduleItem on RozpisItem {
  ...ScheduleItemBasic
  rozpiByRiIdRodic {
    ...ScheduleBasic
  }
}

fragment Schedule on Rozpi {
  ...ScheduleBasic
  rozpisItemsByRiIdRodic(orderBy: [RI_OD_ASC]) {
    nodes {
      ...ScheduleItemBasic
    }
  }
}

query ScheduleRange($startDate: Date!, $endDate: Date!) {
  schedulesForRange(startDate: $startDate, endDate: $endDate) {
    nodes {
      ...Schedule
    }
  }
}

query ScheduleList($limit: Int, $offset: Int) {
  rozpis(first: $limit, offset: $offset, orderBy: [R_DATUM_DESC]) {
    totalCount
    nodes {
      ...Schedule
    }
  }
}

query MyLessons($startDate: Date, $endDate: Date) {
  myLessons(startDate: $startDate, endDate: $endDate) {
    nodes {
      ...ScheduleItem
    }
  }
}

query Schedule($id: BigInt!) {
  rozpi(rId: $id) {
    ...Schedule
  }
}

mutation ToggleScheduleVisible($id: BigInt!, $visible: Boolean!) {
  updateRozpi(input: {rId: $id, patch: {rVisible: $visible}}) {
    rozpi {
      ...ScheduleBasic
    }
  }
}

mutation CreateSchedule($input: RozpiInput!) {
  createRozpi(input: {rozpi: $input}) {
    rozpi {
      ...ScheduleBasic
    }
  }
}

mutation UpdateSchedule($id: BigInt!, $patch: RozpiPatch!) {
  updateRozpi(input: {rId: $id, patch: $patch}) {
    rozpi {
      ...ScheduleBasic
    }
  }
}

mutation DeleteSchedule($id: BigInt!) {
  deleteRozpi(input: {rId: $id}) {
    __typename
  }
}

mutation BookLesson($id: BigInt!) {
  bookLesson(input: {lessonId: $id}) {
    rozpisItems {
      ...ScheduleItem
    }
  }
}

mutation CancelLesson($id: BigInt!) {
  cancelLesson(input: {lessonId: $id}) {
    rozpisItems {
      ...ScheduleItemBasic
    }
  }
}

mutation CreateLesson($input: RozpisItemInput!) {
  createRozpisItem(input: {rozpisItem: $input}) {
    rozpisItem {
      ...ScheduleItem
    }
  }
}

mutation UpdateLesson($id: BigInt!, $patch: RozpisItemPatch!) {
  updateRozpisItem(input: {riId: $id, patch: $patch}) {
    rozpisItem {
      ...ScheduleItem
    }
  }
}

mutation DeleteLesson($id: BigInt!) {
  deleteRozpisItem(input: {riId: $id}) {
    __typename
  }
}
