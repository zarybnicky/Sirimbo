fragment Event on Akce {
  __typename
  aId
  aOd
  aDo
  aInfo
  aDokumenty
  aJmeno
  aKapacita
  aKde
  aLock
  aTimestamp
  aVisible
}

fragment EventWithItems on Akce {
  ...Event
  akceItemsByAiIdRodic {
    totalCount
    nodes {
      __typename
      aiId
      userByAiUser {
        uId
        uJmeno
        uPrijmeni
      }
    }
  }
}

fragment EventItem on AkceItem {
  __typename
  aiId
  userByAiUser {
    uJmeno
    uPrijmeni
    uRodneCislo
    uTelefon
    uEmail
  }
}

query EventParticipants($id: BigInt!) {
  akce(aId: $id) {
    aJmeno
    akceItemsByAiIdRodic {
      nodes {
        ...EventItem
      }
    }
  }
}

query EventList($limit: Int, $offset: Int, $visible: Boolean) {
  akces(first: $limit, offset: $offset, orderBy: [A_OD_DESC], condition: {aVisible: $visible}) {
    totalCount
    nodes {
      ...EventWithItems
    }
  }
}

query Event($id: BigInt!) {
  akce(aId: $id) {
    ...Event
  }
}

mutation ToggleEventVisible($id: BigInt!, $visible: Boolean!) {
  updateAkce(input: {aId: $id, patch: {aVisible: $visible}}) {
    akce {
      aId
    }
  }
}

mutation CreateEvent($input: AkceInput!) {
  createAkce(input: {akce: $input}) {
    __typename
  }
}

mutation UpdateEvent($id: BigInt!, $patch: AkcePatch!) {
  updateAkce(input: {aId: $id, patch: $patch}) {
    __typename
  }
}

mutation DeleteEvent($id: BigInt!) {
  deleteAkce(input: {aId: $id}) {
    __typename
  }
}
