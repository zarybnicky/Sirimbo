fragment Event on Akce {
  aId
  aOd
  aDo
  aInfo
  aDokumenty
  aJmeno
  aKapacita
  aKde
  aLock
  aTimestamp
  aVisible
}

fragment EventItem on AkceItem {
  aiId
  userByAiUser {
    uJmeno
    uPrijmeni
    uRodneCislo
    uTelefon
    uEmail
  }
}

query EventParticipants($id: BigInt!) {
  akce(aId: $id) {
    aJmeno
    akceItemsByAiIdRodic {
      nodes {
        ...EventItem
      }
    }
  }
}

query EventList($limit: Int, $offset: Int) {
  akces(first: $limit, offset: $offset, orderBy: [A_OD_DESC]) {
    totalCount
    nodes {
      ...Event
      akceItemsByAiIdRodic {
        totalCount
        nodes {
          aiId
          userByAiUser {
            uId
            uJmeno
            uPrijmeni
          }
        }
      }
    }
  }
}

query Event($id: BigInt!) {
  akce(aId: $id) {
    ...Event
  }
}

mutation ToggleEventVisible($id: BigInt!, $visible: Boolean!) {
  updateAkce(input: {aId: $id, patch: {aVisible: $visible}}) {
    akce {
      aId
    }
  }
}

mutation CreateEvent($input: AkceInput!) {
  createAkce(input: {akce: $input}) {
    __typename
  }
}

mutation UpdateEvent($id: BigInt!, $patch: AkcePatch!) {
  updateAkce(input: {aId: $id, patch: $patch}) {
    __typename
  }
}

mutation DeleteEvent($id: BigInt!) {
  deleteAkce(input: {aId: $id}) {
    __typename
  }
}
