{"name":"olymp","desc":"","tables":[{"name":"cron.job","type":"BASE TABLE","comment":"","columns":[{"name":"jobid","type":"bigint","nullable":false,"default":"nextval('cron.jobid_seq'::regclass)","comment":""},{"name":"schedule","type":"text","nullable":false,"default":null,"comment":""},{"name":"command","type":"text","nullable":false,"default":null,"comment":""},{"name":"nodename","type":"text","nullable":false,"default":"'localhost'::text","comment":""},{"name":"nodeport","type":"integer","nullable":false,"default":"inet_server_port()","comment":""},{"name":"database","type":"text","nullable":false,"default":"current_database()","comment":""},{"name":"username","type":"text","nullable":false,"default":"CURRENT_USER","comment":""},{"name":"active","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"jobname","type":"text","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"job_pkey","def":"CREATE UNIQUE INDEX job_pkey ON cron.job USING btree (jobid)","table":"cron.job","columns":["jobid"],"comment":""},{"name":"jobname_username_uniq","def":"CREATE UNIQUE INDEX jobname_username_uniq ON cron.job USING btree (jobname, username)","table":"cron.job","columns":["jobname","username"],"comment":""}],"constraints":[{"name":"job_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (jobid)","table":"cron.job","referenced_table":"","columns":["jobid"],"referenced_columns":[],"comment":""},{"name":"jobname_username_uniq","type":"UNIQUE","def":"UNIQUE (jobname, username)","table":"cron.job","referenced_table":"","columns":["username","jobname"],"referenced_columns":[],"comment":""}],"triggers":[{"name":"cron_job_cache_invalidate","def":"CREATE TRIGGER cron_job_cache_invalidate AFTER INSERT OR DELETE OR UPDATE OR TRUNCATE ON cron.job FOR EACH STATEMENT EXECUTE FUNCTION cron.job_cache_invalidate()","comment":""}],"def":""},{"name":"cron.job_run_details","type":"BASE TABLE","comment":"","columns":[{"name":"jobid","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"runid","type":"bigint","nullable":false,"default":"nextval('cron.runid_seq'::regclass)","comment":""},{"name":"job_pid","type":"integer","nullable":true,"default":null,"comment":""},{"name":"database","type":"text","nullable":true,"default":null,"comment":""},{"name":"username","type":"text","nullable":true,"default":null,"comment":""},{"name":"command","type":"text","nullable":true,"default":null,"comment":""},{"name":"status","type":"text","nullable":true,"default":null,"comment":""},{"name":"return_message","type":"text","nullable":true,"default":null,"comment":""},{"name":"start_time","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"end_time","type":"timestamp with time zone","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"job_run_details_pkey","def":"CREATE UNIQUE INDEX job_run_details_pkey ON cron.job_run_details USING btree (runid)","table":"cron.job_run_details","columns":["runid"],"comment":""}],"constraints":[{"name":"job_run_details_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (runid)","table":"cron.job_run_details","referenced_table":"","columns":["runid"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"public.hypopg_list_indexes","type":"VIEW","comment":"","columns":[{"name":"indexrelid","type":"oid","nullable":true,"default":null,"comment":""},{"name":"index_name","type":"text","nullable":true,"default":null,"comment":""},{"name":"schema_name","type":"name","nullable":true,"default":null,"comment":""},{"name":"table_name","type":"name","nullable":true,"default":null,"comment":""},{"name":"am_name","type":"name","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW hypopg_list_indexes AS (\n SELECT h.indexrelid,\n    h.indexname AS index_name,\n    n.nspname AS schema_name,\n    COALESCE(c.relname, '\u003cdropped\u003e'::name) AS table_name,\n    am.amname AS am_name\n   FROM (((hypopg() h(indexname, indexrelid, indrelid, innatts, indisunique, indkey, indcollation, indclass, indoption, indexprs, indpred, amid)\n     LEFT JOIN pg_class c ON ((c.oid = h.indrelid)))\n     LEFT JOIN pg_namespace n ON ((n.oid = c.relnamespace)))\n     LEFT JOIN pg_am am ON ((am.oid = h.amid)))\n)","referenced_tables":["hypopg","pg_class","pg_namespace","pg_am"]},{"name":"public.hypopg_hidden_indexes","type":"VIEW","comment":"","columns":[{"name":"indexrelid","type":"oid","nullable":true,"default":null,"comment":""},{"name":"index_name","type":"name","nullable":true,"default":null,"comment":""},{"name":"schema_name","type":"name","nullable":true,"default":null,"comment":""},{"name":"table_name","type":"name","nullable":true,"default":null,"comment":""},{"name":"am_name","type":"name","nullable":true,"default":null,"comment":""},{"name":"is_hypo","type":"boolean","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW hypopg_hidden_indexes AS (\n SELECT h.indexid AS indexrelid,\n    i.relname AS index_name,\n    n.nspname AS schema_name,\n    t.relname AS table_name,\n    m.amname AS am_name,\n    false AS is_hypo\n   FROM (((((hypopg_hidden_indexes() h(indexid)\n     JOIN pg_index x ON ((x.indexrelid = h.indexid)))\n     JOIN pg_class i ON ((i.oid = h.indexid)))\n     JOIN pg_namespace n ON ((n.oid = i.relnamespace)))\n     JOIN pg_class t ON ((t.oid = x.indrelid)))\n     JOIN pg_am m ON ((m.oid = i.relam)))\nUNION ALL\n SELECT hl.indexrelid,\n    hl.index_name,\n    hl.schema_name,\n    hl.table_name,\n    hl.am_name,\n    true AS is_hypo\n   FROM (hypopg_hidden_indexes() hi(indexid)\n     JOIN hypopg_list_indexes hl ON ((hl.indexrelid = hi.indexid)))\n  ORDER BY 2\n)","referenced_tables":["public.hypopg_hidden_indexes","pg_index","pg_class","pg_namespace","pg_am","public.hypopg_list_indexes"]},{"name":"public.pg_stat_statements_info","type":"VIEW","comment":"","columns":[{"name":"dealloc","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"stats_reset","type":"timestamp with time zone","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW pg_stat_statements_info AS (\n SELECT pg_stat_statements_info.dealloc,\n    pg_stat_statements_info.stats_reset\n   FROM pg_stat_statements_info() pg_stat_statements_info(dealloc, stats_reset)\n)","referenced_tables":["public.pg_stat_statements_info"]},{"name":"public.pg_stat_statements","type":"VIEW","comment":"","columns":[{"name":"userid","type":"oid","nullable":true,"default":null,"comment":""},{"name":"dbid","type":"oid","nullable":true,"default":null,"comment":""},{"name":"toplevel","type":"boolean","nullable":true,"default":null,"comment":""},{"name":"queryid","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"query","type":"text","nullable":true,"default":null,"comment":""},{"name":"plans","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"total_plan_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"min_plan_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"max_plan_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"mean_plan_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"stddev_plan_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"calls","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"total_exec_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"min_exec_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"max_exec_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"mean_exec_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"stddev_exec_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"rows","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"shared_blks_hit","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"shared_blks_read","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"shared_blks_dirtied","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"shared_blks_written","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"local_blks_hit","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"local_blks_read","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"local_blks_dirtied","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"local_blks_written","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"temp_blks_read","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"temp_blks_written","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"blk_read_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"blk_write_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"temp_blk_read_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"temp_blk_write_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"wal_records","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"wal_fpi","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"wal_bytes","type":"numeric","nullable":true,"default":null,"comment":""},{"name":"jit_functions","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"jit_generation_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"jit_inlining_count","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"jit_inlining_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"jit_optimization_count","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"jit_optimization_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"jit_emission_count","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"jit_emission_time","type":"double precision","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW pg_stat_statements AS (\n SELECT pg_stat_statements.userid,\n    pg_stat_statements.dbid,\n    pg_stat_statements.toplevel,\n    pg_stat_statements.queryid,\n    pg_stat_statements.query,\n    pg_stat_statements.plans,\n    pg_stat_statements.total_plan_time,\n    pg_stat_statements.min_plan_time,\n    pg_stat_statements.max_plan_time,\n    pg_stat_statements.mean_plan_time,\n    pg_stat_statements.stddev_plan_time,\n    pg_stat_statements.calls,\n    pg_stat_statements.total_exec_time,\n    pg_stat_statements.min_exec_time,\n    pg_stat_statements.max_exec_time,\n    pg_stat_statements.mean_exec_time,\n    pg_stat_statements.stddev_exec_time,\n    pg_stat_statements.rows,\n    pg_stat_statements.shared_blks_hit,\n    pg_stat_statements.shared_blks_read,\n    pg_stat_statements.shared_blks_dirtied,\n    pg_stat_statements.shared_blks_written,\n    pg_stat_statements.local_blks_hit,\n    pg_stat_statements.local_blks_read,\n    pg_stat_statements.local_blks_dirtied,\n    pg_stat_statements.local_blks_written,\n    pg_stat_statements.temp_blks_read,\n    pg_stat_statements.temp_blks_written,\n    pg_stat_statements.blk_read_time,\n    pg_stat_statements.blk_write_time,\n    pg_stat_statements.temp_blk_read_time,\n    pg_stat_statements.temp_blk_write_time,\n    pg_stat_statements.wal_records,\n    pg_stat_statements.wal_fpi,\n    pg_stat_statements.wal_bytes,\n    pg_stat_statements.jit_functions,\n    pg_stat_statements.jit_generation_time,\n    pg_stat_statements.jit_inlining_count,\n    pg_stat_statements.jit_inlining_time,\n    pg_stat_statements.jit_optimization_count,\n    pg_stat_statements.jit_optimization_time,\n    pg_stat_statements.jit_emission_count,\n    pg_stat_statements.jit_emission_time\n   FROM pg_stat_statements(true) pg_stat_statements(userid, dbid, toplevel, queryid, query, plans, total_plan_time, min_plan_time, max_plan_time, mean_plan_time, stddev_plan_time, calls, total_exec_time, min_exec_time, max_exec_time, mean_exec_time, stddev_exec_time, rows, shared_blks_hit, shared_blks_read, shared_blks_dirtied, shared_blks_written, local_blks_hit, local_blks_read, local_blks_dirtied, local_blks_written, temp_blks_read, temp_blks_written, blk_read_time, blk_write_time, temp_blk_read_time, temp_blk_write_time, wal_records, wal_fpi, wal_bytes, jit_functions, jit_generation_time, jit_inlining_count, jit_inlining_time, jit_optimization_count, jit_optimization_time, jit_emission_count, jit_emission_time)\n)","referenced_tables":["public.pg_stat_statements"]},{"name":"public.event_lesson_demand","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"trainer_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"registration_id","type":"bigint","nullable":false,"default":null,"comment":"@hasDefault"},{"name":"lesson_count","type":"integer","nullable":false,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"eld_unique_registration_trainer_key","def":"CREATE UNIQUE INDEX eld_unique_registration_trainer_key ON public.event_lesson_demand USING btree (registration_id, trainer_id)","table":"public.event_lesson_demand","columns":["registration_id","trainer_id"],"comment":""},{"name":"event_lesson_demand_pkey","def":"CREATE UNIQUE INDEX event_lesson_demand_pkey ON public.event_lesson_demand USING btree (id)","table":"public.event_lesson_demand","columns":["id"],"comment":""},{"name":"event_lesson_demand_trainer_id_idx","def":"CREATE INDEX event_lesson_demand_trainer_id_idx ON public.event_lesson_demand USING btree (trainer_id)","table":"public.event_lesson_demand","columns":["trainer_id"],"comment":""},{"name":"event_lesson_demand_registration_id_idx","def":"CREATE INDEX event_lesson_demand_registration_id_idx ON public.event_lesson_demand USING btree (registration_id)","table":"public.event_lesson_demand","columns":["registration_id"],"comment":""}],"constraints":[{"name":"event_lesson_demand_lesson_count_check","type":"CHECK","def":"CHECK ((lesson_count \u003e 0))","table":"public.event_lesson_demand","referenced_table":"","columns":["lesson_count"],"referenced_columns":[],"comment":""},{"name":"eld_unique_registration_trainer_key","type":"UNIQUE","def":"UNIQUE (registration_id, trainer_id)","table":"public.event_lesson_demand","referenced_table":"","columns":["trainer_id","registration_id"],"referenced_columns":[],"comment":""},{"name":"event_lesson_demand_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.event_lesson_demand","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"event_lesson_demand_registration_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (registration_id) REFERENCES event_registration(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_lesson_demand","referenced_table":"event_registration","columns":["registration_id"],"referenced_columns":["id"],"comment":""},{"name":"event_lesson_demand_trainer_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (trainer_id) REFERENCES event_trainer(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_lesson_demand","referenced_table":"event_trainer","columns":["trainer_id"],"referenced_columns":["id"],"comment":""},{"name":"event_lesson_demand_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_lesson_demand","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.event_lesson_demand FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.event_instance","type":"BASE TABLE","comment":"@omit create,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"event_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"since","type":"timestamp with time zone","nullable":false,"default":null,"comment":""},{"name":"until","type":"timestamp with time zone","nullable":false,"default":null,"comment":""},{"name":"range","type":"tstzrange","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS tstzrange(since, until, '[]'::text) STORED"},{"name":"location_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"is_cancelled","type":"boolean","nullable":true,"default":"false","comment":""}],"indexes":[{"name":"event_instance_pkey","def":"CREATE UNIQUE INDEX event_instance_pkey ON public.event_instance USING btree (id)","table":"public.event_instance","columns":["id"],"comment":""},{"name":"event_instance_event_id_idx","def":"CREATE INDEX event_instance_event_id_idx ON public.event_instance USING btree (event_id)","table":"public.event_instance","columns":["event_id"],"comment":""},{"name":"event_instance_since_idx","def":"CREATE INDEX event_instance_since_idx ON public.event_instance USING btree (since)","table":"public.event_instance","columns":["since"],"comment":""},{"name":"event_instance_range_idx","def":"CREATE INDEX event_instance_range_idx ON public.event_instance USING btree (tenant_id, since, until)","table":"public.event_instance","columns":["since","tenant_id","until"],"comment":""}],"constraints":[{"name":"event_instance_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.event_instance","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"event_instance_event_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (event_id) REFERENCES event(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_instance","referenced_table":"event","columns":["event_id"],"referenced_columns":["id"],"comment":""},{"name":"event_instance_location_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (location_id) REFERENCES tenant_location(id)","table":"public.event_instance","referenced_table":"tenant_location","columns":["location_id"],"referenced_columns":["id"],"comment":""},{"name":"event_instance_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_instance","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.event_instance FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_500_create_attendance","def":"CREATE TRIGGER _500_create_attendance AFTER INSERT ON public.event_instance FOR EACH ROW EXECUTE FUNCTION app_private.tg_event_instance__create_attendance()","comment":""}],"def":""},{"name":"public.event_registration","type":"BASE TABLE","comment":"@omit update\n@simpleCollections both","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"event_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"target_cohort_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"couple_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"note","type":"text","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"event_registration_pkey","def":"CREATE UNIQUE INDEX event_registration_pkey ON public.event_registration USING btree (id)","table":"public.event_registration","columns":["id"],"comment":""},{"name":"event_registration_unique_event_person_couple_key","def":"CREATE UNIQUE INDEX event_registration_unique_event_person_couple_key ON public.event_registration USING btree (event_id, person_id, couple_id) NULLS NOT DISTINCT","table":"public.event_registration","columns":["person_id","couple_id","event_id"],"comment":""},{"name":"event_registration_couple_id_idx","def":"CREATE INDEX event_registration_couple_id_idx ON public.event_registration USING btree (couple_id)","table":"public.event_registration","columns":["couple_id"],"comment":""},{"name":"event_registration_event_id_idx","def":"CREATE INDEX event_registration_event_id_idx ON public.event_registration USING btree (event_id)","table":"public.event_registration","columns":["event_id"],"comment":""},{"name":"event_registration_person_id_idx","def":"CREATE INDEX event_registration_person_id_idx ON public.event_registration USING btree (person_id)","table":"public.event_registration","columns":["person_id"],"comment":""},{"name":"event_registration_target_cohort_id_idx","def":"CREATE INDEX event_registration_target_cohort_id_idx ON public.event_registration USING btree (target_cohort_id)","table":"public.event_registration","columns":["target_cohort_id"],"comment":""}],"constraints":[{"name":"event_registration_check","type":"CHECK","def":"CHECK ((((couple_id IS NOT NULL) AND (person_id IS NULL)) OR ((couple_id IS NULL) AND (person_id IS NOT NULL))))","table":"public.event_registration","referenced_table":"","columns":["couple_id","person_id"],"referenced_columns":[],"comment":""},{"name":"event_registration_couple_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (couple_id) REFERENCES couple(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_registration","referenced_table":"couple","columns":["couple_id"],"referenced_columns":["id"],"comment":""},{"name":"event_registration_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.event_registration","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"event_registration_unique_event_person_couple_key","type":"UNIQUE","def":"UNIQUE NULLS NOT DISTINCT (event_id, person_id, couple_id)","table":"public.event_registration","referenced_table":"","columns":["event_id","couple_id","person_id"],"referenced_columns":[],"comment":""},{"name":"event_registration_target_cohort_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (target_cohort_id) REFERENCES event_target_cohort(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_registration","referenced_table":"event_target_cohort","columns":["target_cohort_id"],"referenced_columns":["id"],"comment":""},{"name":"event_registration_event_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (event_id) REFERENCES event(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_registration","referenced_table":"event","columns":["event_id"],"referenced_columns":["id"],"comment":""},{"name":"event_registration_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_registration","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"event_registration_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_registration","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.event_registration FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_500_create_attendance","def":"CREATE TRIGGER _500_create_attendance AFTER INSERT ON public.event_registration FOR EACH ROW EXECUTE FUNCTION app_private.tg_event_registration__create_attendance()","comment":""}],"def":""},{"name":"public.payment","type":"BASE TABLE","comment":"@omit create\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"accounting_period_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"cohort_subscription_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"event_registration_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"event_instance_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"status","type":"payment_status","nullable":false,"default":null,"comment":""},{"name":"variable_symbol","type":"text","nullable":true,"default":null,"comment":""},{"name":"specific_symbol","type":"text","nullable":true,"default":null,"comment":""},{"name":"is_auto_credit_allowed","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"tags","type":"text[]","nullable":false,"default":"ARRAY[]::text[]","comment":""},{"name":"due_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"paid_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"payment_pkey","def":"CREATE UNIQUE INDEX payment_pkey ON public.payment USING btree (id)","table":"public.payment","columns":["id"],"comment":""}],"constraints":[{"name":"payment_accounting_period_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (accounting_period_id) REFERENCES accounting_period(id)","table":"public.payment","referenced_table":"accounting_period","columns":["accounting_period_id"],"referenced_columns":["id"],"comment":""},{"name":"payment_cohort_subscription_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (cohort_subscription_id) REFERENCES cohort_subscription(id) ON UPDATE CASCADE ON DELETE SET NULL","table":"public.payment","referenced_table":"cohort_subscription","columns":["cohort_subscription_id"],"referenced_columns":["id"],"comment":""},{"name":"payment_event_instance_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (event_instance_id) REFERENCES event_instance(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.payment","referenced_table":"event_instance","columns":["event_instance_id"],"referenced_columns":["id"],"comment":""},{"name":"payment_event_registration_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (event_registration_id) REFERENCES event_registration(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.payment","referenced_table":"event_registration","columns":["event_registration_id"],"referenced_columns":["id"],"comment":""},{"name":"payment_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.payment","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"payment_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.payment","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.payment FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_200_fill_accounting_period","def":"CREATE TRIGGER _200_fill_accounting_period BEFORE INSERT ON public.payment FOR EACH ROW EXECUTE FUNCTION app_private.tg_payment__fill_accounting_period()","comment":""}],"def":""},{"name":"public.transaction","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"accounting_period_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"payment_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"source","type":"transaction_source","nullable":false,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"description","type":"text","nullable":true,"default":null,"comment":""},{"name":"effective_date","type":"timestamp with time zone","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"transaction_pkey","def":"CREATE UNIQUE INDEX transaction_pkey ON public.transaction USING btree (id)","table":"public.transaction","columns":["id"],"comment":""}],"constraints":[{"name":"transaction_accounting_period_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (accounting_period_id) REFERENCES accounting_period(id)","table":"public.transaction","referenced_table":"accounting_period","columns":["accounting_period_id"],"referenced_columns":["id"],"comment":""},{"name":"transaction_payment_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (payment_id) REFERENCES payment(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.transaction","referenced_table":"payment","columns":["payment_id"],"referenced_columns":["id"],"comment":""},{"name":"transaction_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.transaction","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""},{"name":"transaction_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.transaction","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.transaction FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_200_fill_accounting_period","def":"CREATE TRIGGER _200_fill_accounting_period BEFORE INSERT ON public.transaction FOR EACH ROW EXECUTE FUNCTION app_private.tg_payment__fill_accounting_period()","comment":""},{"name":"_300_effective_date","def":"CREATE TRIGGER _300_effective_date BEFORE INSERT OR UPDATE ON public.transaction FOR EACH ROW EXECUTE FUNCTION app_private.tg_transaction__effective_date()","comment":""}],"def":""},{"name":"public.users","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"u_id","type":"bigint","nullable":false,"default":"nextval('users_u_id_seq'::regclass)","comment":""},{"name":"u_login","type":"citext","nullable":false,"default":null,"comment":""},{"name":"u_pass","type":"character(40)","nullable":false,"default":null,"comment":"@omit"},{"name":"u_jmeno","type":"text","nullable":true,"default":null,"comment":""},{"name":"u_prijmeni","type":"text","nullable":true,"default":null,"comment":""},{"name":"u_email","type":"citext","nullable":false,"default":null,"comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"u_ban","type":"boolean","nullable":false,"default":"true","comment":"@omit"},{"name":"u_confirmed","type":"boolean","nullable":false,"default":"false","comment":"@omit"},{"name":"u_created_at","type":"timestamp with time zone","nullable":false,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS u_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"last_login","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":true,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"u_timestamp","type":"timestamp with time zone","nullable":true,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS updated_at STORED"}],"indexes":[{"name":"idx_24786_primary","def":"CREATE UNIQUE INDEX idx_24786_primary ON public.users USING btree (u_id)","table":"public.users","columns":["u_id"],"comment":""},{"name":"users_unique_id","def":"CREATE UNIQUE INDEX users_unique_id ON public.users USING btree (id)","table":"public.users","columns":["id"],"comment":""},{"name":"u_ban","def":"CREATE INDEX u_ban ON public.users USING btree (u_ban)","table":"public.users","columns":["u_ban"],"comment":""},{"name":"u_confirmed","def":"CREATE INDEX u_confirmed ON public.users USING btree (u_confirmed)","table":"public.users","columns":["u_confirmed"],"comment":""},{"name":"u_jmeno","def":"CREATE INDEX u_jmeno ON public.users USING btree (u_jmeno)","table":"public.users","columns":["u_jmeno"],"comment":""},{"name":"u_prijmeni","def":"CREATE INDEX u_prijmeni ON public.users USING btree (u_prijmeni)","table":"public.users","columns":["u_prijmeni"],"comment":""},{"name":"users_email_key","def":"CREATE UNIQUE INDEX users_email_key ON public.users USING btree (u_email) WHERE (u_id \u003c\u003e ALL (ARRAY[(916)::bigint, (914)::bigint, (915)::bigint, (587)::bigint, (765)::bigint, (696)::bigint, (786)::bigint, (259)::bigint, (306)::bigint, (540)::bigint, (443)::bigint, (1042)::bigint, (585)::bigint, (825)::bigint, (413)::bigint, (428)::bigint, (985)::bigint, (935)::bigint, (218)::bigint, (581)::bigint, (827)::bigint, (826)::bigint, (165)::bigint, (207)::bigint, (232)::bigint, (945)::bigint, (990)::bigint, (1039)::bigint, (1040)::bigint, (606)::bigint, (607)::bigint, (896)::bigint, (975)::bigint, (496)::bigint, (511)::bigint, (898)::bigint, (920)::bigint, (970)::bigint, (724)::bigint, (725)::bigint, (958)::bigint, (542)::bigint, (543)::bigint, (886)::bigint, (223)::bigint, (348)::bigint, (23)::bigint, (973)::bigint, (128)::bigint, (988)::bigint, (517)::bigint, (978)::bigint, (928)::bigint, (930)::bigint, (968)::bigint, (939)::bigint, (951)::bigint, (950)::bigint, (808)::bigint, (723)::bigint, (557)::bigint, (1013)::bigint, (1014)::bigint, (1015)::bigint, (820)::bigint, (841)::bigint, (599)::bigint, (681)::bigint, (31)::bigint, (40)::bigint, (120)::bigint, (360)::bigint, (417)::bigint, (419)::bigint, (545)::bigint, (39)::bigint, (643)::bigint, (670)::bigint, (782)::bigint, (790)::bigint, (668)::bigint, (894)::bigint, (922)::bigint, (925)::bigint, (803)::bigint, (812)::bigint, (153)::bigint, (602)::bigint, (198)::bigint, (239)::bigint, (397)::bigint, (686)::bigint, (846)::bigint, (537)::bigint, (893)::bigint, (974)::bigint, (993)::bigint, (755)::bigint, (805)::bigint, (337)::bigint, (155)::bigint, (629)::bigint, (630)::bigint, (554)::bigint, (994)::bigint, (661)::bigint, (891)::bigint, (434)::bigint, (436)::bigint, (640)::bigint, (829)::bigint, (683)::bigint, (505)::bigint, (1)::bigint, (648)::bigint, (649)::bigint, (677)::bigint, (4)::bigint, (162)::bigint, (17)::bigint, (565)::bigint, (700)::bigint, (701)::bigint, (952)::bigint, (999)::bigint, (1003)::bigint, (1006)::bigint, (346)::bigint, (576)::bigint, (986)::bigint, (582)::bigint, (315)::bigint, (753)::bigint, (76)::bigint, (93)::bigint, (316)::bigint, (359)::bigint, (370)::bigint, (508)::bigint, (506)::bigint, (509)::bigint, (510)::bigint, (754)::bigint, (811)::bigint, (430)::bigint, (654)::bigint, (598)::bigint, (612)::bigint, (698)::bigint, (923)::bigint, (943)::bigint, (971)::bigint, (679)::bigint, (798)::bigint, (799)::bigint]))","table":"public.users","columns":["u_email"],"comment":""},{"name":"users_login_key","def":"CREATE UNIQUE INDEX users_login_key ON public.users USING btree (u_login) WHERE (u_id \u003c\u003e ALL (ARRAY[(1050)::bigint, (533)::bigint, (882)::bigint, (1075)::bigint, (489)::bigint, (82)::bigint, (1138)::bigint, (689)::bigint, (45)::bigint, (433)::bigint, (13)::bigint, (142)::bigint, (223)::bigint, (1046)::bigint, (498)::bigint, (1106)::bigint, (105)::bigint, (130)::bigint]))","table":"public.users","columns":["u_login"],"comment":""}],"constraints":[{"name":"idx_24786_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (u_id)","table":"public.users","referenced_table":"","columns":["u_id"],"referenced_columns":[],"comment":""},{"name":"users_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.users","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""},{"name":"users_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.users","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.users FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_200_encrypt_password","def":"CREATE TRIGGER _200_encrypt_password BEFORE INSERT OR UPDATE ON public.users FOR EACH ROW EXECUTE FUNCTION app_private.tg_users__encrypt_password()","comment":""},{"name":"_300_trim_login","def":"CREATE TRIGGER _300_trim_login BEFORE INSERT OR UPDATE ON public.users FOR EACH ROW EXECUTE FUNCTION app_private.tg_users__trim_login()","comment":""}],"def":""},{"name":"graphile_worker._private_jobs","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"job_queue_id","type":"integer","nullable":true,"default":null,"comment":""},{"name":"task_id","type":"integer","nullable":false,"default":null,"comment":""},{"name":"payload","type":"json","nullable":false,"default":"'{}'::json","comment":""},{"name":"priority","type":"smallint","nullable":false,"default":"0","comment":""},{"name":"run_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"attempts","type":"smallint","nullable":false,"default":"0","comment":""},{"name":"max_attempts","type":"smallint","nullable":false,"default":"25","comment":""},{"name":"last_error","type":"text","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"key","type":"text","nullable":true,"default":null,"comment":""},{"name":"locked_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"locked_by","type":"text","nullable":true,"default":null,"comment":""},{"name":"revision","type":"integer","nullable":false,"default":"0","comment":""},{"name":"flags","type":"jsonb","nullable":true,"default":null,"comment":""},{"name":"is_available","type":"boolean","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS ((locked_at IS NULL) AND (attempts \u003c max_attempts)) STORED"}],"indexes":[{"name":"jobs_key_key1","def":"CREATE UNIQUE INDEX jobs_key_key1 ON graphile_worker._private_jobs USING btree (key)","table":"graphile_worker._private_jobs","columns":["key"],"comment":""},{"name":"jobs_pkey1","def":"CREATE UNIQUE INDEX jobs_pkey1 ON graphile_worker._private_jobs USING btree (id)","table":"graphile_worker._private_jobs","columns":["id"],"comment":""},{"name":"jobs_main_index","def":"CREATE INDEX jobs_main_index ON graphile_worker._private_jobs USING btree (priority, run_at) INCLUDE (id, task_id, job_queue_id) WHERE (is_available = true)","table":"graphile_worker._private_jobs","columns":["priority","run_at","task_id","id","job_queue_id"],"comment":""},{"name":"jobs_no_queue_index","def":"CREATE INDEX jobs_no_queue_index ON graphile_worker._private_jobs USING btree (priority, run_at) INCLUDE (id, task_id) WHERE ((is_available = true) AND (job_queue_id IS NULL))","table":"graphile_worker._private_jobs","columns":["run_at","task_id","priority","id"],"comment":""}],"constraints":[{"name":"jobs_key_check","type":"CHECK","def":"CHECK (((length(key) \u003e 0) AND (length(key) \u003c= 512)))","table":"graphile_worker._private_jobs","referenced_table":"","columns":["key"],"referenced_columns":[],"comment":""},{"name":"jobs_max_attempts_check","type":"CHECK","def":"CHECK ((max_attempts \u003e= 1))","table":"graphile_worker._private_jobs","referenced_table":"","columns":["max_attempts"],"referenced_columns":[],"comment":""},{"name":"jobs_key_key1","type":"UNIQUE","def":"UNIQUE (key)","table":"graphile_worker._private_jobs","referenced_table":"","columns":["key"],"referenced_columns":[],"comment":""},{"name":"jobs_pkey1","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"graphile_worker._private_jobs","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"public.account","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"person_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"opening_balance","type":"numeric(19,4)","nullable":false,"default":"0.0","comment":""},{"name":"currency","type":"citext","nullable":false,"default":"'CZK'::citext","comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"account_pkey","def":"CREATE UNIQUE INDEX account_pkey ON public.account USING btree (id)","table":"public.account","columns":["id"],"comment":""},{"name":"account_tenant_id_person_id_currency_idx","def":"CREATE UNIQUE INDEX account_tenant_id_person_id_currency_idx ON public.account USING btree (tenant_id, person_id, currency) NULLS NOT DISTINCT","table":"public.account","columns":["currency","person_id","tenant_id"],"comment":""}],"constraints":[{"name":"account_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.account","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"account_tenant_id_person_id_currency_idx","type":"UNIQUE","def":"UNIQUE NULLS NOT DISTINCT (tenant_id, person_id, currency)","table":"public.account","referenced_table":"","columns":["tenant_id","person_id","currency"],"referenced_columns":[],"comment":""},{"name":"account_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.account","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"account_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.account","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.account FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_900_fix_balance_accounts","def":"CREATE TRIGGER _900_fix_balance_accounts AFTER INSERT OR DELETE OR UPDATE OF opening_balance OR TRUNCATE ON public.account FOR EACH STATEMENT EXECUTE FUNCTION app_private.tg_account_balances__update()","comment":""}],"def":""},{"name":"public.posting","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"transaction_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"account_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"original_account_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"amount","type":"numeric(19,4)","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"posting_pkey","def":"CREATE UNIQUE INDEX posting_pkey ON public.posting USING btree (id)","table":"public.posting","columns":["id"],"comment":""}],"constraints":[{"name":"posting_account_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (account_id) REFERENCES account(id)","table":"public.posting","referenced_table":"account","columns":["account_id"],"referenced_columns":["id"],"comment":""},{"name":"posting_original_account_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (original_account_id) REFERENCES account(id)","table":"public.posting","referenced_table":"account","columns":["original_account_id"],"referenced_columns":["id"],"comment":""},{"name":"posting_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.posting","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"posting_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.posting","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""},{"name":"posting_transaction_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (transaction_id) REFERENCES transaction(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.posting","referenced_table":"transaction","columns":["transaction_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.posting FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_900_fix_balance_entries","def":"CREATE TRIGGER _900_fix_balance_entries AFTER INSERT OR DELETE OR UPDATE OF amount OR TRUNCATE ON public.posting FOR EACH STATEMENT EXECUTE FUNCTION app_private.tg_account_balances__update()","comment":""}],"def":""},{"name":"public.upozorneni","type":"BASE TABLE","comment":"","columns":[{"name":"up_id","type":"bigint","nullable":false,"default":"nextval('upozorneni_up_id_seq'::regclass)","comment":""},{"name":"up_kdo","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"up_nadpis","type":"text","nullable":false,"default":null,"comment":""},{"name":"up_text","type":"text","nullable":false,"default":null,"comment":""},{"name":"up_lock","type":"boolean","nullable":false,"default":"false","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"scheduled_since","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"scheduled_until","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"is_visible","type":"boolean","nullable":true,"default":"true","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS up_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"sticky","type":"boolean","nullable":false,"default":"false","comment":""},{"name":"up_timestamp","type":"timestamp with time zone","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS updated_at STORED"},{"name":"up_timestamp_add","type":"timestamp with time zone","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS created_at STORED"}],"indexes":[{"name":"idx_24765_primary","def":"CREATE UNIQUE INDEX idx_24765_primary ON public.upozorneni USING btree (up_id)","table":"public.upozorneni","columns":["up_id"],"comment":""},{"name":"upozorneni_unique_id","def":"CREATE UNIQUE INDEX upozorneni_unique_id ON public.upozorneni USING btree (id)","table":"public.upozorneni","columns":["id"],"comment":""},{"name":"idx_24765_up_kdo","def":"CREATE INDEX idx_24765_up_kdo ON public.upozorneni USING btree (up_kdo)","table":"public.upozorneni","columns":["up_kdo"],"comment":""},{"name":"idx_24765_up_timestamp_add","def":"CREATE INDEX idx_24765_up_timestamp_add ON public.upozorneni USING btree (created_at)","table":"public.upozorneni","columns":["created_at"],"comment":""},{"name":"idx_up_tenant","def":"CREATE INDEX idx_up_tenant ON public.upozorneni USING btree (tenant_id)","table":"public.upozorneni","columns":["tenant_id"],"comment":""}],"constraints":[{"name":"idx_24765_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (up_id)","table":"public.upozorneni","referenced_table":"","columns":["up_id"],"referenced_columns":[],"comment":""},{"name":"upozorneni_up_kdo_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (up_kdo) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.upozorneni","referenced_table":"users","columns":["up_kdo"],"referenced_columns":["u_id"],"comment":""},{"name":"upozorneni_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.upozorneni","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""},{"name":"upozorneni_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.upozorneni","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.upozorneni FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"on_update_author_upozorneni","def":"CREATE TRIGGER on_update_author_upozorneni BEFORE INSERT OR UPDATE ON public.upozorneni FOR EACH ROW EXECUTE FUNCTION on_update_author_upozorneni()","comment":""}],"def":""},{"name":"public.attachment","type":"BASE TABLE","comment":"@omit update","columns":[{"name":"object_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"preview_object_name","type":"text","nullable":true,"default":null,"comment":""},{"name":"uploaded_by","type":"bigint","nullable":true,"default":"current_user_id()","comment":""},{"name":"uploaded_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"thumbhash","type":"text","nullable":true,"default":null,"comment":""},{"name":"width","type":"integer","nullable":true,"default":null,"comment":""},{"name":"height","type":"integer","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"attachment_pkey","def":"CREATE UNIQUE INDEX attachment_pkey ON public.attachment USING btree (object_name)","table":"public.attachment","columns":["object_name"],"comment":""}],"constraints":[{"name":"attachment_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (object_name)","table":"public.attachment","referenced_table":"","columns":["object_name"],"referenced_columns":[],"comment":""},{"name":"attachment_uploaded_by_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (uploaded_by) REFERENCES users(u_id) ON DELETE SET NULL","table":"public.attachment","referenced_table":"users","columns":["uploaded_by"],"referenced_columns":["u_id"],"comment":""}],"triggers":[],"def":""},{"name":"public.person","type":"BASE TABLE","comment":"@omit create","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"first_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"last_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"gender","type":"gender_type","nullable":false,"default":null,"comment":""},{"name":"birth_date","type":"date","nullable":true,"default":null,"comment":""},{"name":"nationality","type":"text","nullable":false,"default":null,"comment":""},{"name":"tax_identification_number","type":"text","nullable":true,"default":null,"comment":""},{"name":"national_id_number","type":"text","nullable":true,"default":null,"comment":""},{"name":"csts_id","type":"text","nullable":true,"default":null,"comment":""},{"name":"wdsf_id","type":"text","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"legacy_user_id","type":"bigint","nullable":true,"default":null,"comment":"@omit"},{"name":"prefix_title","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"suffix_title","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"bio","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"email","type":"citext","nullable":true,"default":null,"comment":""},{"name":"phone","type":"text","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"person_pkey","def":"CREATE UNIQUE INDEX person_pkey ON public.person USING btree (id)","table":"public.person","columns":["id"],"comment":""}],"constraints":[{"name":"person_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.person","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.person FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.couple","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"man_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"woman_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"since","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"until","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"legacy_pary_id","type":"bigint","nullable":true,"default":null,"comment":"@omit"},{"name":"active_range","type":"tstzrange","nullable":false,"default":null,"comment":"@omit","extra_def":"GENERATED ALWAYS AS tstzrange(since, until, '[]'::text) STORED"},{"name":"status","type":"relationship_status","nullable":false,"default":"'active'::relationship_status","comment":""},{"name":"active","type":"boolean","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS (status = 'active'::relationship_status) STORED"}],"indexes":[{"name":"couple_pkey","def":"CREATE UNIQUE INDEX couple_pkey ON public.couple USING btree (id)","table":"public.couple","columns":["id"],"comment":""},{"name":"couple_active_idx","def":"CREATE INDEX couple_active_idx ON public.couple USING btree (active)","table":"public.couple","columns":["active"],"comment":""},{"name":"couple_range_idx","def":"CREATE INDEX couple_range_idx ON public.couple USING gist (active_range, man_id, woman_id)","table":"public.couple","columns":["active_range","man_id","woman_id"],"comment":""}],"constraints":[{"name":"couple_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.couple","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"couple_man_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (man_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.couple","referenced_table":"person","columns":["man_id"],"referenced_columns":["id"],"comment":""},{"name":"couple_woman_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (woman_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.couple","referenced_table":"person","columns":["woman_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.couple FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.event","type":"BASE TABLE","comment":"@omit create","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"name","type":"text","nullable":false,"default":null,"comment":""},{"name":"location_text","type":"text","nullable":false,"default":null,"comment":""},{"name":"description","type":"text","nullable":false,"default":null,"comment":""},{"name":"since","type":"date","nullable":true,"default":null,"comment":""},{"name":"until","type":"date","nullable":true,"default":null,"comment":""},{"name":"capacity","type":"integer","nullable":false,"default":"'0'::bigint","comment":""},{"name":"files_legacy","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"is_locked","type":"boolean","nullable":false,"default":"false","comment":""},{"name":"is_visible","type":"boolean","nullable":false,"default":"false","comment":""},{"name":"summary","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"is_public","type":"boolean","nullable":false,"default":"false","comment":""},{"name":"enable_notes","type":"boolean","nullable":false,"default":"false","comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"description_member","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"title_image_legacy","type":"text","nullable":true,"default":null,"comment":""},{"name":"type","type":"event_type","nullable":false,"default":"'camp'::event_type","comment":""},{"name":"payment_type","type":"event_payment_type","nullable":false,"default":"'none'::event_payment_type","comment":""},{"name":"member_price","type":"price","nullable":true,"default":"NULL::price_type","comment":""},{"name":"guest_price","type":"price","nullable":true,"default":"NULL::price_type","comment":""},{"name":"location_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"is_paid_by_tenant","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"payment_recipient_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":true,"default":"CURRENT_TIMESTAMP","comment":""}],"indexes":[{"name":"idx_24557_primary","def":"CREATE UNIQUE INDEX idx_24557_primary ON public.event USING btree (id)","table":"public.event","columns":["id"],"comment":""},{"name":"event_type_idx","def":"CREATE INDEX event_type_idx ON public.event USING btree (type)","table":"public.event","columns":["type"],"comment":""},{"name":"idx_e_tenant","def":"CREATE INDEX idx_e_tenant ON public.event USING btree (tenant_id)","table":"public.event","columns":["tenant_id"],"comment":""},{"name":"idx_event_tenant_visible","def":"CREATE INDEX idx_event_tenant_visible ON public.event USING btree (is_visible, tenant_id)","table":"public.event","columns":["tenant_id","is_visible"],"comment":""},{"name":"is_visible","def":"CREATE INDEX is_visible ON public.event USING btree (is_visible)","table":"public.event","columns":["is_visible"],"comment":""},{"name":"since","def":"CREATE INDEX since ON public.event USING btree (since)","table":"public.event","columns":["since"],"comment":""},{"name":"idx_event_tenant","def":"CREATE INDEX idx_event_tenant ON public.event USING btree (tenant_id, is_visible)","table":"public.event","columns":["tenant_id","is_visible"],"comment":""}],"constraints":[{"name":"event_payment_recipient_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (payment_recipient_id) REFERENCES account(id)","table":"public.event","referenced_table":"account","columns":["payment_recipient_id"],"referenced_columns":["id"],"comment":""},{"name":"idx_24557_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.event","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"event_location_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (location_id) REFERENCES tenant_location(id)","table":"public.event","referenced_table":"tenant_location","columns":["location_id"],"referenced_columns":["id"],"comment":""},{"name":"event_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.event","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.event FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.event_target_cohort","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"event_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"cohort_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"event_target_cohort_pkey","def":"CREATE UNIQUE INDEX event_target_cohort_pkey ON public.event_target_cohort USING btree (id)","table":"public.event_target_cohort","columns":["id"],"comment":""},{"name":"event_target_cohort_cohort_id_idx","def":"CREATE INDEX event_target_cohort_cohort_id_idx ON public.event_target_cohort USING btree (cohort_id)","table":"public.event_target_cohort","columns":["cohort_id"],"comment":""},{"name":"event_target_cohort_event_id_idx","def":"CREATE INDEX event_target_cohort_event_id_idx ON public.event_target_cohort USING btree (event_id)","table":"public.event_target_cohort","columns":["event_id"],"comment":""}],"constraints":[{"name":"event_target_cohort_cohort_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (cohort_id) REFERENCES cohort(id)","table":"public.event_target_cohort","referenced_table":"cohort","columns":["cohort_id"],"referenced_columns":["id"],"comment":""},{"name":"event_target_cohort_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.event_target_cohort","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"event_target_cohort_event_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (event_id) REFERENCES event(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_target_cohort","referenced_table":"event","columns":["event_id"],"referenced_columns":["id"],"comment":""},{"name":"event_target_cohort_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_target_cohort","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.event_target_cohort FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_500_register_members","def":"CREATE TRIGGER _500_register_members AFTER INSERT ON public.event_target_cohort FOR EACH ROW EXECUTE FUNCTION app_private.tg_event_target_cohort__register_members()","comment":""},{"name":"_500_unregister_members","def":"CREATE TRIGGER _500_unregister_members AFTER DELETE ON public.event_target_cohort FOR EACH ROW EXECUTE FUNCTION app_private.tg_event_target_cohort__unregister_members()","comment":""}],"def":""},{"name":"public.event_trainer","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"event_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"lessons_offered","type":"integer","nullable":false,"default":"0","comment":""},{"name":"lesson_price","type":"price","nullable":true,"default":"NULL::price_type","comment":""}],"indexes":[{"name":"event_trainer_pkey","def":"CREATE UNIQUE INDEX event_trainer_pkey ON public.event_trainer USING btree (id)","table":"public.event_trainer","columns":["id"],"comment":""},{"name":"event_trainer_trainer_id_key","def":"CREATE UNIQUE INDEX event_trainer_trainer_id_key ON public.event_trainer USING btree (event_id, person_id)","table":"public.event_trainer","columns":["person_id","event_id"],"comment":""},{"name":"event_trainer_event_id_idx","def":"CREATE INDEX event_trainer_event_id_idx ON public.event_trainer USING btree (event_id)","table":"public.event_trainer","columns":["event_id"],"comment":""},{"name":"event_trainer_person_id_idx","def":"CREATE INDEX event_trainer_person_id_idx ON public.event_trainer USING btree (person_id)","table":"public.event_trainer","columns":["person_id"],"comment":""},{"name":"event_trainer_event_idx","def":"CREATE INDEX event_trainer_event_idx ON public.event_trainer USING btree (event_id, person_id)","table":"public.event_trainer","columns":["person_id","event_id"],"comment":""},{"name":"event_trainer_tenant_event_idx","def":"CREATE INDEX event_trainer_tenant_event_idx ON public.event_trainer USING btree (tenant_id, event_id)","table":"public.event_trainer","columns":["event_id","tenant_id"],"comment":""}],"constraints":[{"name":"event_trainer_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.event_trainer","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"event_trainer_trainer_id_key","type":"UNIQUE","def":"UNIQUE (event_id, person_id)","table":"public.event_trainer","referenced_table":"","columns":["event_id","person_id"],"referenced_columns":[],"comment":""},{"name":"event_trainer_event_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (event_id) REFERENCES event(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_trainer","referenced_table":"event","columns":["event_id"],"referenced_columns":["id"],"comment":""},{"name":"event_trainer_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_trainer","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"event_trainer_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_trainer","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.event_trainer FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.cohort_subscription","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"cohort_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"account_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"price","type":"price","nullable":false,"default":null,"comment":""},{"name":"active","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"renews_on","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"interval","type":"interval","nullable":false,"default":"'1 mon'::interval","comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"cohort_subscription_pkey","def":"CREATE UNIQUE INDEX cohort_subscription_pkey ON public.cohort_subscription USING btree (id)","table":"public.cohort_subscription","columns":["id"],"comment":""}],"constraints":[{"name":"cohort_subscription_account_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (account_id) REFERENCES account(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.cohort_subscription","referenced_table":"account","columns":["account_id"],"referenced_columns":["id"],"comment":""},{"name":"cohort_subscription_cohort_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (cohort_id) REFERENCES cohort(id)","table":"public.cohort_subscription","referenced_table":"cohort","columns":["cohort_id"],"referenced_columns":["id"],"comment":""},{"name":"cohort_subscription_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.cohort_subscription","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"cohort_subscription_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.cohort_subscription","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.cohort_subscription FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.event_instance_trainer","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"instance_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"lesson_price","type":"price","nullable":true,"default":"NULL::price_type","comment":""}],"indexes":[{"name":"event_instance_trainer_pkey","def":"CREATE UNIQUE INDEX event_instance_trainer_pkey ON public.event_instance_trainer USING btree (id)","table":"public.event_instance_trainer","columns":["id"],"comment":""},{"name":"event_instance_trainer_instance_id_idx","def":"CREATE INDEX event_instance_trainer_instance_id_idx ON public.event_instance_trainer USING btree (instance_id)","table":"public.event_instance_trainer","columns":["instance_id"],"comment":""},{"name":"event_instance_trainer_person_id_idx","def":"CREATE INDEX event_instance_trainer_person_id_idx ON public.event_instance_trainer USING btree (person_id)","table":"public.event_instance_trainer","columns":["person_id"],"comment":""},{"name":"event_instance_trainer_tenant_id_idx","def":"CREATE INDEX event_instance_trainer_tenant_id_idx ON public.event_instance_trainer USING btree (tenant_id)","table":"public.event_instance_trainer","columns":["tenant_id"],"comment":""}],"constraints":[{"name":"event_instance_trainer_instance_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (instance_id) REFERENCES event_instance(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_instance_trainer","referenced_table":"event_instance","columns":["instance_id"],"referenced_columns":["id"],"comment":""},{"name":"event_instance_trainer_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.event_instance_trainer","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"event_instance_trainer_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_instance_trainer","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"event_instance_trainer_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_instance_trainer","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.event_instance_trainer FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.tenant","type":"BASE TABLE","comment":"@omit create,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"name","type":"text","nullable":false,"default":null,"comment":""},{"name":"origins","type":"text[]","nullable":false,"default":"ARRAY[]::text[]","comment":""},{"name":"cz_ico","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"cz_dic","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"address","type":"address_domain","nullable":true,"default":null,"comment":""},{"name":"description","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"bank_account","type":"text","nullable":false,"default":"''::text","comment":""}],"indexes":[{"name":"tenant_pkey","def":"CREATE UNIQUE INDEX tenant_pkey ON public.tenant USING btree (id)","table":"public.tenant","columns":["id"],"comment":""}],"constraints":[{"name":"tenant_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.tenant","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"public.payment_debtor","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"payment_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"payment_debtor_pkey","def":"CREATE UNIQUE INDEX payment_debtor_pkey ON public.payment_debtor USING btree (id)","table":"public.payment_debtor","columns":["id"],"comment":""}],"constraints":[{"name":"payment_debtor_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.payment_debtor","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"payment_debtor_payment_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (payment_id) REFERENCES payment(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.payment_debtor","referenced_table":"payment","columns":["payment_id"],"referenced_columns":["id"],"comment":""},{"name":"payment_debtor_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.payment_debtor","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"payment_debtor_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.payment_debtor","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.payment_recipient","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"payment_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"account_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"amount","type":"numeric(19,4)","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"payment_recipient_pkey","def":"CREATE UNIQUE INDEX payment_recipient_pkey ON public.payment_recipient USING btree (id)","table":"public.payment_recipient","columns":["id"],"comment":""}],"constraints":[{"name":"payment_recipient_account_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (account_id) REFERENCES account(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.payment_recipient","referenced_table":"account","columns":["account_id"],"referenced_columns":["id"],"comment":""},{"name":"payment_recipient_payment_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (payment_id) REFERENCES payment(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.payment_recipient","referenced_table":"payment","columns":["payment_id"],"referenced_columns":["id"],"comment":""},{"name":"payment_recipient_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.payment_recipient","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"payment_recipient_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.payment_recipient","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.event_attendance","type":"BASE TABLE","comment":"@omit create,update,delete\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"instance_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"status","type":"attendance_type","nullable":false,"default":"'unknown'::attendance_type","comment":""},{"name":"note","type":"text","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"registration_id","type":"bigint","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"event_attendance_pkey","def":"CREATE UNIQUE INDEX event_attendance_pkey ON public.event_attendance USING btree (id)","table":"public.event_attendance","columns":["id"],"comment":""},{"name":"event_attendance_unique_event_person_key","def":"CREATE UNIQUE INDEX event_attendance_unique_event_person_key ON public.event_attendance USING btree (registration_id, instance_id, person_id)","table":"public.event_attendance","columns":["instance_id","person_id","registration_id"],"comment":""},{"name":"event_attendance_instance_id_idx","def":"CREATE INDEX event_attendance_instance_id_idx ON public.event_attendance USING btree (instance_id)","table":"public.event_attendance","columns":["instance_id"],"comment":""},{"name":"event_attendance_person_id_idx","def":"CREATE INDEX event_attendance_person_id_idx ON public.event_attendance USING btree (person_id)","table":"public.event_attendance","columns":["person_id"],"comment":""}],"constraints":[{"name":"event_attendance_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.event_attendance","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"event_attendance_unique_event_person_key","type":"UNIQUE","def":"UNIQUE (registration_id, instance_id, person_id)","table":"public.event_attendance","referenced_table":"","columns":["instance_id","person_id","registration_id"],"referenced_columns":[],"comment":""},{"name":"event_attendance_instance_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (instance_id) REFERENCES event_instance(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_attendance","referenced_table":"event_instance","columns":["instance_id"],"referenced_columns":["id"],"comment":""},{"name":"event_attendance_registration_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (registration_id) REFERENCES event_registration(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_attendance","referenced_table":"event_registration","columns":["registration_id"],"referenced_columns":["id"],"comment":""},{"name":"event_attendance_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_attendance","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"event_attendance_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.event_attendance","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.event_attendance FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.membership_application","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"first_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"middle_name","type":"text","nullable":true,"default":null,"comment":""},{"name":"last_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"gender","type":"gender_type","nullable":false,"default":null,"comment":""},{"name":"birth_date","type":"date","nullable":true,"default":null,"comment":""},{"name":"nationality","type":"text","nullable":false,"default":null,"comment":""},{"name":"tax_identification_number","type":"text","nullable":true,"default":null,"comment":""},{"name":"national_id_number","type":"text","nullable":true,"default":null,"comment":""},{"name":"csts_id","type":"text","nullable":true,"default":null,"comment":""},{"name":"wdsf_id","type":"text","nullable":true,"default":null,"comment":""},{"name":"prefix_title","type":"text","nullable":true,"default":null,"comment":""},{"name":"suffix_title","type":"text","nullable":true,"default":null,"comment":""},{"name":"bio","type":"text","nullable":true,"default":null,"comment":""},{"name":"email","type":"citext","nullable":true,"default":null,"comment":""},{"name":"phone","type":"text","nullable":true,"default":null,"comment":""},{"name":"created_by","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"status","type":"application_form_status","nullable":false,"default":"'sent'::application_form_status","comment":""},{"name":"note","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"membership_application_pkey","def":"CREATE UNIQUE INDEX membership_application_pkey ON public.membership_application USING btree (id)","table":"public.membership_application","columns":["id"],"comment":""}],"constraints":[{"name":"membership_application_created_by_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (created_by) REFERENCES users(u_id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.membership_application","referenced_table":"users","columns":["created_by"],"referenced_columns":["u_id"],"comment":""},{"name":"membership_application_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.membership_application","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"membership_application_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.membership_application","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.membership_application FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.tenant_membership","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"tenant_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"since","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"until","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"active_range","type":"tstzrange","nullable":false,"default":null,"comment":"@omit","extra_def":"GENERATED ALWAYS AS tstzrange(since, until, '[]'::text) STORED"},{"name":"status","type":"relationship_status","nullable":false,"default":"'active'::relationship_status","comment":""},{"name":"active","type":"boolean","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS (status = 'active'::relationship_status) STORED"}],"indexes":[{"name":"tenant_membership_pkey","def":"CREATE UNIQUE INDEX tenant_membership_pkey ON public.tenant_membership USING btree (id)","table":"public.tenant_membership","columns":["id"],"comment":""},{"name":"tenant_membership_active_idx","def":"CREATE INDEX tenant_membership_active_idx ON public.tenant_membership USING btree (active)","table":"public.tenant_membership","columns":["active"],"comment":""},{"name":"tenant_membership_person_id_idx","def":"CREATE INDEX tenant_membership_person_id_idx ON public.tenant_membership USING btree (person_id)","table":"public.tenant_membership","columns":["person_id"],"comment":""},{"name":"tenant_membership_range_idx","def":"CREATE INDEX tenant_membership_range_idx ON public.tenant_membership USING gist (active_range, tenant_id, person_id)","table":"public.tenant_membership","columns":["active_range","person_id","tenant_id"],"comment":""},{"name":"tenant_membership_status_idx","def":"CREATE INDEX tenant_membership_status_idx ON public.tenant_membership USING btree (status)","table":"public.tenant_membership","columns":["status"],"comment":""},{"name":"tenant_membership_tenant_id_idx","def":"CREATE INDEX tenant_membership_tenant_id_idx ON public.tenant_membership USING btree (tenant_id)","table":"public.tenant_membership","columns":["tenant_id"],"comment":""}],"constraints":[{"name":"tenant_membership_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.tenant_membership","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"tenant_membership_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.tenant_membership","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"tenant_membership_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.tenant_membership","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.tenant_membership FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_500_on_status","def":"CREATE TRIGGER _500_on_status AFTER UPDATE ON public.tenant_membership FOR EACH ROW WHEN ((old.status IS DISTINCT FROM new.status)) EXECUTE FUNCTION app_private.tg_tenant_membership__on_status()","comment":""}],"def":""},{"name":"app_private.app_table_overview","type":"VIEW","comment":"","columns":[{"name":"relname","type":"name","nullable":true,"default":null,"comment":""},{"name":"rls","type":"text","nullable":true,"default":null,"comment":""},{"name":"has_id","type":"text","nullable":true,"default":null,"comment":""},{"name":"has_tenant","type":"text","nullable":true,"default":null,"comment":""},{"name":"wrong_acl","type":"information_schema.sql_identifier[]","nullable":true,"default":null,"comment":""},{"name":"policies","type":"name[]","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW app_table_overview AS (\n SELECT c.relname,\n        CASE c.relrowsecurity\n            WHEN true THEN ''::text\n            ELSE 'NO RLS'::text\n        END AS rls,\n        CASE (EXISTS ( SELECT 1\n               FROM information_schema.columns\n              WHERE (((columns.table_name)::name = c.relname) AND ((columns.table_schema)::name = n.nspname) AND ((columns.column_name)::name = 'id'::name))))\n            WHEN true THEN ''::text\n            ELSE 'NO ID'::text\n        END AS has_id,\n        CASE (EXISTS ( SELECT 1\n               FROM information_schema.columns\n              WHERE (((columns.table_name)::name = c.relname) AND ((columns.table_schema)::name = n.nspname) AND ((columns.column_name)::name = 'tenant_id'::name))))\n            WHEN true THEN ''::text\n            ELSE 'NO TENANT'::text\n        END AS has_tenant,\n        CASE ( SELECT (array_agg(role_table_grants.grantee ORDER BY role_table_grants.grantee))::text[] AS array_agg\n               FROM information_schema.role_table_grants\n              WHERE (((role_table_grants.table_name)::name = c.relname) AND ((role_table_grants.table_schema)::name = 'public'::name) AND ((role_table_grants.privilege_type)::text = 'SELECT'::text))\n              GROUP BY role_table_grants.table_name)\n            WHEN ARRAY['anonymous'::text, 'olymp'::text] THEN NULL::information_schema.sql_identifier[]\n            ELSE ( SELECT array_agg(role_table_grants.grantee ORDER BY role_table_grants.grantee) AS array_agg\n               FROM information_schema.role_table_grants\n              WHERE (((role_table_grants.table_name)::name = c.relname) AND ((role_table_grants.table_schema)::name = 'public'::name) AND ((role_table_grants.privilege_type)::text = 'SELECT'::text))\n              GROUP BY role_table_grants.table_name)\n        END AS wrong_acl,\n    ARRAY( SELECT p.polname\n           FROM pg_policy p\n          WHERE (p.polrelid = c.oid)) AS policies\n   FROM (pg_class c\n     JOIN pg_namespace n ON ((n.oid = c.relnamespace)))\n  WHERE ((c.relkind = 'r'::\"char\") AND (n.nspname = 'public'::name))\n  ORDER BY c.relname\n)","referenced_tables":["information_schema.columns","information_schema.role_table_grants","pg_policy","pg_class","pg_namespace"]},{"name":"app_private.crm_activity","type":"BASE TABLE","comment":"@omit delete","columns":[{"name":"id","type":"integer","nullable":false,"default":"nextval('app_private.crm_activity_id_seq'::regclass)","comment":""},{"name":"prospect","type":"integer","nullable":true,"default":null,"comment":""},{"name":"origin","type":"text","nullable":false,"default":null,"comment":""},{"name":"note","type":"text","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"crm_activity_pkey","def":"CREATE UNIQUE INDEX crm_activity_pkey ON app_private.crm_activity USING btree (id)","table":"app_private.crm_activity","columns":["id"],"comment":""}],"constraints":[{"name":"crm_activity_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"app_private.crm_activity","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"crm_activity_prospect_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (prospect) REFERENCES app_private.crm_prospect(id) ON DELETE CASCADE","table":"app_private.crm_activity","referenced_table":"crm_prospect","columns":["prospect"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON app_private.crm_activity FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"app_private.crm_prospect","type":"BASE TABLE","comment":"@omit create","columns":[{"name":"id","type":"integer","nullable":false,"default":"nextval('app_private.crm_prospect_id_seq'::regclass)","comment":""},{"name":"cohort","type":"app_private.crm_cohort","nullable":true,"default":null,"comment":""},{"name":"data","type":"prospect_data","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"crm_prospect_pkey","def":"CREATE UNIQUE INDEX crm_prospect_pkey ON app_private.crm_prospect USING btree (id)","table":"app_private.crm_prospect","columns":["id"],"comment":""}],"constraints":[{"name":"crm_prospect_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"app_private.crm_prospect","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON app_private.crm_prospect FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"app_private.meta_fks","type":"VIEW","comment":"","columns":[{"name":"table_schema","type":"text","nullable":true,"default":null,"comment":""},{"name":"table_name","type":"text","nullable":true,"default":null,"comment":""},{"name":"column_name","type":"information_schema.sql_identifier","nullable":true,"default":null,"comment":""},{"name":"constraint_name","type":"name","nullable":true,"default":null,"comment":""},{"name":"confupdtype","type":"\"char\"","nullable":true,"default":null,"comment":""},{"name":"confdeltype","type":"\"char\"","nullable":true,"default":null,"comment":""},{"name":"pg_get_constraintdef","type":"text","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW meta_fks AS (\n SELECT all_constraints.table_schema,\n    all_constraints.table_name,\n    all_constraints.column_name,\n    all_constraints.constraint_name,\n    all_constraints.confupdtype,\n    all_constraints.confdeltype,\n    all_constraints.pg_get_constraintdef\n   FROM ( SELECT ((c.connamespace)::regnamespace)::text AS table_schema,\n            ((c.conrelid)::regclass)::text AS table_name,\n            con.column_name,\n            c.conname AS constraint_name,\n            c.confupdtype,\n            c.confdeltype,\n            pg_get_constraintdef(c.oid) AS pg_get_constraintdef\n           FROM (((pg_constraint c\n             JOIN pg_namespace ON ((pg_namespace.oid = c.connamespace)))\n             JOIN pg_class ON ((c.conrelid = pg_class.oid)))\n             LEFT JOIN information_schema.constraint_column_usage con ON (((c.conname = (con.constraint_name)::name) AND (pg_namespace.nspname = (con.constraint_schema)::name))))) all_constraints\n  WHERE (all_constraints.table_schema = ANY (ARRAY['public'::text, 'app_private'::text]))\n  ORDER BY all_constraints.table_schema, all_constraints.table_name, all_constraints.column_name, all_constraints.constraint_name\n)","referenced_tables":["pg_constraint","pg_namespace","pg_class","information_schema.constraint_column_usage"]},{"name":"app_private.pary_navrh","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"pn_id","type":"bigint","nullable":false,"default":"nextval('app_private.pary_navrh_pn_id_seq'::regclass)","comment":""},{"name":"pn_navrhl","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"pn_partner","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"pn_partnerka","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS pn_id STORED"}],"indexes":[{"name":"idx_24662_primary","def":"CREATE UNIQUE INDEX idx_24662_primary ON app_private.pary_navrh USING btree (pn_id)","table":"app_private.pary_navrh","columns":["pn_id"],"comment":""},{"name":"pary_navrh_unique_id","def":"CREATE UNIQUE INDEX pary_navrh_unique_id ON app_private.pary_navrh USING btree (id)","table":"app_private.pary_navrh","columns":["id"],"comment":""}],"constraints":[{"name":"idx_24662_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (pn_id)","table":"app_private.pary_navrh","referenced_table":"","columns":["pn_id"],"referenced_columns":[],"comment":""},{"name":"pary_navrh_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"app_private.pary_navrh","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"pary_navrh_pn_navrhl_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pn_navrhl) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"app_private.pary_navrh","referenced_table":"users","columns":["pn_navrhl"],"referenced_columns":["u_id"],"comment":""},{"name":"pary_navrh_pn_partner_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pn_partner) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"app_private.pary_navrh","referenced_table":"users","columns":["pn_partner"],"referenced_columns":["u_id"],"comment":""},{"name":"pary_navrh_pn_partnerka_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pn_partnerka) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"app_private.pary_navrh","referenced_table":"users","columns":["pn_partnerka"],"referenced_columns":["u_id"],"comment":""}],"triggers":[],"def":""},{"name":"app_private.skupiny","type":"BASE TABLE","comment":"","columns":[{"name":"s_id","type":"bigint","nullable":false,"default":"nextval('app_private.skupiny_s_id_seq'::regclass)","comment":""},{"name":"s_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"s_description","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"s_color_rgb","type":"text","nullable":false,"default":null,"comment":""},{"name":"s_location","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"s_visible","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"ordering","type":"integer","nullable":false,"default":"1","comment":""},{"name":"cohort_group","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS s_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"idx_24756_primary","def":"CREATE UNIQUE INDEX idx_24756_primary ON app_private.skupiny USING btree (s_id)","table":"app_private.skupiny","columns":["s_id"],"comment":""},{"name":"skupiny_unique_id","def":"CREATE UNIQUE INDEX skupiny_unique_id ON app_private.skupiny USING btree (id)","table":"app_private.skupiny","columns":["id"],"comment":""}],"constraints":[{"name":"idx_24756_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (s_id)","table":"app_private.skupiny","referenced_table":"","columns":["s_id"],"referenced_columns":[],"comment":""},{"name":"skupiny_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"app_private.skupiny","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"skupiny_cohort_group_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (cohort_group) REFERENCES cohort_group(id) ON DELETE SET NULL","table":"app_private.skupiny","referenced_table":"cohort_group","columns":["cohort_group"],"referenced_columns":["id"],"comment":""},{"name":"skupiny_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"app_private.skupiny","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"graphile_migrate.current","type":"BASE TABLE","comment":"","columns":[{"name":"filename","type":"text","nullable":false,"default":"'current.sql'::text","comment":""},{"name":"content","type":"text","nullable":false,"default":null,"comment":""},{"name":"date","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"current_pkey","def":"CREATE UNIQUE INDEX current_pkey ON graphile_migrate.current USING btree (filename)","table":"graphile_migrate.current","columns":["filename"],"comment":""}],"constraints":[{"name":"current_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (filename)","table":"graphile_migrate.current","referenced_table":"","columns":["filename"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"graphile_migrate.migrations","type":"BASE TABLE","comment":"","columns":[{"name":"hash","type":"text","nullable":false,"default":null,"comment":""},{"name":"previous_hash","type":"text","nullable":true,"default":null,"comment":""},{"name":"filename","type":"text","nullable":false,"default":null,"comment":""},{"name":"date","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"migrations_pkey","def":"CREATE UNIQUE INDEX migrations_pkey ON graphile_migrate.migrations USING btree (hash)","table":"graphile_migrate.migrations","columns":["hash"],"comment":""}],"constraints":[{"name":"migrations_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (hash)","table":"graphile_migrate.migrations","referenced_table":"","columns":["hash"],"referenced_columns":[],"comment":""},{"name":"migrations_previous_hash_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (previous_hash) REFERENCES graphile_migrate.migrations(hash)","table":"graphile_migrate.migrations","referenced_table":"migrations","columns":["previous_hash"],"referenced_columns":["hash"],"comment":""}],"triggers":[],"def":""},{"name":"graphile_worker._private_job_queues","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"integer","nullable":false,"default":null,"comment":""},{"name":"queue_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"locked_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"locked_by","type":"text","nullable":true,"default":null,"comment":""},{"name":"is_available","type":"boolean","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS (locked_at IS NULL) STORED"}],"indexes":[{"name":"job_queues_pkey1","def":"CREATE UNIQUE INDEX job_queues_pkey1 ON graphile_worker._private_job_queues USING btree (id)","table":"graphile_worker._private_job_queues","columns":["id"],"comment":""},{"name":"job_queues_queue_name_key","def":"CREATE UNIQUE INDEX job_queues_queue_name_key ON graphile_worker._private_job_queues USING btree (queue_name)","table":"graphile_worker._private_job_queues","columns":["queue_name"],"comment":""}],"constraints":[{"name":"job_queues_queue_name_check","type":"CHECK","def":"CHECK ((length(queue_name) \u003c= 128))","table":"graphile_worker._private_job_queues","referenced_table":"","columns":["queue_name"],"referenced_columns":[],"comment":""},{"name":"job_queues_pkey1","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"graphile_worker._private_job_queues","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"job_queues_queue_name_key","type":"UNIQUE","def":"UNIQUE (queue_name)","table":"graphile_worker._private_job_queues","referenced_table":"","columns":["queue_name"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"graphile_worker._private_known_crontabs","type":"BASE TABLE","comment":"","columns":[{"name":"identifier","type":"text","nullable":false,"default":null,"comment":""},{"name":"known_since","type":"timestamp with time zone","nullable":false,"default":null,"comment":""},{"name":"last_execution","type":"timestamp with time zone","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"known_crontabs_pkey","def":"CREATE UNIQUE INDEX known_crontabs_pkey ON graphile_worker._private_known_crontabs USING btree (identifier)","table":"graphile_worker._private_known_crontabs","columns":["identifier"],"comment":""}],"constraints":[{"name":"known_crontabs_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (identifier)","table":"graphile_worker._private_known_crontabs","referenced_table":"","columns":["identifier"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"graphile_worker._private_tasks","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"integer","nullable":false,"default":null,"comment":""},{"name":"identifier","type":"text","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"tasks_identifier_key","def":"CREATE UNIQUE INDEX tasks_identifier_key ON graphile_worker._private_tasks USING btree (identifier)","table":"graphile_worker._private_tasks","columns":["identifier"],"comment":""},{"name":"tasks_pkey","def":"CREATE UNIQUE INDEX tasks_pkey ON graphile_worker._private_tasks USING btree (id)","table":"graphile_worker._private_tasks","columns":["id"],"comment":""}],"constraints":[{"name":"tasks_identifier_check","type":"CHECK","def":"CHECK ((length(identifier) \u003c= 128))","table":"graphile_worker._private_tasks","referenced_table":"","columns":["identifier"],"referenced_columns":[],"comment":""},{"name":"tasks_identifier_key","type":"UNIQUE","def":"UNIQUE (identifier)","table":"graphile_worker._private_tasks","referenced_table":"","columns":["identifier"],"referenced_columns":[],"comment":""},{"name":"tasks_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"graphile_worker._private_tasks","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"graphile_worker.jobs","type":"VIEW","comment":"","columns":[{"name":"id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"queue_name","type":"text","nullable":true,"default":null,"comment":""},{"name":"task_identifier","type":"text","nullable":true,"default":null,"comment":""},{"name":"priority","type":"smallint","nullable":true,"default":null,"comment":""},{"name":"run_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"attempts","type":"smallint","nullable":true,"default":null,"comment":""},{"name":"max_attempts","type":"smallint","nullable":true,"default":null,"comment":""},{"name":"last_error","type":"text","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"key","type":"text","nullable":true,"default":null,"comment":""},{"name":"locked_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"locked_by","type":"text","nullable":true,"default":null,"comment":""},{"name":"revision","type":"integer","nullable":true,"default":null,"comment":""},{"name":"flags","type":"jsonb","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW jobs AS (\n SELECT jobs.id,\n    job_queues.queue_name,\n    tasks.identifier AS task_identifier,\n    jobs.priority,\n    jobs.run_at,\n    jobs.attempts,\n    jobs.max_attempts,\n    jobs.last_error,\n    jobs.created_at,\n    jobs.updated_at,\n    jobs.key,\n    jobs.locked_at,\n    jobs.locked_by,\n    jobs.revision,\n    jobs.flags\n   FROM ((graphile_worker._private_jobs jobs\n     JOIN graphile_worker._private_tasks tasks ON ((tasks.id = jobs.task_id)))\n     LEFT JOIN graphile_worker._private_job_queues job_queues ON ((job_queues.id = jobs.job_queue_id)))\n)","referenced_tables":["graphile_worker._private_jobs","graphile_worker._private_tasks","graphile_worker._private_job_queues"]},{"name":"graphile_worker.migrations","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"integer","nullable":false,"default":null,"comment":""},{"name":"ts","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"breaking","type":"boolean","nullable":false,"default":"false","comment":""}],"indexes":[{"name":"migrations_pkey","def":"CREATE UNIQUE INDEX migrations_pkey ON graphile_worker.migrations USING btree (id)","table":"graphile_worker.migrations","columns":["id"],"comment":""}],"constraints":[{"name":"migrations_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"graphile_worker.migrations","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"public.accounting_period","type":"BASE TABLE","comment":"@omit ","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"name","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"since","type":"timestamp with time zone","nullable":false,"default":null,"comment":""},{"name":"until","type":"timestamp with time zone","nullable":false,"default":null,"comment":""},{"name":"range","type":"tstzrange","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS tstzrange(since, until, '[]'::text) STORED"},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"accounting_period_pkey","def":"CREATE UNIQUE INDEX accounting_period_pkey ON public.accounting_period USING btree (id)","table":"public.accounting_period","columns":["id"],"comment":""}],"constraints":[{"name":"accounting_period_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.accounting_period","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"accounting_period_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.accounting_period","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.accounting_period FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.aktuality","type":"BASE TABLE","comment":"","columns":[{"name":"at_id","type":"bigint","nullable":false,"default":"nextval('aktuality_at_id_seq'::regclass)","comment":""},{"name":"at_kdo","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"at_kat","type":"text","nullable":false,"default":"'1'::text","comment":"@deprecated"},{"name":"at_jmeno","type":"text","nullable":false,"default":null,"comment":""},{"name":"at_text","type":"text","nullable":false,"default":null,"comment":""},{"name":"at_preview","type":"text","nullable":false,"default":null,"comment":""},{"name":"at_foto","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"at_foto_main","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":true,"default":"now()","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS at_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"title_photo_url","type":"text","nullable":true,"default":null,"comment":""},{"name":"at_timestamp","type":"timestamp with time zone","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS updated_at STORED"},{"name":"at_timestamp_add","type":"timestamp with time zone","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS created_at STORED"}],"indexes":[{"name":"aktuality_unique_id","def":"CREATE UNIQUE INDEX aktuality_unique_id ON public.aktuality USING btree (id)","table":"public.aktuality","columns":["id"],"comment":""},{"name":"idx_24575_primary","def":"CREATE UNIQUE INDEX idx_24575_primary ON public.aktuality USING btree (at_id)","table":"public.aktuality","columns":["at_id"],"comment":""},{"name":"idx_24575_aktuality_at_kdo_fkey","def":"CREATE INDEX idx_24575_aktuality_at_kdo_fkey ON public.aktuality USING btree (at_kdo)","table":"public.aktuality","columns":["at_kdo"],"comment":""},{"name":"idx_24575_at_timestamp_add","def":"CREATE INDEX idx_24575_at_timestamp_add ON public.aktuality USING btree (created_at)","table":"public.aktuality","columns":["created_at"],"comment":""},{"name":"tenant_id","def":"CREATE INDEX tenant_id ON public.aktuality USING btree (tenant_id)","table":"public.aktuality","columns":["tenant_id"],"comment":""}],"constraints":[{"name":"aktuality_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.aktuality","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"idx_24575_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (at_id)","table":"public.aktuality","referenced_table":"","columns":["at_id"],"referenced_columns":[],"comment":""},{"name":"aktuality_at_foto_main_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (at_foto_main) REFERENCES galerie_foto(gf_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.aktuality","referenced_table":"galerie_foto","columns":["at_foto_main"],"referenced_columns":["gf_id"],"comment":""},{"name":"aktuality_at_kdo_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (at_kdo) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.aktuality","referenced_table":"users","columns":["at_kdo"],"referenced_columns":["u_id"],"comment":""},{"name":"aktuality_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.aktuality","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.aktuality FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"on_update_author","def":"CREATE TRIGGER on_update_author BEFORE UPDATE ON public.aktuality FOR EACH ROW EXECUTE FUNCTION on_update_author_aktuality()","comment":""}],"def":""},{"name":"public.tenant_administrator","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"tenant_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"since","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"until","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"is_visible","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"description","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"active_range","type":"tstzrange","nullable":false,"default":null,"comment":"@omit","extra_def":"GENERATED ALWAYS AS tstzrange(since, until, '[]'::text) STORED"},{"name":"status","type":"relationship_status","nullable":false,"default":"'active'::relationship_status","comment":""},{"name":"active","type":"boolean","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS (status = 'active'::relationship_status) STORED"}],"indexes":[{"name":"tenant_administrator_pkey","def":"CREATE UNIQUE INDEX tenant_administrator_pkey ON public.tenant_administrator USING btree (id)","table":"public.tenant_administrator","columns":["id"],"comment":""},{"name":"tenant_administrator_person_id_idx","def":"CREATE INDEX tenant_administrator_person_id_idx ON public.tenant_administrator USING btree (person_id)","table":"public.tenant_administrator","columns":["person_id"],"comment":""},{"name":"tenant_administrator_range_idx","def":"CREATE INDEX tenant_administrator_range_idx ON public.tenant_administrator USING gist (active_range, tenant_id, person_id)","table":"public.tenant_administrator","columns":["active_range","person_id","tenant_id"],"comment":""}],"constraints":[{"name":"tenant_administrator_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.tenant_administrator","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"tenant_administrator_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.tenant_administrator","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"tenant_administrator_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.tenant_administrator","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.tenant_administrator FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.tenant_trainer","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"tenant_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"since","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"until","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"is_visible","type":"boolean","nullable":true,"default":"true","comment":""},{"name":"description","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"active_range","type":"tstzrange","nullable":false,"default":null,"comment":"@omit","extra_def":"GENERATED ALWAYS AS tstzrange(since, until, '[]'::text) STORED"},{"name":"member_price_45min","type":"price","nullable":true,"default":"NULL::price_type","comment":""},{"name":"guest_price_45min","type":"price","nullable":true,"default":"NULL::price_type","comment":""},{"name":"member_payout_45min","type":"price","nullable":true,"default":"NULL::price_type","comment":""},{"name":"guest_payout_45min","type":"price","nullable":true,"default":"NULL::price_type","comment":""},{"name":"create_payout_payments","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"status","type":"relationship_status","nullable":false,"default":"'active'::relationship_status","comment":""},{"name":"active","type":"boolean","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS (status = 'active'::relationship_status) STORED"}],"indexes":[{"name":"tenant_trainer_pkey","def":"CREATE UNIQUE INDEX tenant_trainer_pkey ON public.tenant_trainer USING btree (id)","table":"public.tenant_trainer","columns":["id"],"comment":""},{"name":"tenant_trainer_person_id_idx","def":"CREATE INDEX tenant_trainer_person_id_idx ON public.tenant_trainer USING btree (person_id)","table":"public.tenant_trainer","columns":["person_id"],"comment":""},{"name":"tenant_trainer_range_idx","def":"CREATE INDEX tenant_trainer_range_idx ON public.tenant_trainer USING gist (active_range, tenant_id, person_id)","table":"public.tenant_trainer","columns":["active_range","person_id","tenant_id"],"comment":""}],"constraints":[{"name":"tenant_trainer_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.tenant_trainer","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"tenant_trainer_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.tenant_trainer","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""},{"name":"tenant_trainer_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.tenant_trainer","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.tenant_trainer FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.allowed_tenants_view","type":"VIEW","comment":"@omit","columns":[{"name":"person_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"is_member","type":"boolean","nullable":true,"default":null,"comment":""},{"name":"is_trainer","type":"boolean","nullable":true,"default":null,"comment":""},{"name":"is_admin","type":"boolean","nullable":true,"default":null,"comment":""},{"name":"is_allowed","type":"boolean","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW allowed_tenants_view AS (\n SELECT person.id AS person_id,\n    tenant.id AS tenant_id,\n    (max(member.id) IS NOT NULL) AS is_member,\n    (max(trainer.id) IS NOT NULL) AS is_trainer,\n    (max(admin.id) IS NOT NULL) AS is_admin,\n    ((max(member.id) IS NOT NULL) OR (max(trainer.id) IS NOT NULL) OR (max(admin.id) IS NOT NULL)) AS is_allowed\n   FROM ((((person\n     CROSS JOIN tenant)\n     LEFT JOIN tenant_membership member ON (((member.tenant_id = tenant.id) AND (member.person_id = person.id) AND (member.status = 'active'::relationship_status))))\n     LEFT JOIN tenant_trainer trainer ON (((trainer.tenant_id = tenant.id) AND (trainer.person_id = person.id) AND (trainer.status = 'active'::relationship_status))))\n     LEFT JOIN tenant_administrator admin ON (((admin.tenant_id = tenant.id) AND (admin.person_id = person.id) AND (admin.status = 'active'::relationship_status))))\n  WHERE ((member.id IS NOT NULL) OR (trainer.id IS NOT NULL) OR (admin.id IS NOT NULL))\n  GROUP BY person.id, tenant.id\n)","referenced_tables":["public.person","public.tenant","public.tenant_membership","public.tenant_trainer","public.tenant_administrator"]},{"name":"public.allowed_tenants","type":"MATERIALIZED VIEW","comment":"@omit","columns":[{"name":"person_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"is_member","type":"boolean","nullable":true,"default":null,"comment":""},{"name":"is_trainer","type":"boolean","nullable":true,"default":null,"comment":""},{"name":"is_admin","type":"boolean","nullable":true,"default":null,"comment":""},{"name":"is_allowed","type":"boolean","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"allowed_tenants_person_id_tenant_id_idx","def":"CREATE UNIQUE INDEX allowed_tenants_person_id_tenant_id_idx ON public.allowed_tenants USING btree (person_id, tenant_id)","table":"public.allowed_tenants","columns":["person_id","tenant_id"],"comment":""}],"constraints":[],"triggers":[],"def":"CREATE MATERIALIZED VIEW allowed_tenants AS (\n SELECT allowed_tenants_view.person_id,\n    allowed_tenants_view.tenant_id,\n    allowed_tenants_view.is_member,\n    allowed_tenants_view.is_trainer,\n    allowed_tenants_view.is_admin,\n    allowed_tenants_view.is_allowed\n   FROM allowed_tenants_view\n)","referenced_tables":["public.allowed_tenants_view"]},{"name":"public.cohort_membership","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"cohort_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"since","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"until","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"active_range","type":"tstzrange","nullable":false,"default":null,"comment":"@omit","extra_def":"GENERATED ALWAYS AS tstzrange(since, until, '[]'::text) STORED"},{"name":"status","type":"relationship_status","nullable":false,"default":"'active'::relationship_status","comment":""},{"name":"active","type":"boolean","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS (status = 'active'::relationship_status) STORED"}],"indexes":[{"name":"cohort_membership_pkey","def":"CREATE UNIQUE INDEX cohort_membership_pkey ON public.cohort_membership USING btree (id)","table":"public.cohort_membership","columns":["id"],"comment":""},{"name":"cohort_membership_active_idx","def":"CREATE INDEX cohort_membership_active_idx ON public.cohort_membership USING btree (active)","table":"public.cohort_membership","columns":["active"],"comment":""},{"name":"cohort_membership_cohort_id_idx","def":"CREATE INDEX cohort_membership_cohort_id_idx ON public.cohort_membership USING btree (cohort_id)","table":"public.cohort_membership","columns":["cohort_id"],"comment":""},{"name":"cohort_membership_person_id_idx","def":"CREATE INDEX cohort_membership_person_id_idx ON public.cohort_membership USING btree (person_id)","table":"public.cohort_membership","columns":["person_id"],"comment":""},{"name":"cohort_membership_range_idx","def":"CREATE INDEX cohort_membership_range_idx ON public.cohort_membership USING gist (active_range, tenant_id, person_id)","table":"public.cohort_membership","columns":["active_range","person_id","tenant_id"],"comment":""},{"name":"cohort_membership_status_idx","def":"CREATE INDEX cohort_membership_status_idx ON public.cohort_membership USING btree (status)","table":"public.cohort_membership","columns":["status"],"comment":""},{"name":"idx_cm_tenant","def":"CREATE INDEX idx_cm_tenant ON public.cohort_membership USING btree (tenant_id)","table":"public.cohort_membership","columns":["tenant_id"],"comment":""}],"constraints":[{"name":"cohort_membership_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.cohort_membership","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"cohort_membership_cohort_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (cohort_id) REFERENCES cohort(id)","table":"public.cohort_membership","referenced_table":"cohort","columns":["cohort_id"],"referenced_columns":["id"],"comment":""},{"name":"cohort_membership_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.cohort_membership","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"cohort_membership_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.cohort_membership","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.cohort_membership FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""},{"name":"_500_on_status","def":"CREATE TRIGGER _500_on_status AFTER INSERT OR UPDATE ON public.cohort_membership FOR EACH ROW EXECUTE FUNCTION app_private.tg_cohort_membership__on_status()","comment":""}],"def":""},{"name":"public.auth_details_view","type":"VIEW","comment":"@omit","columns":[{"name":"person_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"couple_ids","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"cohort_memberships","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"tenant_memberships","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"tenant_trainers","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"tenant_administrators","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"allowed_tenants","type":"bigint[]","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW auth_details_view AS (\n SELECT person.id AS person_id,\n    array_remove(array_agg(couple.id), NULL::bigint) AS couple_ids,\n    array_remove(array_agg(cohort_membership.cohort_id), NULL::bigint) AS cohort_memberships,\n    array_remove(array_agg(tenant_membership.tenant_id), NULL::bigint) AS tenant_memberships,\n    array_remove(array_agg(tenant_trainer.tenant_id), NULL::bigint) AS tenant_trainers,\n    array_remove(array_agg(tenant_administrator.tenant_id), NULL::bigint) AS tenant_administrators,\n    array_remove(((array_agg(tenant_administrator.tenant_id) || array_agg(tenant_trainer.tenant_id)) || array_agg(tenant_membership.tenant_id)), NULL::bigint) AS allowed_tenants\n   FROM (((((person\n     LEFT JOIN couple ON ((((person.id = couple.man_id) OR (person.id = couple.woman_id)) AND (couple.status = 'active'::relationship_status))))\n     LEFT JOIN cohort_membership ON (((person.id = cohort_membership.person_id) AND (cohort_membership.status = 'active'::relationship_status))))\n     LEFT JOIN tenant_membership ON (((person.id = tenant_membership.person_id) AND (tenant_membership.status = 'active'::relationship_status))))\n     LEFT JOIN tenant_trainer ON (((person.id = tenant_trainer.person_id) AND (tenant_trainer.status = 'active'::relationship_status))))\n     LEFT JOIN tenant_administrator ON (((person.id = tenant_administrator.person_id) AND (tenant_administrator.status = 'active'::relationship_status))))\n  GROUP BY person.id\n)","referenced_tables":["public.person","public.couple","public.cohort_membership","public.tenant_membership","public.tenant_trainer","public.tenant_administrator"]},{"name":"public.auth_details","type":"MATERIALIZED VIEW","comment":"@omit","columns":[{"name":"person_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"couple_ids","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"cohort_memberships","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"tenant_memberships","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"tenant_trainers","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"tenant_administrators","type":"bigint[]","nullable":true,"default":null,"comment":""},{"name":"allowed_tenants","type":"bigint[]","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"auth_details_person_id_idx","def":"CREATE UNIQUE INDEX auth_details_person_id_idx ON public.auth_details USING btree (person_id)","table":"public.auth_details","columns":["person_id"],"comment":""}],"constraints":[],"triggers":[],"def":"CREATE MATERIALIZED VIEW auth_details AS (\n SELECT auth_details_view.person_id,\n    auth_details_view.couple_ids,\n    auth_details_view.cohort_memberships,\n    auth_details_view.tenant_memberships,\n    auth_details_view.tenant_trainers,\n    auth_details_view.tenant_administrators,\n    auth_details_view.allowed_tenants\n   FROM auth_details_view\n)","referenced_tables":["public.auth_details_view"]},{"name":"public.cohort","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"cohort_group_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"name","type":"text","nullable":false,"default":null,"comment":""},{"name":"description","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"color_rgb","type":"text","nullable":false,"default":null,"comment":""},{"name":"location","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"is_visible","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"ordering","type":"integer","nullable":false,"default":"1","comment":""}],"indexes":[{"name":"cohort_pkey","def":"CREATE UNIQUE INDEX cohort_pkey ON public.cohort USING btree (id)","table":"public.cohort","columns":["id"],"comment":""}],"constraints":[{"name":"cohort_cohort_group_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (cohort_group_id) REFERENCES cohort_group(id) ON DELETE SET NULL","table":"public.cohort","referenced_table":"cohort_group","columns":["cohort_group_id"],"referenced_columns":["id"],"comment":""},{"name":"cohort_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.cohort","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"cohort_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.cohort","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.cohort_group","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"name","type":"text","nullable":false,"default":null,"comment":""},{"name":"description","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"ordering","type":"integer","nullable":false,"default":"1","comment":""},{"name":"is_public","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"cohort_group_pkey","def":"CREATE UNIQUE INDEX cohort_group_pkey ON public.cohort_group USING btree (id)","table":"public.cohort_group","columns":["id"],"comment":""}],"constraints":[{"name":"cohort_group_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.cohort_group","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"cohort_group_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.cohort_group","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.dokumenty","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"d_id","type":"bigint","nullable":false,"default":"nextval('dokumenty_d_id_seq'::regclass)","comment":""},{"name":"d_path","type":"text","nullable":false,"default":null,"comment":""},{"name":"d_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"d_filename","type":"text","nullable":false,"default":null,"comment":""},{"name":"d_kategorie","type":"smallint","nullable":false,"default":null,"comment":""},{"name":"d_kdo","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":true,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS d_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":true,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"d_timestamp","type":"timestamp with time zone","nullable":true,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS updated_at STORED"}],"indexes":[{"name":"dokumenty_unique_id","def":"CREATE UNIQUE INDEX dokumenty_unique_id ON public.dokumenty USING btree (id)","table":"public.dokumenty","columns":["id"],"comment":""},{"name":"idx_24593_primary","def":"CREATE UNIQUE INDEX idx_24593_primary ON public.dokumenty USING btree (d_id)","table":"public.dokumenty","columns":["d_id"],"comment":""},{"name":"idx_24593_d_path","def":"CREATE UNIQUE INDEX idx_24593_d_path ON public.dokumenty USING btree (d_path)","table":"public.dokumenty","columns":["d_path"],"comment":""}],"constraints":[{"name":"dokumenty_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.dokumenty","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"idx_24593_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (d_id)","table":"public.dokumenty","referenced_table":"","columns":["d_id"],"referenced_columns":[],"comment":""},{"name":"dokumenty_d_kdo_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (d_kdo) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.dokumenty","referenced_table":"users","columns":["d_kdo"],"referenced_columns":["u_id"],"comment":""},{"name":"dokumenty_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.dokumenty","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.dokumenty FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.form_responses","type":"BASE TABLE","comment":"@omit update,delete","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"type","type":"text","nullable":false,"default":null,"comment":""},{"name":"data","type":"jsonb","nullable":false,"default":null,"comment":""},{"name":"url","type":"text","nullable":false,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"form_responses_pkey","def":"CREATE UNIQUE INDEX form_responses_pkey ON public.form_responses USING btree (id)","table":"public.form_responses","columns":["id"],"comment":""}],"constraints":[{"name":"form_responses_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.form_responses","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"form_responses_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.form_responses","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.form_responses FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.galerie_dir","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"gd_id","type":"bigint","nullable":false,"default":"nextval('galerie_dir_gd_id_seq'::regclass)","comment":""},{"name":"gd_id_rodic","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"gd_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"gd_level","type":"smallint","nullable":false,"default":"'1'::smallint","comment":""},{"name":"gd_path","type":"text","nullable":false,"default":null,"comment":""},{"name":"gd_hidden","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS gd_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"galerie_dir_unique_id","def":"CREATE UNIQUE INDEX galerie_dir_unique_id ON public.galerie_dir USING btree (id)","table":"public.galerie_dir","columns":["id"],"comment":""},{"name":"idx_24602_primary","def":"CREATE UNIQUE INDEX idx_24602_primary ON public.galerie_dir USING btree (gd_id)","table":"public.galerie_dir","columns":["gd_id"],"comment":""}],"constraints":[{"name":"galerie_dir_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.galerie_dir","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"idx_24602_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (gd_id)","table":"public.galerie_dir","referenced_table":"","columns":["gd_id"],"referenced_columns":[],"comment":""},{"name":"galerie_dir_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.galerie_dir","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.galerie_foto","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"gf_id","type":"bigint","nullable":false,"default":"nextval('galerie_foto_gf_id_seq'::regclass)","comment":""},{"name":"gf_id_rodic","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"gf_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"gf_path","type":"text","nullable":false,"default":null,"comment":""},{"name":"gf_kdo","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS gf_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":true,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"gf_timestamp","type":"timestamp with time zone","nullable":true,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS updated_at STORED"}],"indexes":[{"name":"galerie_foto_unique_id","def":"CREATE UNIQUE INDEX galerie_foto_unique_id ON public.galerie_foto USING btree (id)","table":"public.galerie_foto","columns":["id"],"comment":""},{"name":"idx_24613_primary","def":"CREATE UNIQUE INDEX idx_24613_primary ON public.galerie_foto USING btree (gf_id)","table":"public.galerie_foto","columns":["gf_id"],"comment":""},{"name":"idx_24613_galerie_foto_gf_kdo_fkey","def":"CREATE INDEX idx_24613_galerie_foto_gf_kdo_fkey ON public.galerie_foto USING btree (gf_kdo)","table":"public.galerie_foto","columns":["gf_kdo"],"comment":""}],"constraints":[{"name":"galerie_foto_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.galerie_foto","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"galerie_foto_gf_id_rodic_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (gf_id_rodic) REFERENCES galerie_dir(gd_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.galerie_foto","referenced_table":"galerie_dir","columns":["gf_id_rodic"],"referenced_columns":["gd_id"],"comment":""},{"name":"idx_24613_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (gf_id)","table":"public.galerie_foto","referenced_table":"","columns":["gf_id"],"referenced_columns":[],"comment":""},{"name":"galerie_foto_gf_kdo_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (gf_kdo) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.galerie_foto","referenced_table":"users","columns":["gf_kdo"],"referenced_columns":["u_id"],"comment":""},{"name":"galerie_foto_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.galerie_foto","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.galerie_foto FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.location","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"name","type":"text","nullable":false,"default":null,"comment":""},{"name":"description","type":"jsonb","nullable":false,"default":null,"comment":""},{"name":"address","type":"address_domain","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"location_pkey","def":"CREATE UNIQUE INDEX location_pkey ON public.location USING btree (id)","table":"public.location","columns":["id"],"comment":""}],"constraints":[{"name":"location_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.location","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"public.location_attachment","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"location_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"object_name","type":"text","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"location_attachment_pkey","def":"CREATE UNIQUE INDEX location_attachment_pkey ON public.location_attachment USING btree (location_id, object_name)","table":"public.location_attachment","columns":["location_id","object_name"],"comment":""},{"name":"object_name","def":"CREATE INDEX object_name ON public.location_attachment USING btree (object_name)","table":"public.location_attachment","columns":["object_name"],"comment":""}],"constraints":[{"name":"location_attachment_object_name_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (object_name) REFERENCES attachment(object_name) ON DELETE CASCADE","table":"public.location_attachment","referenced_table":"attachment","columns":["object_name"],"referenced_columns":["object_name"],"comment":""},{"name":"location_attachment_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (location_id, object_name)","table":"public.location_attachment","referenced_table":"","columns":["location_id","object_name"],"referenced_columns":[],"comment":""},{"name":"location_attachment_location_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (location_id) REFERENCES location(id) ON DELETE CASCADE","table":"public.location_attachment","referenced_table":"location","columns":["location_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.otp_token","type":"BASE TABLE","comment":"@omit","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"access_token","type":"uuid","nullable":false,"default":"gen_random_uuid()","comment":""},{"name":"user_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"expires_at","type":"timestamp with time zone","nullable":false,"default":"(now() + '24:00:00'::interval)","comment":""},{"name":"used_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"otp_token_access_token_key","def":"CREATE UNIQUE INDEX otp_token_access_token_key ON public.otp_token USING btree (access_token)","table":"public.otp_token","columns":["access_token"],"comment":""},{"name":"otp_token_pkey","def":"CREATE UNIQUE INDEX otp_token_pkey ON public.otp_token USING btree (id)","table":"public.otp_token","columns":["id"],"comment":""}],"constraints":[{"name":"otp_token_user_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (user_id) REFERENCES users(u_id) ON DELETE CASCADE","table":"public.otp_token","referenced_table":"users","columns":["user_id"],"referenced_columns":["u_id"],"comment":""},{"name":"otp_token_access_token_key","type":"UNIQUE","def":"UNIQUE (access_token)","table":"public.otp_token","referenced_table":"","columns":["access_token"],"referenced_columns":[],"comment":""},{"name":"otp_token_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.otp_token","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"otp_token_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.otp_token","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.person_invitation","type":"BASE TABLE","comment":"@omit update\n@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"access_token","type":"uuid","nullable":false,"default":"gen_random_uuid()","comment":""},{"name":"person_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"used_at","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"email","type":"citext","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"person_invitation_access_token_key","def":"CREATE UNIQUE INDEX person_invitation_access_token_key ON public.person_invitation USING btree (access_token)","table":"public.person_invitation","columns":["access_token"],"comment":""},{"name":"person_invitation_pkey","def":"CREATE UNIQUE INDEX person_invitation_pkey ON public.person_invitation USING btree (id)","table":"public.person_invitation","columns":["id"],"comment":""}],"constraints":[{"name":"person_invitation_access_token_key","type":"UNIQUE","def":"UNIQUE (access_token)","table":"public.person_invitation","referenced_table":"","columns":["access_token"],"referenced_columns":[],"comment":""},{"name":"person_invitation_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.person_invitation","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"person_invitation_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON DELETE CASCADE","table":"public.person_invitation","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"person_invitation_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.person_invitation","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[{"name":"_500_send","def":"CREATE TRIGGER _500_send AFTER INSERT ON public.person_invitation FOR EACH ROW EXECUTE FUNCTION app_private.tg_person_invitation__send()","comment":""}],"def":""},{"name":"public.pghero_query_stats","type":"BASE TABLE","comment":"@omit","columns":[{"name":"id","type":"bigint","nullable":false,"default":"nextval('pghero_query_stats_id_seq'::regclass)","comment":""},{"name":"database","type":"text","nullable":true,"default":null,"comment":""},{"name":"user","type":"text","nullable":true,"default":null,"comment":""},{"name":"query","type":"text","nullable":true,"default":null,"comment":""},{"name":"query_hash","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"total_time","type":"double precision","nullable":true,"default":null,"comment":""},{"name":"calls","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"captured_at","type":"timestamp without time zone","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"pghero_query_stats_pkey","def":"CREATE UNIQUE INDEX pghero_query_stats_pkey ON public.pghero_query_stats USING btree (id)","table":"public.pghero_query_stats","columns":["id"],"comment":""},{"name":"pghero_query_stats_database_captured_at_idx","def":"CREATE INDEX pghero_query_stats_database_captured_at_idx ON public.pghero_query_stats USING btree (database, captured_at)","table":"public.pghero_query_stats","columns":["captured_at","database"],"comment":""}],"constraints":[{"name":"pghero_query_stats_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.pghero_query_stats","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"public.pghero_space_stats","type":"BASE TABLE","comment":"@omit","columns":[{"name":"id","type":"bigint","nullable":false,"default":"nextval('pghero_space_stats_id_seq'::regclass)","comment":""},{"name":"database","type":"text","nullable":true,"default":null,"comment":""},{"name":"schema","type":"text","nullable":true,"default":null,"comment":""},{"name":"relation","type":"text","nullable":true,"default":null,"comment":""},{"name":"size","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"captured_at","type":"timestamp without time zone","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"pghero_space_stats_pkey","def":"CREATE UNIQUE INDEX pghero_space_stats_pkey ON public.pghero_space_stats USING btree (id)","table":"public.pghero_space_stats","columns":["id"],"comment":""},{"name":"pghero_space_stats_database_captured_at_idx","def":"CREATE INDEX pghero_space_stats_database_captured_at_idx ON public.pghero_space_stats USING btree (database, captured_at)","table":"public.pghero_space_stats","columns":["captured_at","database"],"comment":""}],"constraints":[{"name":"pghero_space_stats_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.pghero_space_stats","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"public.platby_category","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"pc_id","type":"bigint","nullable":false,"default":"nextval('platby_category_pc_id_seq'::regclass)","comment":""},{"name":"pc_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"pc_symbol","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"pc_amount","type":"numeric(10,2)","nullable":false,"default":null,"comment":""},{"name":"pc_date_due","type":"date","nullable":false,"default":null,"comment":""},{"name":"pc_valid_from","type":"date","nullable":false,"default":null,"comment":""},{"name":"pc_valid_to","type":"date","nullable":false,"default":null,"comment":""},{"name":"pc_use_base","type":"boolean","nullable":false,"default":"false","comment":""},{"name":"pc_use_prefix","type":"boolean","nullable":false,"default":"false","comment":""},{"name":"pc_archive","type":"boolean","nullable":false,"default":"false","comment":""},{"name":"pc_visible","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS pc_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"idx_24677_primary","def":"CREATE UNIQUE INDEX idx_24677_primary ON public.platby_category USING btree (pc_id)","table":"public.platby_category","columns":["pc_id"],"comment":""},{"name":"platby_category_unique_id","def":"CREATE UNIQUE INDEX platby_category_unique_id ON public.platby_category USING btree (id)","table":"public.platby_category","columns":["id"],"comment":""},{"name":"idx_24677_pc_symbol","def":"CREATE UNIQUE INDEX idx_24677_pc_symbol ON public.platby_category USING btree (pc_symbol)","table":"public.platby_category","columns":["pc_symbol"],"comment":""}],"constraints":[{"name":"idx_24677_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (pc_id)","table":"public.platby_category","referenced_table":"","columns":["pc_id"],"referenced_columns":[],"comment":""},{"name":"platby_category_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.platby_category","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"platby_category_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.platby_category","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.platby_category_group","type":"BASE TABLE","comment":"@omit","columns":[{"name":"pcg_id","type":"bigint","nullable":false,"default":"nextval('platby_category_group_pcg_id_seq'::regclass)","comment":""},{"name":"pcg_id_group","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"pcg_id_category","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS pcg_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"idx_24690_primary","def":"CREATE UNIQUE INDEX idx_24690_primary ON public.platby_category_group USING btree (pcg_id)","table":"public.platby_category_group","columns":["pcg_id"],"comment":""},{"name":"platby_category_group_unique_id","def":"CREATE UNIQUE INDEX platby_category_group_unique_id ON public.platby_category_group USING btree (id)","table":"public.platby_category_group","columns":["id"],"comment":""},{"name":"idx_24690_pcg_id_group","def":"CREATE UNIQUE INDEX idx_24690_pcg_id_group ON public.platby_category_group USING btree (pcg_id_group, pcg_id_category)","table":"public.platby_category_group","columns":["pcg_id_category","pcg_id_group"],"comment":""}],"constraints":[{"name":"platby_category_group_pcg_id_category_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pcg_id_category) REFERENCES platby_category(pc_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.platby_category_group","referenced_table":"platby_category","columns":["pcg_id_category"],"referenced_columns":["pc_id"],"comment":""},{"name":"idx_24690_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (pcg_id)","table":"public.platby_category_group","referenced_table":"","columns":["pcg_id"],"referenced_columns":[],"comment":""},{"name":"platby_category_group_pcg_id_group_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pcg_id_group) REFERENCES platby_group(pg_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.platby_category_group","referenced_table":"platby_group","columns":["pcg_id_group"],"referenced_columns":["pg_id"],"comment":""},{"name":"platby_category_group_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.platby_category_group","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"platby_category_group_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.platby_category_group","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.platby_group","type":"BASE TABLE","comment":"@omit","columns":[{"name":"pg_id","type":"bigint","nullable":false,"default":"nextval('platby_group_pg_id_seq'::regclass)","comment":""},{"name":"pg_type","type":"numeric","nullable":false,"default":"'1'::numeric","comment":""},{"name":"pg_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"pg_description","type":"text","nullable":false,"default":null,"comment":""},{"name":"pg_base","type":"bigint","nullable":false,"default":"'0'::bigint","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS pg_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"idx_24696_primary","def":"CREATE UNIQUE INDEX idx_24696_primary ON public.platby_group USING btree (pg_id)","table":"public.platby_group","columns":["pg_id"],"comment":""},{"name":"platby_group_unique_id","def":"CREATE UNIQUE INDEX platby_group_unique_id ON public.platby_group USING btree (id)","table":"public.platby_group","columns":["id"],"comment":""}],"constraints":[{"name":"idx_24696_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (pg_id)","table":"public.platby_group","referenced_table":"","columns":["pg_id"],"referenced_columns":[],"comment":""},{"name":"platby_group_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.platby_group","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"platby_group_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.platby_group","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.platby_group_skupina","type":"BASE TABLE","comment":"@omit","columns":[{"name":"pgs_id","type":"bigint","nullable":false,"default":"nextval('platby_group_skupina_pgs_id_seq'::regclass)","comment":""},{"name":"pgs_id_skupina","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"pgs_id_group","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS pgs_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"idx_24707_primary","def":"CREATE UNIQUE INDEX idx_24707_primary ON public.platby_group_skupina USING btree (pgs_id)","table":"public.platby_group_skupina","columns":["pgs_id"],"comment":""},{"name":"platby_group_skupina_unique_id","def":"CREATE UNIQUE INDEX platby_group_skupina_unique_id ON public.platby_group_skupina USING btree (id)","table":"public.platby_group_skupina","columns":["id"],"comment":""},{"name":"idx_24707_pgs_id_skupina","def":"CREATE UNIQUE INDEX idx_24707_pgs_id_skupina ON public.platby_group_skupina USING btree (pgs_id_skupina, pgs_id_group)","table":"public.platby_group_skupina","columns":["pgs_id_group","pgs_id_skupina"],"comment":""}],"constraints":[{"name":"platby_group_skupina_pgs_id_skupina_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pgs_id_skupina) REFERENCES cohort(id)","table":"public.platby_group_skupina","referenced_table":"cohort","columns":["pgs_id_skupina"],"referenced_columns":["id"],"comment":""},{"name":"platby_group_skupina_pgs_id_group_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pgs_id_group) REFERENCES platby_group(pg_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.platby_group_skupina","referenced_table":"platby_group","columns":["pgs_id_group"],"referenced_columns":["pg_id"],"comment":""},{"name":"idx_24707_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (pgs_id)","table":"public.platby_group_skupina","referenced_table":"","columns":["pgs_id"],"referenced_columns":[],"comment":""},{"name":"platby_group_skupina_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.platby_group_skupina","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"platby_group_skupina_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.platby_group_skupina","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.platby_item","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"pi_id","type":"bigint","nullable":false,"default":"nextval('platby_item_pi_id_seq'::regclass)","comment":""},{"name":"pi_id_user","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"pi_id_category","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"pi_id_raw","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"pi_amount","type":"numeric(10,2)","nullable":false,"default":null,"comment":""},{"name":"pi_date","type":"date","nullable":false,"default":null,"comment":""},{"name":"pi_prefix","type":"integer","nullable":false,"default":"2000","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS pi_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""},{"name":"status","type":"payment_status","nullable":false,"default":"'paid'::payment_status","comment":""}],"indexes":[{"name":"idx_24713_primary","def":"CREATE UNIQUE INDEX idx_24713_primary ON public.platby_item USING btree (pi_id)","table":"public.platby_item","columns":["pi_id"],"comment":""},{"name":"platby_item_unique_id","def":"CREATE UNIQUE INDEX platby_item_unique_id ON public.platby_item USING btree (id)","table":"public.platby_item","columns":["id"],"comment":""},{"name":"idx_24713_pi_id_raw","def":"CREATE UNIQUE INDEX idx_24713_pi_id_raw ON public.platby_item USING btree (pi_id_raw)","table":"public.platby_item","columns":["pi_id_raw"],"comment":""},{"name":"idx_24713_platby_item_pi_id_user_fkey","def":"CREATE INDEX idx_24713_platby_item_pi_id_user_fkey ON public.platby_item USING btree (pi_id_user)","table":"public.platby_item","columns":["pi_id_user"],"comment":""}],"constraints":[{"name":"platby_item_pi_id_category_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pi_id_category) REFERENCES platby_category(pc_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.platby_item","referenced_table":"platby_category","columns":["pi_id_category"],"referenced_columns":["pc_id"],"comment":""},{"name":"idx_24713_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (pi_id)","table":"public.platby_item","referenced_table":"","columns":["pi_id"],"referenced_columns":[],"comment":""},{"name":"platby_item_pi_id_raw_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pi_id_raw) REFERENCES platby_raw(pr_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.platby_item","referenced_table":"platby_raw","columns":["pi_id_raw"],"referenced_columns":["pr_id"],"comment":""},{"name":"platby_item_pi_id_user_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (pi_id_user) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","table":"public.platby_item","referenced_table":"users","columns":["pi_id_user"],"referenced_columns":["u_id"],"comment":""},{"name":"platby_item_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.platby_item","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"platby_item_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.platby_item","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.platby_raw","type":"BASE TABLE","comment":"@omit","columns":[{"name":"pr_id","type":"bigint","nullable":false,"default":"nextval('platby_raw_pr_id_seq'::regclass)","comment":""},{"name":"pr_raw","type":"bytea","nullable":false,"default":null,"comment":""},{"name":"pr_hash","type":"text","nullable":false,"default":null,"comment":""},{"name":"pr_sorted","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"pr_discarded","type":"boolean","nullable":false,"default":"true","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS pr_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"idx_24720_primary","def":"CREATE UNIQUE INDEX idx_24720_primary ON public.platby_raw USING btree (pr_id)","table":"public.platby_raw","columns":["pr_id"],"comment":""},{"name":"platby_raw_unique_id","def":"CREATE UNIQUE INDEX platby_raw_unique_id ON public.platby_raw USING btree (id)","table":"public.platby_raw","columns":["id"],"comment":""},{"name":"idx_24720_pr_hash","def":"CREATE UNIQUE INDEX idx_24720_pr_hash ON public.platby_raw USING btree (pr_hash)","table":"public.platby_raw","columns":["pr_hash"],"comment":""}],"constraints":[{"name":"idx_24720_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (pr_id)","table":"public.platby_raw","referenced_table":"","columns":["pr_id"],"referenced_columns":[],"comment":""},{"name":"platby_raw_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.platby_raw","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"platby_raw_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.platby_raw","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.room","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"name","type":"text","nullable":false,"default":null,"comment":""},{"name":"description","type":"jsonb","nullable":false,"default":null,"comment":""},{"name":"location","type":"bigint","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"room_pkey","def":"CREATE UNIQUE INDEX room_pkey ON public.room USING btree (id)","table":"public.room","columns":["id"],"comment":""}],"constraints":[{"name":"room_location_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (location) REFERENCES location(id) ON DELETE CASCADE","table":"public.room","referenced_table":"location","columns":["location"],"referenced_columns":["id"],"comment":""},{"name":"room_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.room","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"public.room_attachment","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"room_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"object_name","type":"text","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"room_attachment_pkey","def":"CREATE UNIQUE INDEX room_attachment_pkey ON public.room_attachment USING btree (room_id, object_name)","table":"public.room_attachment","columns":["object_name","room_id"],"comment":""},{"name":"room_attachment_object_name_idx","def":"CREATE INDEX room_attachment_object_name_idx ON public.room_attachment USING btree (object_name)","table":"public.room_attachment","columns":["object_name"],"comment":""}],"constraints":[{"name":"room_attachment_object_name_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (object_name) REFERENCES attachment(object_name) ON DELETE CASCADE","table":"public.room_attachment","referenced_table":"attachment","columns":["object_name"],"referenced_columns":["object_name"],"comment":""},{"name":"room_attachment_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (room_id, object_name)","table":"public.room_attachment","referenced_table":"","columns":["room_id","object_name"],"referenced_columns":[],"comment":""},{"name":"room_attachment_room_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (room_id) REFERENCES room(id) ON DELETE CASCADE","table":"public.room_attachment","referenced_table":"room","columns":["room_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.scoreboard","type":"VIEW","comment":"@foreignKey (person_id) references person (id)\n@simpleCollections only","columns":[{"name":"person_id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"lesson_total_score","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"group_total_score","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"event_total_score","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"total_score","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"ranking","type":"bigint","nullable":true,"default":null,"comment":""}],"indexes":[],"constraints":[],"triggers":[],"def":"CREATE VIEW scoreboard AS (\n WITH members AS (\n         SELECT person.id\n           FROM (person\n             JOIN cohort_membership ON ((cohort_membership.person_id = person.id)))\n          WHERE (cohort_membership.active AND (cohort_membership.tenant_id = current_tenant_id()))\n        ), attendances AS (\n         SELECT event_attendance.person_id,\n                CASE\n                    WHEN (event.type = 'lesson'::event_type) THEN 1\n                    ELSE 0\n                END AS lesson_score,\n                CASE\n                    WHEN (event.type = 'group'::event_type) THEN floor(((EXTRACT(epoch FROM (i.until - i.since)) / (60)::numeric) / (45)::numeric))\n                    ELSE (0)::numeric\n                END AS group_score,\n                CASE\n                    WHEN (event.type = 'camp'::event_type) THEN (3 + (2 * ((EXTRACT(epoch FROM (i.until - i.since)) \u003e (86400)::numeric))::integer))\n                    ELSE 0\n                END AS event_score,\n            i.since\n           FROM (((event_attendance\n             JOIN event_registration ON ((event_registration.id = event_attendance.registration_id)))\n             JOIN event ON ((event.id = event_registration.event_id)))\n             JOIN event_instance i ON ((event_attendance.instance_id = i.id)))\n          WHERE (((event_attendance.status = 'attended'::attendance_type) OR (event.type = 'lesson'::event_type)) AND (event.type \u003c\u003e 'reservation'::event_type) AND (NOT i.is_cancelled) AND (i.since \u003e '2023-09-01 00:00:00+00'::timestamp with time zone) AND (i.until \u003c date_trunc('day'::text, now())) AND (event_attendance.person_id IN ( SELECT members.id\n                   FROM members)))\n        ), per_day AS (\n         SELECT attendances.person_id,\n            LEAST(sum(attendances.lesson_score), (4)::bigint) AS lesson_score,\n            sum(attendances.group_score) AS group_score,\n            sum(attendances.event_score) AS event_score,\n            (((LEAST(sum(attendances.lesson_score), (4)::bigint))::numeric + sum(attendances.group_score)) + (sum(attendances.event_score))::numeric) AS total_score,\n            attendances.since\n           FROM attendances\n          GROUP BY attendances.person_id, attendances.since\n        )\n SELECT per_day.person_id,\n    (sum(per_day.lesson_score))::bigint AS lesson_total_score,\n    (sum(per_day.group_score))::bigint AS group_total_score,\n    (sum(per_day.event_score))::bigint AS event_total_score,\n    (sum((((per_day.lesson_score)::numeric + per_day.group_score) + (per_day.event_score)::numeric)))::bigint AS total_score,\n    rank() OVER (ORDER BY (sum(((per_day.lesson_score)::numeric + per_day.group_score))) DESC) AS ranking\n   FROM per_day\n  GROUP BY per_day.person_id\n  ORDER BY ((sum((((per_day.lesson_score)::numeric + per_day.group_score) + (per_day.event_score)::numeric)))::bigint) DESC\n)","referenced_tables":["public.person","public.cohort_membership","i.until","public.event_attendance","public.event_registration","public.event","public.event_instance","attendances","per_day"]},{"name":"public.tenant_attachment","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"tenant_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"object_name","type":"text","nullable":false,"default":null,"comment":""},{"name":"type","type":"tenant_attachment_type","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"tenant_attachment_pkey","def":"CREATE UNIQUE INDEX tenant_attachment_pkey ON public.tenant_attachment USING btree (tenant_id, object_name)","table":"public.tenant_attachment","columns":["object_name","tenant_id"],"comment":""},{"name":"tenant_attachment_object_name_idx","def":"CREATE INDEX tenant_attachment_object_name_idx ON public.tenant_attachment USING btree (object_name)","table":"public.tenant_attachment","columns":["object_name"],"comment":""}],"constraints":[{"name":"tenant_attachment_object_name_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (object_name) REFERENCES attachment(object_name) ON DELETE CASCADE","table":"public.tenant_attachment","referenced_table":"attachment","columns":["object_name"],"referenced_columns":["object_name"],"comment":""},{"name":"tenant_attachment_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (tenant_id, object_name)","table":"public.tenant_attachment","referenced_table":"","columns":["tenant_id","object_name"],"referenced_columns":[],"comment":""},{"name":"tenant_attachment_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.tenant_attachment","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.tenant_location","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"name","type":"text","nullable":false,"default":null,"comment":""},{"name":"description","type":"text","nullable":false,"default":"''::text","comment":""},{"name":"address","type":"address_domain","nullable":true,"default":null,"comment":""},{"name":"is_public","type":"boolean","nullable":true,"default":"true","comment":""},{"name":"tenant_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""}],"indexes":[{"name":"tenant_location_pkey","def":"CREATE UNIQUE INDEX tenant_location_pkey ON public.tenant_location USING btree (id)","table":"public.tenant_location","columns":["id"],"comment":""}],"constraints":[{"name":"tenant_location_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.tenant_location","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""},{"name":"tenant_location_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id)","table":"public.tenant_location","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""}],"triggers":[],"def":""},{"name":"public.upozorneni_skupiny","type":"BASE TABLE","comment":"@omit create,update,delete","columns":[{"name":"ups_id","type":"bigint","nullable":false,"default":"nextval('upozorneni_skupiny_ups_id_seq'::regclass)","comment":""},{"name":"ups_id_rodic","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"ups_id_skupina","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"ups_color","type":"text","nullable":false,"default":null,"comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS ups_id STORED"},{"name":"tenant_id","type":"bigint","nullable":false,"default":"current_tenant_id()","comment":""}],"indexes":[{"name":"idx_24777_primary","def":"CREATE UNIQUE INDEX idx_24777_primary ON public.upozorneni_skupiny USING btree (ups_id)","table":"public.upozorneni_skupiny","columns":["ups_id"],"comment":""},{"name":"upozorneni_skupiny_unique_id","def":"CREATE UNIQUE INDEX upozorneni_skupiny_unique_id ON public.upozorneni_skupiny USING btree (id)","table":"public.upozorneni_skupiny","columns":["id"],"comment":""},{"name":"idx_24777_upozorneni_skupiny_ups_id_rodic_fkey","def":"CREATE INDEX idx_24777_upozorneni_skupiny_ups_id_rodic_fkey ON public.upozorneni_skupiny USING btree (ups_id_rodic)","table":"public.upozorneni_skupiny","columns":["ups_id_rodic"],"comment":""},{"name":"idx_ups_tenant","def":"CREATE INDEX idx_ups_tenant ON public.upozorneni_skupiny USING btree (tenant_id)","table":"public.upozorneni_skupiny","columns":["tenant_id"],"comment":""}],"constraints":[{"name":"upozorneni_skupiny_ups_id_skupina_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (ups_id_skupina) REFERENCES cohort(id)","table":"public.upozorneni_skupiny","referenced_table":"cohort","columns":["ups_id_skupina"],"referenced_columns":["id"],"comment":""},{"name":"upozorneni_skupiny_ups_id_rodic_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (ups_id_rodic) REFERENCES upozorneni(up_id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.upozorneni_skupiny","referenced_table":"upozorneni","columns":["ups_id_rodic"],"referenced_columns":["up_id"],"comment":""},{"name":"idx_24777_primary","type":"PRIMARY KEY","def":"PRIMARY KEY (ups_id)","table":"public.upozorneni_skupiny","referenced_table":"","columns":["ups_id"],"referenced_columns":[],"comment":""},{"name":"upozorneni_skupiny_tenant_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","table":"public.upozorneni_skupiny","referenced_table":"tenant","columns":["tenant_id"],"referenced_columns":["id"],"comment":""},{"name":"upozorneni_skupiny_unique_id","type":"UNIQUE","def":"UNIQUE (id)","table":"public.upozorneni_skupiny","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[],"def":""},{"name":"public.user_proxy","type":"BASE TABLE","comment":"@simpleCollections only","columns":[{"name":"user_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"person_id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"created_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"updated_at","type":"timestamp with time zone","nullable":false,"default":"now()","comment":""},{"name":"id","type":"bigint","nullable":false,"default":null,"comment":""},{"name":"since","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"until","type":"timestamp with time zone","nullable":true,"default":null,"comment":""},{"name":"active_range","type":"tstzrange","nullable":false,"default":null,"comment":"@omit","extra_def":"GENERATED ALWAYS AS tstzrange(since, until, '[]'::text) STORED"},{"name":"status","type":"relationship_status","nullable":false,"default":"'active'::relationship_status","comment":""},{"name":"active","type":"boolean","nullable":false,"default":null,"comment":"","extra_def":"GENERATED ALWAYS AS (status = 'active'::relationship_status) STORED"}],"indexes":[{"name":"user_proxy_pkey","def":"CREATE UNIQUE INDEX user_proxy_pkey ON public.user_proxy USING btree (id)","table":"public.user_proxy","columns":["id"],"comment":""},{"name":"user_proxy_person_id_idx","def":"CREATE INDEX user_proxy_person_id_idx ON public.user_proxy USING btree (person_id)","table":"public.user_proxy","columns":["person_id"],"comment":""},{"name":"user_proxy_range_idx","def":"CREATE INDEX user_proxy_range_idx ON public.user_proxy USING gist (active_range, person_id, user_id)","table":"public.user_proxy","columns":["active_range","person_id","user_id"],"comment":""},{"name":"user_proxy_user_id_idx","def":"CREATE INDEX user_proxy_user_id_idx ON public.user_proxy USING btree (user_id)","table":"public.user_proxy","columns":["user_id"],"comment":""}],"constraints":[{"name":"user_proxy_user_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (user_id) REFERENCES users(u_id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.user_proxy","referenced_table":"users","columns":["user_id"],"referenced_columns":["u_id"],"comment":""},{"name":"user_proxy_person_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.user_proxy","referenced_table":"person","columns":["person_id"],"referenced_columns":["id"],"comment":""},{"name":"user_proxy_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.user_proxy","referenced_table":"","columns":["id"],"referenced_columns":[],"comment":""}],"triggers":[{"name":"_100_timestamps","def":"CREATE TRIGGER _100_timestamps BEFORE INSERT OR UPDATE ON public.user_proxy FOR EACH ROW EXECUTE FUNCTION app_private.tg__timestamps()","comment":""}],"def":""},{"name":"public.account_balances","type":"MATERIALIZED VIEW","comment":"@omit","columns":[{"name":"id","type":"bigint","nullable":true,"default":null,"comment":""},{"name":"balance","type":"numeric","nullable":true,"default":null,"comment":""}],"indexes":[{"name":"account_balances_id_idx","def":"CREATE UNIQUE INDEX account_balances_id_idx ON public.account_balances USING btree (id)","table":"public.account_balances","columns":["id"],"comment":""}],"constraints":[],"triggers":[],"def":"CREATE MATERIALIZED VIEW account_balances AS (\n SELECT account.id,\n    (COALESCE(account.opening_balance, 0.0) + COALESCE(sum(posting.amount), 0.0)) AS balance\n   FROM (account\n     LEFT JOIN posting ON ((account.id = posting.account_id)))\n  GROUP BY account.id\n)","referenced_tables":["public.account","public.posting"]},{"name":"public.http_cache","type":"BASE TABLE","comment":"@omit","columns":[{"name":"url","type":"text","nullable":false,"default":null,"comment":""},{"name":"response","type":"json","nullable":false,"default":null,"comment":""},{"name":"expires_at","type":"timestamp with time zone","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"http_cache_pkey","def":"CREATE UNIQUE INDEX http_cache_pkey ON public.http_cache USING btree (url)","table":"public.http_cache","columns":["url"],"comment":""}],"constraints":[{"name":"http_cache_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (url)","table":"public.http_cache","referenced_table":"","columns":["url"],"referenced_columns":[],"comment":""}],"triggers":[{"name":"_500_prune_expired","def":"CREATE TRIGGER _500_prune_expired AFTER INSERT OR UPDATE ON public.http_cache FOR EACH STATEMENT EXECUTE FUNCTION app_private.tg_http_cache__prune_expired()","comment":""}],"def":""}],"relations":[{"table":"public.event_lesson_demand","columns":["registration_id"],"cardinality":"Zero or more","parent_table":"public.event_registration","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (registration_id) REFERENCES event_registration(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_lesson_demand","columns":["trainer_id"],"cardinality":"Zero or more","parent_table":"public.event_trainer","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (trainer_id) REFERENCES event_trainer(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_lesson_demand","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_instance","columns":["event_id"],"cardinality":"Zero or more","parent_table":"public.event","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (event_id) REFERENCES event(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_instance","columns":["location_id"],"cardinality":"Zero or more","parent_table":"public.tenant_location","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (location_id) REFERENCES tenant_location(id)","virtual":false},{"table":"public.event_instance","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_registration","columns":["couple_id"],"cardinality":"Zero or more","parent_table":"public.couple","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (couple_id) REFERENCES couple(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_registration","columns":["target_cohort_id"],"cardinality":"Zero or more","parent_table":"public.event_target_cohort","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (target_cohort_id) REFERENCES event_target_cohort(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_registration","columns":["event_id"],"cardinality":"Zero or more","parent_table":"public.event","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (event_id) REFERENCES event(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_registration","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_registration","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.payment","columns":["accounting_period_id"],"cardinality":"Zero or more","parent_table":"public.accounting_period","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (accounting_period_id) REFERENCES accounting_period(id)","virtual":false},{"table":"public.payment","columns":["cohort_subscription_id"],"cardinality":"Zero or more","parent_table":"public.cohort_subscription","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (cohort_subscription_id) REFERENCES cohort_subscription(id) ON UPDATE CASCADE ON DELETE SET NULL","virtual":false},{"table":"public.payment","columns":["event_instance_id"],"cardinality":"Zero or more","parent_table":"public.event_instance","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (event_instance_id) REFERENCES event_instance(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.payment","columns":["event_registration_id"],"cardinality":"Zero or more","parent_table":"public.event_registration","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (event_registration_id) REFERENCES event_registration(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.payment","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.transaction","columns":["accounting_period_id"],"cardinality":"Zero or more","parent_table":"public.accounting_period","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (accounting_period_id) REFERENCES accounting_period(id)","virtual":false},{"table":"public.transaction","columns":["payment_id"],"cardinality":"Zero or more","parent_table":"public.payment","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (payment_id) REFERENCES payment(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.transaction","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.users","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.account","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.account","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.posting","columns":["account_id"],"cardinality":"Zero or more","parent_table":"public.account","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (account_id) REFERENCES account(id)","virtual":false},{"table":"public.posting","columns":["original_account_id"],"cardinality":"Zero or more","parent_table":"public.account","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (original_account_id) REFERENCES account(id)","virtual":false},{"table":"public.posting","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.posting","columns":["transaction_id"],"cardinality":"Zero or more","parent_table":"public.transaction","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (transaction_id) REFERENCES transaction(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.upozorneni","columns":["up_kdo"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (up_kdo) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.upozorneni","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.attachment","columns":["uploaded_by"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (uploaded_by) REFERENCES users(u_id) ON DELETE SET NULL","virtual":false},{"table":"public.couple","columns":["man_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (man_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.couple","columns":["woman_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (woman_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event","columns":["payment_recipient_id"],"cardinality":"Zero or more","parent_table":"public.account","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (payment_recipient_id) REFERENCES account(id)","virtual":false},{"table":"public.event","columns":["location_id"],"cardinality":"Zero or more","parent_table":"public.tenant_location","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (location_id) REFERENCES tenant_location(id)","virtual":false},{"table":"public.event","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.event_target_cohort","columns":["cohort_id"],"cardinality":"Zero or more","parent_table":"public.cohort","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (cohort_id) REFERENCES cohort(id)","virtual":false},{"table":"public.event_target_cohort","columns":["event_id"],"cardinality":"Zero or more","parent_table":"public.event","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (event_id) REFERENCES event(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_target_cohort","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_trainer","columns":["event_id"],"cardinality":"Zero or more","parent_table":"public.event","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (event_id) REFERENCES event(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_trainer","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_trainer","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.cohort_subscription","columns":["account_id"],"cardinality":"Zero or more","parent_table":"public.account","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (account_id) REFERENCES account(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.cohort_subscription","columns":["cohort_id"],"cardinality":"Zero or more","parent_table":"public.cohort","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (cohort_id) REFERENCES cohort(id)","virtual":false},{"table":"public.cohort_subscription","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_instance_trainer","columns":["instance_id"],"cardinality":"Zero or more","parent_table":"public.event_instance","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (instance_id) REFERENCES event_instance(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_instance_trainer","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_instance_trainer","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.payment_debtor","columns":["payment_id"],"cardinality":"Zero or more","parent_table":"public.payment","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (payment_id) REFERENCES payment(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.payment_debtor","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.payment_debtor","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.payment_recipient","columns":["account_id"],"cardinality":"Zero or more","parent_table":"public.account","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (account_id) REFERENCES account(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.payment_recipient","columns":["payment_id"],"cardinality":"Zero or more","parent_table":"public.payment","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (payment_id) REFERENCES payment(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.payment_recipient","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_attendance","columns":["instance_id"],"cardinality":"Zero or more","parent_table":"public.event_instance","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (instance_id) REFERENCES event_instance(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_attendance","columns":["registration_id"],"cardinality":"Zero or more","parent_table":"public.event_registration","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (registration_id) REFERENCES event_registration(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_attendance","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.event_attendance","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.membership_application","columns":["created_by"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (created_by) REFERENCES users(u_id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.membership_application","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.tenant_membership","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.tenant_membership","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"app_private.crm_activity","columns":["prospect"],"cardinality":"Zero or more","parent_table":"app_private.crm_prospect","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (prospect) REFERENCES app_private.crm_prospect(id) ON DELETE CASCADE","virtual":false},{"table":"app_private.pary_navrh","columns":["pn_navrhl"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (pn_navrhl) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"app_private.pary_navrh","columns":["pn_partner"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (pn_partner) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"app_private.pary_navrh","columns":["pn_partnerka"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (pn_partnerka) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"app_private.skupiny","columns":["cohort_group"],"cardinality":"Zero or more","parent_table":"public.cohort_group","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (cohort_group) REFERENCES cohort_group(id) ON DELETE SET NULL","virtual":false},{"table":"app_private.skupiny","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"graphile_migrate.migrations","columns":["previous_hash"],"cardinality":"Zero or more","parent_table":"graphile_migrate.migrations","parent_columns":["hash"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (previous_hash) REFERENCES graphile_migrate.migrations(hash)","virtual":false},{"table":"public.accounting_period","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.aktuality","columns":["at_foto_main"],"cardinality":"Zero or more","parent_table":"public.galerie_foto","parent_columns":["gf_id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (at_foto_main) REFERENCES galerie_foto(gf_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.aktuality","columns":["at_kdo"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (at_kdo) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.aktuality","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.tenant_administrator","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.tenant_administrator","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.tenant_trainer","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.tenant_trainer","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.cohort_membership","columns":["cohort_id"],"cardinality":"Zero or more","parent_table":"public.cohort","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (cohort_id) REFERENCES cohort(id)","virtual":false},{"table":"public.cohort_membership","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.cohort_membership","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.cohort","columns":["cohort_group_id"],"cardinality":"Zero or more","parent_table":"public.cohort_group","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (cohort_group_id) REFERENCES cohort_group(id) ON DELETE SET NULL","virtual":false},{"table":"public.cohort","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.cohort_group","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.dokumenty","columns":["d_kdo"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (d_kdo) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.dokumenty","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.form_responses","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.galerie_dir","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.galerie_foto","columns":["gf_id_rodic"],"cardinality":"Zero or more","parent_table":"public.galerie_dir","parent_columns":["gd_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (gf_id_rodic) REFERENCES galerie_dir(gd_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.galerie_foto","columns":["gf_kdo"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (gf_kdo) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.galerie_foto","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.location_attachment","columns":["object_name"],"cardinality":"Zero or more","parent_table":"public.attachment","parent_columns":["object_name"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (object_name) REFERENCES attachment(object_name) ON DELETE CASCADE","virtual":false},{"table":"public.location_attachment","columns":["location_id"],"cardinality":"Zero or more","parent_table":"public.location","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (location_id) REFERENCES location(id) ON DELETE CASCADE","virtual":false},{"table":"public.otp_token","columns":["user_id"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (user_id) REFERENCES users(u_id) ON DELETE CASCADE","virtual":false},{"table":"public.otp_token","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.person_invitation","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON DELETE CASCADE","virtual":false},{"table":"public.person_invitation","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.platby_category","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.platby_category_group","columns":["pcg_id_category"],"cardinality":"Zero or more","parent_table":"public.platby_category","parent_columns":["pc_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (pcg_id_category) REFERENCES platby_category(pc_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.platby_category_group","columns":["pcg_id_group"],"cardinality":"Zero or more","parent_table":"public.platby_group","parent_columns":["pg_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (pcg_id_group) REFERENCES platby_group(pg_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.platby_category_group","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.platby_group","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.platby_group_skupina","columns":["pgs_id_skupina"],"cardinality":"Zero or more","parent_table":"public.cohort","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (pgs_id_skupina) REFERENCES cohort(id)","virtual":false},{"table":"public.platby_group_skupina","columns":["pgs_id_group"],"cardinality":"Zero or more","parent_table":"public.platby_group","parent_columns":["pg_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (pgs_id_group) REFERENCES platby_group(pg_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.platby_group_skupina","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.platby_item","columns":["pi_id_category"],"cardinality":"Zero or more","parent_table":"public.platby_category","parent_columns":["pc_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (pi_id_category) REFERENCES platby_category(pc_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.platby_item","columns":["pi_id_raw"],"cardinality":"Zero or more","parent_table":"public.platby_raw","parent_columns":["pr_id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (pi_id_raw) REFERENCES platby_raw(pr_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.platby_item","columns":["pi_id_user"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (pi_id_user) REFERENCES users(u_id) ON UPDATE RESTRICT ON DELETE RESTRICT","virtual":false},{"table":"public.platby_item","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.platby_raw","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.room","columns":["location"],"cardinality":"Zero or more","parent_table":"public.location","parent_columns":["id"],"parent_cardinality":"Zero or one","def":"FOREIGN KEY (location) REFERENCES location(id) ON DELETE CASCADE","virtual":false},{"table":"public.room_attachment","columns":["object_name"],"cardinality":"Zero or more","parent_table":"public.attachment","parent_columns":["object_name"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (object_name) REFERENCES attachment(object_name) ON DELETE CASCADE","virtual":false},{"table":"public.room_attachment","columns":["room_id"],"cardinality":"Zero or more","parent_table":"public.room","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (room_id) REFERENCES room(id) ON DELETE CASCADE","virtual":false},{"table":"public.tenant_attachment","columns":["object_name"],"cardinality":"Zero or more","parent_table":"public.attachment","parent_columns":["object_name"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (object_name) REFERENCES attachment(object_name) ON DELETE CASCADE","virtual":false},{"table":"public.tenant_attachment","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.tenant_location","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id)","virtual":false},{"table":"public.upozorneni_skupiny","columns":["ups_id_skupina"],"cardinality":"Zero or more","parent_table":"public.cohort","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (ups_id_skupina) REFERENCES cohort(id)","virtual":false},{"table":"public.upozorneni_skupiny","columns":["ups_id_rodic"],"cardinality":"Zero or more","parent_table":"public.upozorneni","parent_columns":["up_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (ups_id_rodic) REFERENCES upozorneni(up_id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.upozorneni_skupiny","columns":["tenant_id"],"cardinality":"Zero or more","parent_table":"public.tenant","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (tenant_id) REFERENCES tenant(id) ON DELETE CASCADE","virtual":false},{"table":"public.user_proxy","columns":["user_id"],"cardinality":"Zero or more","parent_table":"public.users","parent_columns":["u_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (user_id) REFERENCES users(u_id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false},{"table":"public.user_proxy","columns":["person_id"],"cardinality":"Zero or more","parent_table":"public.person","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (person_id) REFERENCES person(id) ON UPDATE CASCADE ON DELETE CASCADE","virtual":false}],"functions":[{"name":"postgraphile_watch.notify_watchers_ddl","return_type":"event_trigger","arguments":"","type":"FUNCTION"},{"name":"postgraphile_watch.notify_watchers_drop","return_type":"event_trigger","arguments":"","type":"FUNCTION"},{"name":"public.create_credit_transaction_for_person","return_type":"transaction","arguments":"v_person_id bigint, v_description text, v_amount numeric, v_currency text, v_date timestamp with time zone DEFAULT now()","type":"FUNCTION"},{"name":"public.event_trainer_name","return_type":"text","arguments":"t event_trainer","type":"FUNCTION"},{"name":"cron.schedule","return_type":"int8","arguments":"schedule text, command text","type":"FUNCTION"},{"name":"cron.unschedule","return_type":"bool","arguments":"job_id bigint","type":"FUNCTION"},{"name":"cron.job_cache_invalidate","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"cron.schedule","return_type":"int8","arguments":"job_name text, schedule text, command text","type":"FUNCTION"},{"name":"cron.alter_job","return_type":"void","arguments":"job_id bigint, schedule text DEFAULT NULL::text, command text DEFAULT NULL::text, database text DEFAULT NULL::text, username text DEFAULT NULL::text, active boolean DEFAULT NULL::boolean","type":"FUNCTION"},{"name":"cron.schedule_in_database","return_type":"int8","arguments":"job_name text, schedule text, command text, database text, username text DEFAULT NULL::text, active boolean DEFAULT true","type":"FUNCTION"},{"name":"cron.unschedule","return_type":"bool","arguments":"job_name text","type":"FUNCTION"},{"name":"public.gbt_enum_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_enum_union","return_type":"gbtreekey8","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_enum_same","return_type":"internal","arguments":"gbtreekey8, gbtreekey8, internal","type":"FUNCTION"},{"name":"public.gbtreekey4_in","return_type":"gbtreekey4","arguments":"cstring","type":"FUNCTION"},{"name":"public.gbtreekey4_out","return_type":"cstring","arguments":"gbtreekey4","type":"FUNCTION"},{"name":"public.gbtreekey8_in","return_type":"gbtreekey8","arguments":"cstring","type":"FUNCTION"},{"name":"public.gbtreekey8_out","return_type":"cstring","arguments":"gbtreekey8","type":"FUNCTION"},{"name":"public.gbtreekey16_in","return_type":"gbtreekey16","arguments":"cstring","type":"FUNCTION"},{"name":"public.gbtreekey16_out","return_type":"cstring","arguments":"gbtreekey16","type":"FUNCTION"},{"name":"public.gbtreekey32_in","return_type":"gbtreekey32","arguments":"cstring","type":"FUNCTION"},{"name":"public.gbtreekey32_out","return_type":"cstring","arguments":"gbtreekey32","type":"FUNCTION"},{"name":"public.gbtreekey_var_in","return_type":"gbtreekey_var","arguments":"cstring","type":"FUNCTION"},{"name":"public.gbtreekey_var_out","return_type":"cstring","arguments":"gbtreekey_var","type":"FUNCTION"},{"name":"public.cash_dist","return_type":"money","arguments":"money, money","type":"FUNCTION"},{"name":"public.date_dist","return_type":"int4","arguments":"date, date","type":"FUNCTION"},{"name":"public.float4_dist","return_type":"float4","arguments":"real, real","type":"FUNCTION"},{"name":"app_private.tg_http_cache__prune_expired","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"public.float8_dist","return_type":"float8","arguments":"double precision, double precision","type":"FUNCTION"},{"name":"public.int2_dist","return_type":"int2","arguments":"smallint, smallint","type":"FUNCTION"},{"name":"public.int4_dist","return_type":"int4","arguments":"integer, integer","type":"FUNCTION"},{"name":"public.int8_dist","return_type":"int8","arguments":"bigint, bigint","type":"FUNCTION"},{"name":"public.interval_dist","return_type":"interval","arguments":"interval, interval","type":"FUNCTION"},{"name":"public.oid_dist","return_type":"oid","arguments":"oid, oid","type":"FUNCTION"},{"name":"public.time_dist","return_type":"interval","arguments":"time without time zone, time without time zone","type":"FUNCTION"},{"name":"public.ts_dist","return_type":"interval","arguments":"timestamp without time zone, timestamp without time zone","type":"FUNCTION"},{"name":"public.tstz_dist","return_type":"interval","arguments":"timestamp with time zone, timestamp with time zone","type":"FUNCTION"},{"name":"public.gbt_oid_consistent","return_type":"bool","arguments":"internal, oid, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_oid_distance","return_type":"float8","arguments":"internal, oid, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_oid_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_oid_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_decompress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_var_decompress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_var_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_oid_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_oid_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_oid_union","return_type":"gbtreekey8","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_oid_same","return_type":"internal","arguments":"gbtreekey8, gbtreekey8, internal","type":"FUNCTION"},{"name":"public.gbt_int2_consistent","return_type":"bool","arguments":"internal, smallint, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_int2_distance","return_type":"float8","arguments":"internal, smallint, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_int2_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_int2_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_int2_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_int2_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_int2_union","return_type":"gbtreekey4","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_int2_same","return_type":"internal","arguments":"gbtreekey4, gbtreekey4, internal","type":"FUNCTION"},{"name":"public.gbt_int4_consistent","return_type":"bool","arguments":"internal, integer, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_int4_distance","return_type":"float8","arguments":"internal, integer, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_int4_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_int4_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_int4_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_int4_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_int4_union","return_type":"gbtreekey8","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_int4_same","return_type":"internal","arguments":"gbtreekey8, gbtreekey8, internal","type":"FUNCTION"},{"name":"public.gbt_int8_consistent","return_type":"bool","arguments":"internal, bigint, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_int8_distance","return_type":"float8","arguments":"internal, bigint, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_int8_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_int8_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_int8_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_int8_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_int8_union","return_type":"gbtreekey16","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_int8_same","return_type":"internal","arguments":"gbtreekey16, gbtreekey16, internal","type":"FUNCTION"},{"name":"public.gbt_float4_consistent","return_type":"bool","arguments":"internal, real, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_float4_distance","return_type":"float8","arguments":"internal, real, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_float4_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_float4_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_float4_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_float4_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_float4_union","return_type":"gbtreekey8","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_float4_same","return_type":"internal","arguments":"gbtreekey8, gbtreekey8, internal","type":"FUNCTION"},{"name":"public.gbt_float8_consistent","return_type":"bool","arguments":"internal, double precision, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_float8_distance","return_type":"float8","arguments":"internal, double precision, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_float8_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_float8_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_float8_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_float8_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_float8_union","return_type":"gbtreekey16","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_float8_same","return_type":"internal","arguments":"gbtreekey16, gbtreekey16, internal","type":"FUNCTION"},{"name":"public.gbt_ts_consistent","return_type":"bool","arguments":"internal, timestamp without time zone, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_ts_distance","return_type":"float8","arguments":"internal, timestamp without time zone, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_tstz_consistent","return_type":"bool","arguments":"internal, timestamp with time zone, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_tstz_distance","return_type":"float8","arguments":"internal, timestamp with time zone, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_ts_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_tstz_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_ts_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_ts_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_ts_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_ts_union","return_type":"gbtreekey16","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_ts_same","return_type":"internal","arguments":"gbtreekey16, gbtreekey16, internal","type":"FUNCTION"},{"name":"public.gbt_time_consistent","return_type":"bool","arguments":"internal, time without time zone, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_time_distance","return_type":"float8","arguments":"internal, time without time zone, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_timetz_consistent","return_type":"bool","arguments":"internal, time with time zone, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_time_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_timetz_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_time_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_time_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_time_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_time_union","return_type":"gbtreekey16","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_time_same","return_type":"internal","arguments":"gbtreekey16, gbtreekey16, internal","type":"FUNCTION"},{"name":"public.gbt_date_consistent","return_type":"bool","arguments":"internal, date, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_date_distance","return_type":"float8","arguments":"internal, date, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_date_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_date_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_date_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_date_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_date_union","return_type":"gbtreekey8","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_date_same","return_type":"internal","arguments":"gbtreekey8, gbtreekey8, internal","type":"FUNCTION"},{"name":"public.gbt_intv_consistent","return_type":"bool","arguments":"internal, interval, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_intv_distance","return_type":"float8","arguments":"internal, interval, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_intv_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_intv_decompress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_intv_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_intv_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_intv_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_intv_union","return_type":"gbtreekey32","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_intv_same","return_type":"internal","arguments":"gbtreekey32, gbtreekey32, internal","type":"FUNCTION"},{"name":"public.gbt_cash_consistent","return_type":"bool","arguments":"internal, money, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_cash_distance","return_type":"float8","arguments":"internal, money, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_cash_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_cash_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_cash_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_cash_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_cash_union","return_type":"gbtreekey16","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_cash_same","return_type":"internal","arguments":"gbtreekey16, gbtreekey16, internal","type":"FUNCTION"},{"name":"public.gbt_macad_consistent","return_type":"bool","arguments":"internal, macaddr, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_macad_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_macad_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_macad_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_macad_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_macad_union","return_type":"gbtreekey16","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_macad_same","return_type":"internal","arguments":"gbtreekey16, gbtreekey16, internal","type":"FUNCTION"},{"name":"public.gbt_text_consistent","return_type":"bool","arguments":"internal, text, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_bpchar_consistent","return_type":"bool","arguments":"internal, character, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_text_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_bpchar_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_text_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_text_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_text_union","return_type":"gbtreekey_var","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_text_same","return_type":"internal","arguments":"gbtreekey_var, gbtreekey_var, internal","type":"FUNCTION"},{"name":"public.gbt_bytea_consistent","return_type":"bool","arguments":"internal, bytea, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_bytea_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_bytea_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_bytea_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_bytea_union","return_type":"gbtreekey_var","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_bytea_same","return_type":"internal","arguments":"gbtreekey_var, gbtreekey_var, internal","type":"FUNCTION"},{"name":"public.gbt_numeric_consistent","return_type":"bool","arguments":"internal, numeric, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_numeric_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_numeric_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_numeric_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_numeric_union","return_type":"gbtreekey_var","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_numeric_same","return_type":"internal","arguments":"gbtreekey_var, gbtreekey_var, internal","type":"FUNCTION"},{"name":"public.gbt_bit_consistent","return_type":"bool","arguments":"internal, bit, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_bit_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_bit_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_bit_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_bit_union","return_type":"gbtreekey_var","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_bit_same","return_type":"internal","arguments":"gbtreekey_var, gbtreekey_var, internal","type":"FUNCTION"},{"name":"public.gbt_inet_consistent","return_type":"bool","arguments":"internal, inet, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_inet_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_inet_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_inet_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_inet_union","return_type":"gbtreekey16","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_inet_same","return_type":"internal","arguments":"gbtreekey16, gbtreekey16, internal","type":"FUNCTION"},{"name":"public.gbt_uuid_consistent","return_type":"bool","arguments":"internal, uuid, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_uuid_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_uuid_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_uuid_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_uuid_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_uuid_union","return_type":"gbtreekey32","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_uuid_same","return_type":"internal","arguments":"gbtreekey32, gbtreekey32, internal","type":"FUNCTION"},{"name":"public.gbt_macad8_consistent","return_type":"bool","arguments":"internal, macaddr8, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_macad8_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_macad8_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_macad8_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_macad8_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_macad8_union","return_type":"gbtreekey16","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_macad8_same","return_type":"internal","arguments":"gbtreekey16, gbtreekey16, internal","type":"FUNCTION"},{"name":"public.gbt_enum_consistent","return_type":"bool","arguments":"internal, anyenum, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_enum_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_enum_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_enum_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbtreekey2_in","return_type":"gbtreekey2","arguments":"cstring","type":"FUNCTION"},{"name":"public.gbtreekey2_out","return_type":"cstring","arguments":"gbtreekey2","type":"FUNCTION"},{"name":"public.gbt_bool_consistent","return_type":"bool","arguments":"internal, boolean, smallint, oid, internal","type":"FUNCTION"},{"name":"public.gbt_bool_compress","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_bool_fetch","return_type":"internal","arguments":"internal","type":"FUNCTION"},{"name":"public.gbt_bool_penalty","return_type":"internal","arguments":"internal, internal, internal","type":"FUNCTION"},{"name":"public.gbt_bool_picksplit","return_type":"internal","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_bool_union","return_type":"gbtreekey2","arguments":"internal, internal","type":"FUNCTION"},{"name":"public.gbt_bool_same","return_type":"internal","arguments":"gbtreekey2, gbtreekey2, internal","type":"FUNCTION"},{"name":"public.hypopg_reset_index","return_type":"void","arguments":"","type":"FUNCTION"},{"name":"public.hypopg_reset","return_type":"void","arguments":"","type":"FUNCTION"},{"name":"public.hypopg_create_index","return_type":"record","arguments":"sql_order text, OUT indexrelid oid, OUT indexname text","type":"FUNCTION"},{"name":"public.hypopg_drop_index","return_type":"bool","arguments":"indexid oid","type":"FUNCTION"},{"name":"public.hypopg","return_type":"record","arguments":"OUT indexname text, OUT indexrelid oid, OUT indrelid oid, OUT innatts integer, OUT indisunique boolean, OUT indkey int2vector, OUT indcollation oidvector, OUT indclass oidvector, OUT indoption oidvector, OUT indexprs pg_node_tree, OUT indpred pg_node_tree, OUT amid oid","type":"FUNCTION"},{"name":"public.hypopg_relation_size","return_type":"int8","arguments":"indexid oid","type":"FUNCTION"},{"name":"public.hypopg_get_indexdef","return_type":"text","arguments":"indexid oid","type":"FUNCTION"},{"name":"public.hypopg_hide_index","return_type":"bool","arguments":"indexid oid","type":"FUNCTION"},{"name":"public.hypopg_unhide_index","return_type":"bool","arguments":"indexid oid","type":"FUNCTION"},{"name":"public.hypopg_unhide_all_indexes","return_type":"void","arguments":"","type":"FUNCTION"},{"name":"public.hypopg_hidden_indexes","return_type":"oid","arguments":"","type":"FUNCTION"},{"name":"public.pg_stat_statements_reset","return_type":"void","arguments":"userid oid DEFAULT 0, dbid oid DEFAULT 0, queryid bigint DEFAULT 0","type":"FUNCTION"},{"name":"public.pg_stat_statements_info","return_type":"record","arguments":"OUT dealloc bigint, OUT stats_reset timestamp with time zone","type":"FUNCTION"},{"name":"public.pg_stat_statements","return_type":"record","arguments":"showtext boolean, OUT userid oid, OUT dbid oid, OUT toplevel boolean, OUT queryid bigint, OUT query text, OUT plans bigint, OUT total_plan_time double precision, OUT min_plan_time double precision, OUT max_plan_time double precision, OUT mean_plan_time double precision, OUT stddev_plan_time double precision, OUT calls bigint, OUT total_exec_time double precision, OUT min_exec_time double precision, OUT max_exec_time double precision, OUT mean_exec_time double precision, OUT stddev_exec_time double precision, OUT rows bigint, OUT shared_blks_hit bigint, OUT shared_blks_read bigint, OUT shared_blks_dirtied bigint, OUT shared_blks_written bigint, OUT local_blks_hit bigint, OUT local_blks_read bigint, OUT local_blks_dirtied bigint, OUT local_blks_written bigint, OUT temp_blks_read bigint, OUT temp_blks_written bigint, OUT blk_read_time double precision, OUT blk_write_time double precision, OUT temp_blk_read_time double precision, OUT temp_blk_write_time double precision, OUT wal_records bigint, OUT wal_fpi bigint, OUT wal_bytes numeric, OUT jit_functions bigint, OUT jit_generation_time double precision, OUT jit_inlining_count bigint, OUT jit_inlining_time double precision, OUT jit_optimization_count bigint, OUT jit_optimization_time double precision, OUT jit_emission_count bigint, OUT jit_emission_time double precision","type":"FUNCTION"},{"name":"public.hmac","return_type":"bytea","arguments":"text, text, text","type":"FUNCTION"},{"name":"public.hmac","return_type":"bytea","arguments":"bytea, bytea, text","type":"FUNCTION"},{"name":"public.crypt","return_type":"text","arguments":"text, text","type":"FUNCTION"},{"name":"public.gen_salt","return_type":"text","arguments":"text","type":"FUNCTION"},{"name":"public.gen_salt","return_type":"text","arguments":"text, integer","type":"FUNCTION"},{"name":"public.encrypt","return_type":"bytea","arguments":"bytea, bytea, text","type":"FUNCTION"},{"name":"public.decrypt","return_type":"bytea","arguments":"bytea, bytea, text","type":"FUNCTION"},{"name":"public.encrypt_iv","return_type":"bytea","arguments":"bytea, bytea, bytea, text","type":"FUNCTION"},{"name":"public.decrypt_iv","return_type":"bytea","arguments":"bytea, bytea, bytea, text","type":"FUNCTION"},{"name":"public.gen_random_bytes","return_type":"bytea","arguments":"integer","type":"FUNCTION"},{"name":"public.gen_random_uuid","return_type":"uuid","arguments":"","type":"FUNCTION"},{"name":"public.pgp_sym_encrypt","return_type":"bytea","arguments":"text, text","type":"FUNCTION"},{"name":"public.pgp_sym_encrypt_bytea","return_type":"bytea","arguments":"bytea, text","type":"FUNCTION"},{"name":"public.pgp_sym_encrypt","return_type":"bytea","arguments":"text, text, text","type":"FUNCTION"},{"name":"public.pgp_sym_encrypt_bytea","return_type":"bytea","arguments":"bytea, text, text","type":"FUNCTION"},{"name":"public.pgp_sym_decrypt","return_type":"text","arguments":"bytea, text","type":"FUNCTION"},{"name":"public.pgp_sym_decrypt_bytea","return_type":"bytea","arguments":"bytea, text","type":"FUNCTION"},{"name":"public.pgp_sym_decrypt","return_type":"text","arguments":"bytea, text, text","type":"FUNCTION"},{"name":"public.pgp_sym_decrypt_bytea","return_type":"bytea","arguments":"bytea, text, text","type":"FUNCTION"},{"name":"public.pgp_pub_encrypt","return_type":"bytea","arguments":"text, bytea","type":"FUNCTION"},{"name":"public.pgp_pub_encrypt_bytea","return_type":"bytea","arguments":"bytea, bytea","type":"FUNCTION"},{"name":"public.pgp_pub_encrypt","return_type":"bytea","arguments":"text, bytea, text","type":"FUNCTION"},{"name":"public.pgp_pub_encrypt_bytea","return_type":"bytea","arguments":"bytea, bytea, text","type":"FUNCTION"},{"name":"public.pgp_pub_decrypt","return_type":"text","arguments":"bytea, bytea","type":"FUNCTION"},{"name":"public.digest","return_type":"bytea","arguments":"text, text","type":"FUNCTION"},{"name":"public.pgp_pub_decrypt_bytea","return_type":"bytea","arguments":"bytea, bytea","type":"FUNCTION"},{"name":"public.pgp_pub_decrypt","return_type":"text","arguments":"bytea, bytea, text","type":"FUNCTION"},{"name":"public.pgp_pub_decrypt_bytea","return_type":"bytea","arguments":"bytea, bytea, text","type":"FUNCTION"},{"name":"public.pgp_pub_decrypt","return_type":"text","arguments":"bytea, bytea, text, text","type":"FUNCTION"},{"name":"public.pgp_pub_decrypt_bytea","return_type":"bytea","arguments":"bytea, bytea, text, text","type":"FUNCTION"},{"name":"public.pgp_key_id","return_type":"text","arguments":"bytea","type":"FUNCTION"},{"name":"public.armor","return_type":"text","arguments":"bytea","type":"FUNCTION"},{"name":"public.armor","return_type":"text","arguments":"bytea, text[], text[]","type":"FUNCTION"},{"name":"public.dearmor","return_type":"bytea","arguments":"text","type":"FUNCTION"},{"name":"public.pgp_armor_headers","return_type":"record","arguments":"text, OUT key text, OUT value text","type":"FUNCTION"},{"name":"public.plpgsql_check_function_tb","return_type":"record","arguments":"funcoid regprocedure, relid regclass DEFAULT 0, fatal_errors boolean DEFAULT true, other_warnings boolean DEFAULT true, performance_warnings boolean DEFAULT false, extra_warnings boolean DEFAULT true, security_warnings boolean DEFAULT false, compatibility_warnings boolean DEFAULT false, oldtable name DEFAULT NULL::name, newtable name DEFAULT NULL::name, anyelememttype regtype DEFAULT 'integer'::regtype, anyenumtype regtype DEFAULT '-'::regtype, anyrangetype regtype DEFAULT 'int4range'::regtype, anycompatibletype regtype DEFAULT 'integer'::regtype, anycompatiblerangetype regtype DEFAULT 'int4range'::regtype, without_warnings boolean DEFAULT false, all_warnings boolean DEFAULT false, use_incomment_options boolean DEFAULT true, incomment_options_usage_warning boolean DEFAULT false, constant_tracing boolean DEFAULT true","type":"FUNCTION"},{"name":"public.plpgsql_check_function","return_type":"text","arguments":"funcoid regprocedure, relid regclass DEFAULT 0, format text DEFAULT 'text'::text, fatal_errors boolean DEFAULT true, other_warnings boolean DEFAULT true, performance_warnings boolean DEFAULT false, extra_warnings boolean DEFAULT true, security_warnings boolean DEFAULT false, compatibility_warnings boolean DEFAULT false, oldtable name DEFAULT NULL::name, newtable name DEFAULT NULL::name, anyelememttype regtype DEFAULT 'integer'::regtype, anyenumtype regtype DEFAULT '-'::regtype, anyrangetype regtype DEFAULT 'int4range'::regtype, anycompatibletype regtype DEFAULT 'integer'::regtype, anycompatiblerangetype regtype DEFAULT 'int4range'::regtype, without_warnings boolean DEFAULT false, all_warnings boolean DEFAULT false, use_incomment_options boolean DEFAULT true, incomment_options_usage_warning boolean DEFAULT false, constant_tracing boolean DEFAULT true","type":"FUNCTION"},{"name":"public.plpgsql_check_function_tb","return_type":"record","arguments":"name text, relid regclass DEFAULT 0, fatal_errors boolean DEFAULT true, other_warnings boolean DEFAULT true, performance_warnings boolean DEFAULT false, extra_warnings boolean DEFAULT true, security_warnings boolean DEFAULT false, compatibility_warnings boolean DEFAULT false, oldtable name DEFAULT NULL::name, newtable name DEFAULT NULL::name, anyelememttype regtype DEFAULT 'integer'::regtype, anyenumtype regtype DEFAULT '-'::regtype, anyrangetype regtype DEFAULT 'int4range'::regtype, anycompatibletype regtype DEFAULT 'integer'::regtype, anycompatiblerangetype regtype DEFAULT 'int4range'::regtype, without_warnings boolean DEFAULT false, all_warnings boolean DEFAULT false, use_incomment_options boolean DEFAULT true, incomment_options_usage_warning boolean DEFAULT false, constant_tracing boolean DEFAULT true","type":"FUNCTION"},{"name":"public.plpgsql_check_function","return_type":"text","arguments":"name text, relid regclass DEFAULT 0, format text DEFAULT 'text'::text, fatal_errors boolean DEFAULT true, other_warnings boolean DEFAULT true, performance_warnings boolean DEFAULT false, extra_warnings boolean DEFAULT true, security_warnings boolean DEFAULT false, compatibility_warnings boolean DEFAULT false, oldtable name DEFAULT NULL::name, newtable name DEFAULT NULL::name, anyelememttype regtype DEFAULT 'integer'::regtype, anyenumtype regtype DEFAULT '-'::regtype, anyrangetype regtype DEFAULT 'int4range'::regtype, anycompatibletype regtype DEFAULT 'integer'::regtype, anycompatiblerangetype regtype DEFAULT 'int4range'::regtype, without_warnings boolean DEFAULT false, all_warnings boolean DEFAULT false, use_incomment_options boolean DEFAULT true, incomment_options_usage_warning boolean DEFAULT false, constant_tracing boolean DEFAULT true","type":"FUNCTION"},{"name":"public.__plpgsql_show_dependency_tb","return_type":"record","arguments":"funcoid regprocedure, relid regclass DEFAULT 0, anyelememttype regtype DEFAULT 'integer'::regtype, anyenumtype regtype DEFAULT '-'::regtype, anyrangetype regtype DEFAULT 'int4range'::regtype, anycompatibletype regtype DEFAULT 'integer'::regtype, anycompatiblerangetype regtype DEFAULT 'int4range'::regtype","type":"FUNCTION"},{"name":"public.__plpgsql_show_dependency_tb","return_type":"record","arguments":"name text, relid regclass DEFAULT 0, anyelememttype regtype DEFAULT 'integer'::regtype, anyenumtype regtype DEFAULT '-'::regtype, anyrangetype regtype DEFAULT 'int4range'::regtype, anycompatibletype regtype DEFAULT 'integer'::regtype, anycompatiblerangetype regtype DEFAULT 'int4range'::regtype","type":"FUNCTION"},{"name":"public.plpgsql_show_dependency_tb","return_type":"record","arguments":"funcoid regprocedure, relid regclass DEFAULT 0, anyelememttype regtype DEFAULT 'integer'::regtype, anyenumtype regtype DEFAULT '-'::regtype, anyrangetype regtype DEFAULT 'int4range'::regtype, anycompatibletype regtype DEFAULT 'integer'::regtype, anycompatiblerangetype regtype DEFAULT 'int4range'::regtype","type":"FUNCTION"},{"name":"public.plpgsql_show_dependency_tb","return_type":"record","arguments":"fnname text, relid regclass DEFAULT 0, anyelememttype regtype DEFAULT 'integer'::regtype, anyenumtype regtype DEFAULT '-'::regtype, anyrangetype regtype DEFAULT 'int4range'::regtype, anycompatibletype regtype DEFAULT 'integer'::regtype, anycompatiblerangetype regtype DEFAULT 'int4range'::regtype","type":"FUNCTION"},{"name":"public.plpgsql_profiler_function_tb","return_type":"record","arguments":"funcoid regprocedure","type":"FUNCTION"},{"name":"public.plpgsql_profiler_function_tb","return_type":"record","arguments":"name text","type":"FUNCTION"},{"name":"public.plpgsql_profiler_function_statements_tb","return_type":"record","arguments":"funcoid regprocedure","type":"FUNCTION"},{"name":"public.plpgsql_profiler_function_statements_tb","return_type":"record","arguments":"name text","type":"FUNCTION"},{"name":"public.plpgsql_profiler_install_fake_queryid_hook","return_type":"void","arguments":"","type":"FUNCTION"},{"name":"public.plpgsql_profiler_remove_fake_queryid_hook","return_type":"void","arguments":"","type":"FUNCTION"},{"name":"public.plpgsql_profiler_reset_all","return_type":"void","arguments":"","type":"FUNCTION"},{"name":"public.plpgsql_profiler_reset","return_type":"void","arguments":"funcoid regprocedure","type":"FUNCTION"},{"name":"public.plpgsql_coverage_statements","return_type":"float8","arguments":"funcoid regprocedure","type":"FUNCTION"},{"name":"public.plpgsql_coverage_statements","return_type":"float8","arguments":"name text","type":"FUNCTION"},{"name":"public.plpgsql_coverage_branches","return_type":"float8","arguments":"funcoid regprocedure","type":"FUNCTION"},{"name":"public.plpgsql_coverage_branches","return_type":"float8","arguments":"name text","type":"FUNCTION"},{"name":"public.plpgsql_check_pragma","return_type":"int4","arguments":"VARIADIC name text[]","type":"FUNCTION"},{"name":"public.plpgsql_profiler_functions_all","return_type":"record","arguments":"","type":"FUNCTION"},{"name":"public.plpgsql_check_profiler","return_type":"bool","arguments":"enable boolean DEFAULT NULL::boolean","type":"FUNCTION"},{"name":"public.plpgsql_check_tracer","return_type":"bool","arguments":"enable boolean DEFAULT NULL::boolean, verbosity text DEFAULT NULL::text","type":"FUNCTION"},{"name":"app_private.calculate_transaction_effective_date","return_type":"timestamptz","arguments":"t transaction","type":"FUNCTION"},{"name":"public.current_tenant_id","return_type":"int8","arguments":"","type":"FUNCTION"},{"name":"app_private.can_trainer_edit_event","return_type":"bool","arguments":"eid bigint","type":"FUNCTION"},{"name":"app_private.create_jwt_token","return_type":"jwt_token","arguments":"u users","type":"FUNCTION"},{"name":"app_private.create_latest_lesson_payments","return_type":"payment","arguments":"","type":"FUNCTION"},{"name":"app_private.drop_policies","return_type":"void","arguments":"tbl text","type":"FUNCTION"},{"name":"app_private.event_registration_person_ids","return_type":"int8","arguments":"e event_registration","type":"FUNCTION"},{"name":"app_private.index_advisor","return_type":"record","arguments":"query text","type":"FUNCTION"},{"name":"app_private.log_in_as","return_type":"record","arguments":"u users","type":"FUNCTION"},{"name":"app_private.tg__timestamps","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_account_balances__update","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_auth_details__update","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_event_instance__create_attendance","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_event_registration__create_attendance","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_event_registration__delete_attendance","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_cohort_membership__on_status","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_event_target_cohort__register_members","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_event_target_cohort__unregister_members","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_payment__fill_accounting_period","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_person_invitation__send","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_tenant_membership__on_status","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_transaction__effective_date","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_users__encrypt_password","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"app_private.tg_users__trim_login","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"graphile_worker.add_job","return_type":"_private_jobs","arguments":"identifier text, payload json DEFAULT NULL::json, queue_name text DEFAULT NULL::text, run_at timestamp with time zone DEFAULT NULL::timestamp with time zone, max_attempts integer DEFAULT NULL::integer, job_key text DEFAULT NULL::text, priority integer DEFAULT NULL::integer, flags text[] DEFAULT NULL::text[], job_key_mode text DEFAULT 'replace'::text","type":"FUNCTION"},{"name":"graphile_worker.add_jobs","return_type":"_private_jobs","arguments":"specs graphile_worker.job_spec[], job_key_preserve_run_at boolean DEFAULT false","type":"FUNCTION"},{"name":"graphile_worker.complete_jobs","return_type":"_private_jobs","arguments":"job_ids bigint[]","type":"FUNCTION"},{"name":"graphile_worker.force_unlock_workers","return_type":"void","arguments":"worker_ids text[]","type":"FUNCTION"},{"name":"graphile_worker.permanently_fail_jobs","return_type":"_private_jobs","arguments":"job_ids bigint[], error_message text DEFAULT NULL::text","type":"FUNCTION"},{"name":"graphile_worker.remove_job","return_type":"_private_jobs","arguments":"job_key text","type":"FUNCTION"},{"name":"graphile_worker.reschedule_jobs","return_type":"_private_jobs","arguments":"job_ids bigint[], run_at timestamp with time zone DEFAULT NULL::timestamp with time zone, priority integer DEFAULT NULL::integer, attempts integer DEFAULT NULL::integer, max_attempts integer DEFAULT NULL::integer","type":"FUNCTION"},{"name":"public.account_balance","return_type":"numeric","arguments":"a account","type":"FUNCTION"},{"name":"public.archived_announcements","return_type":"upozorneni","arguments":"","type":"FUNCTION"},{"name":"public.attachment_directories","return_type":"text","arguments":"","type":"FUNCTION"},{"name":"public.cancel_registration","return_type":"void","arguments":"registration_id bigint","type":"FUNCTION"},{"name":"public.account_assets","return_type":"numeric","arguments":"a account, since timestamp with time zone, until timestamp with time zone","type":"FUNCTION"},{"name":"public.account_liabilities","return_type":"numeric","arguments":"a account, since timestamp with time zone, until timestamp with time zone","type":"FUNCTION"},{"name":"public.current_user_id","return_type":"int8","arguments":"","type":"FUNCTION"},{"name":"public.attachment_directory","return_type":"text","arguments":"attachment attachment","type":"FUNCTION"},{"name":"public.create_event","return_type":"event","arguments":"INOUT info event, instances event_instance[], trainers event_trainer[], cohorts event_target_cohort[], registrations event_registration[]","type":"FUNCTION"},{"name":"public.create_event_instance_payment","return_type":"payment","arguments":"i event_instance","type":"FUNCTION"},{"name":"public.confirm_membership_application","return_type":"person","arguments":"application_id bigint","type":"FUNCTION"},{"name":"public.couple_event_instances","return_type":"event_instance","arguments":"p couple","type":"FUNCTION"},{"name":"public.create_next_cohort_subscription_payment","return_type":"payment","arguments":"c cohort_subscription","type":"FUNCTION"},{"name":"public.current_couple_ids","return_type":"int8","arguments":"","type":"FUNCTION"},{"name":"public.delete_event_instance","return_type":"event_instance","arguments":"id bigint, OUT deleted event_instance","type":"FUNCTION"},{"name":"public.create_person","return_type":"person","arguments":"person_id bigint, INOUT p person, is_member boolean, is_trainer boolean, is_admin boolean, send_invitation boolean, join_date timestamp with time zone","type":"FUNCTION"},{"name":"public.current_person_ids","return_type":"_int8","arguments":"","type":"FUNCTION"},{"name":"public.edit_registration","return_type":"event_registration","arguments":"registration_id bigint, note text","type":"FUNCTION"},{"name":"public.event_instance_attendance_summary","return_type":"record","arguments":"e event_instance","type":"FUNCTION"},{"name":"public.event_my_registrations","return_type":"event_registration","arguments":"e event","type":"FUNCTION"},{"name":"public.event_registrants","return_type":"person","arguments":"e event","type":"FUNCTION"},{"name":"public.event_remaining_lessons","return_type":"int4","arguments":"e event","type":"FUNCTION"},{"name":"public.event_instances_for_range","return_type":"event_instance","arguments":"only_type event_type, start_range timestamp with time zone, end_range timestamp with time zone DEFAULT NULL::timestamp with time zone, only_mine boolean DEFAULT false","type":"FUNCTION"},{"name":"public.event_instance_trainer_name","return_type":"text","arguments":"t event_instance_trainer","type":"FUNCTION"},{"name":"public.event_is_registration_open","return_type":"bool","arguments":"e event","type":"FUNCTION"},{"name":"public.event_remaining_person_spots","return_type":"int4","arguments":"e event","type":"FUNCTION"},{"name":"public.event_trainer_lessons_remaining","return_type":"int4","arguments":"e event_trainer","type":"FUNCTION"},{"name":"public.invitation_info","return_type":"text","arguments":"token uuid","type":"FUNCTION"},{"name":"public.login","return_type":"record","arguments":"login character varying, passwd character varying, OUT usr users, OUT jwt jwt_token","type":"FUNCTION"},{"name":"public.filtered_people","return_type":"person","arguments":"in_cohort bigint, is_trainer boolean, is_admin boolean, in_cohorts bigint[] DEFAULT NULL::bigint[]","type":"FUNCTION"},{"name":"public.get_current_tenant","return_type":"tenant","arguments":"","type":"FUNCTION"},{"name":"public.get_current_user","return_type":"users","arguments":"","type":"FUNCTION"},{"name":"public.on_update_author_aktuality","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"public.on_update_author_upozorneni","return_type":"trigger","arguments":"","type":"FUNCTION"},{"name":"public.my_announcements","return_type":"upozorneni","arguments":"archive boolean DEFAULT false","type":"FUNCTION"},{"name":"public.my_couple_ids","return_type":"int8","arguments":"","type":"FUNCTION"},{"name":"public.my_person_ids","return_type":"int8","arguments":"","type":"FUNCTION"},{"name":"public.my_tenant_ids","return_type":"int8","arguments":"","type":"FUNCTION"},{"name":"public.my_event_instances_for_range","return_type":"event_instance","arguments":"only_type event_type, start_range timestamp with time zone, end_range timestamp with time zone DEFAULT NULL::timestamp with time zone, only_mine boolean DEFAULT false","type":"FUNCTION"},{"name":"public.payment_debtor_is_unpaid","return_type":"bool","arguments":"p payment_debtor","type":"FUNCTION"},{"name":"public.otp_login","return_type":"record","arguments":"token uuid, OUT usr users, OUT jwt jwt_token","type":"FUNCTION"},{"name":"public.payment_debtor_price","return_type":"price","arguments":"p payment_debtor","type":"FUNCTION"},{"name":"public.person_account","return_type":"account","arguments":"p_id bigint, c text, OUT acc account","type":"FUNCTION"},{"name":"public.person_cohort_ids","return_type":"_int8","arguments":"p person","type":"FUNCTION"},{"name":"public.person_recent_attendance","return_type":"event_attendance","arguments":"p person","type":"FUNCTION"},{"name":"public.person_weekly_attendance","return_type":"record","arguments":"p person","type":"FUNCTION"},{"name":"public.refresh_jwt","return_type":"jwt_token","arguments":"","type":"FUNCTION"},{"name":"public.register_to_event","return_type":"event_registration","arguments":"INOUT registration event_registration, lessons event_lesson_demand[]","type":"FUNCTION"},{"name":"public.person_name","return_type":"text","arguments":"p person","type":"FUNCTION"},{"name":"public.person_all_couples","return_type":"couple","arguments":"p person","type":"FUNCTION"},{"name":"public.person_is_admin","return_type":"bool","arguments":"p person","type":"FUNCTION"},{"name":"public.person_is_member","return_type":"bool","arguments":"p person","type":"FUNCTION"},{"name":"public.person_is_trainer","return_type":"bool","arguments":"p person","type":"FUNCTION"},{"name":"public.register_without_invitation","return_type":"record","arguments":"email text, login text, passwd text, OUT usr users, OUT jwt jwt_token","type":"FUNCTION"},{"name":"public.reject_membership_application","return_type":"membership_application","arguments":"application_id bigint","type":"FUNCTION"},{"name":"public.register_to_event_many","return_type":"event_registration","arguments":"registrations register_to_event_type[]","type":"FUNCTION"},{"name":"public.register_using_invitation","return_type":"record","arguments":"email text, login text, passwd text, token uuid, OUT usr users, OUT jwt jwt_token","type":"FUNCTION"},{"name":"public.reset_password","return_type":"void","arguments":"email character varying","type":"FUNCTION"},{"name":"public.resolve_payment_with_credit","return_type":"payment","arguments":"p payment","type":"FUNCTION"},{"name":"public.sticky_announcements","return_type":"upozorneni","arguments":"","type":"FUNCTION"},{"name":"public.tenant_couples","return_type":"couple","arguments":"t tenant","type":"FUNCTION"},{"name":"public.update_event_attendance","return_type":"event_attendance","arguments":"instance_id bigint, person_id bigint, status attendance_type, note text","type":"FUNCTION"},{"name":"public.verify_function","return_type":"void","arguments":"f regproc, relid regclass DEFAULT 0","type":"FUNCTION"},{"name":"public.array_accum","return_type":"anycompatiblearray","arguments":"anycompatiblearray","type":"a"},{"name":"public.submit_form","return_type":"void","arguments":"type text, data jsonb, url text","type":"FUNCTION"},{"name":"public.upsert_event","return_type":"event","arguments":"INOUT info event, instances event_instance[], trainers event_trainer[], cohorts event_target_cohort[], registrations event_registration[]","type":"FUNCTION"},{"name":"public.tenant_account","return_type":"account","arguments":"c text, OUT acc account","type":"FUNCTION"},{"name":"app_private.cron_update_memberships","return_type":"void","arguments":"","type":"FUNCTION"},{"name":"public.digest","return_type":"bytea","arguments":"bytea, text","type":"FUNCTION"},{"name":"public.create_missing_cohort_subscription_payments","return_type":"payment","arguments":"c cohort_subscription","type":"FUNCTION"},{"name":"public.person_active_couples","return_type":"couple","arguments":"p person","type":"FUNCTION"},{"name":"public.set_lesson_demand","return_type":"event_lesson_demand","arguments":"registration_id bigint, trainer_id bigint, lesson_count integer","type":"FUNCTION"},{"name":"public.log_in_as","return_type":"record","arguments":"id bigint, OUT usr users, OUT jwt jwt_token","type":"FUNCTION"},{"name":"public.move_event_instance","return_type":"event_instance","arguments":"id bigint, since timestamp with time zone, until timestamp with time zone, trainer_person_id bigint, location_id bigint, location_text text","type":"FUNCTION"},{"name":"public.change_password","return_type":"void","arguments":"new_pass text","type":"FUNCTION"}],"driver":{"name":"postgres","database_version":"PostgreSQL 15.7 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 13.2.0, 64-bit","meta":{"current_schema":"public","search_paths":["olymp","public"],"dict":{"Functions":"Stored procedures and functions"}}}}
