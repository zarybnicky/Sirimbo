fragment UserPublic on User {
  id: uId
  uJmeno
  uPrijmeni
  uRodneCislo
  uTelefon
  uEmail
}

query User($id: BigInt!) {
  user(uId: $id) {
    ...User
  }
}

query UserList($cohort: BigInt, $role: BigInt, $confirmed: Boolean = true, $first: Int, $offset: Int) {
  users(condition: {uSkupina: $cohort, uGroup: $role, uConfirmed: $confirmed}, offset: $offset, first: $first) {
    totalCount
    nodes {
      ...User
    }
  }
}

query MsmtExport {
  users(condition: {uConfirmed: true, inPublicCohort: true}) {
    nodes {
      id: uId
      uJmeno
      uPrijmeni
      uEmail
      uTelefon
      uRodneCislo
      uNationality
      uNarozeni
      uCity
      uDistrict
      uConscriptionNumber
      uOrientationNumber
      uPostalCode
      uStreet
      uGroup
      skupinyByUSkupina {
        sId
        sName
        sColorRgb
        sDescription
        sVisible
      }
      hasValidPayment
      dateOfOldestPayment
      dateOfNewestPayment
    }
  }
}

query MemberList($cohortId: BigInt) {
  users(condition: {uConfirmed: true, uSkupina: $cohortId}) {
    totalCount
    nodes {
      id: uId
      uJmeno
      uPrijmeni
      uEmail
      uTelefon
      uRodneCislo
      skupinyByUSkupina {
        sId
        sName
        sColorRgb
        sDescription
        sVisible
      }
      hasValidPayment
    }
  }
}

query TrainerList($tenantId: BigInt) {
  tenantTrainersList(condition: {tenantId: $tenantId, active: true }) {
    person {
      ...Person
    }
  }
}

mutation ConfirmUser($id: BigInt!, $role: BigInt!, $cohort: BigInt!) {
  confirmUser(input: {id: $id, grp: $role, cohort: $cohort}) {
    __typename
  }
}
