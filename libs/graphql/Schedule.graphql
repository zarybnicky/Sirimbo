fragment ScheduleBasic on Rozpi {
  __typename
  rDatum
  id: rId
  rKde
  rLock
  rTrener
  rVisible
  userByRTrener {
    id: uId
    uJmeno
    uPrijmeni
    fullName
  }
}

fragment ScheduleItemBasic on RozpisItem {
  __typename
  riOd
  riDo
  id: riId
  riLock
  riPartner
  paryByRiPartner {
    ...CouplePartial
  }
}

fragment ScheduleItem on RozpisItem {
  ...ScheduleItemBasic
  rozpiByRiIdRodic {
    ...ScheduleBasic
  }
}

fragment Schedule on Rozpi {
  ...ScheduleBasic
  rozpisItemsByRiIdRodic(orderBy: [RI_OD_ASC]) {
    nodes {
      ...ScheduleItemBasic
    }
  }
}

query ScheduleRange($startDate: Date!, $endDate: Date!) {
  schedulesForRange(startDate: $startDate, endDate: $endDate) {
    nodes {
      ...Schedule
    }
  }
}

query ScheduleList($first: Int, $offset: Int) {
  rozpis(first: $first, offset: $offset, orderBy: [R_DATUM_DESC]) {
    totalCount
    nodes {
      ...Schedule
    }
  }
}

query MyLessons($startDate: Date, $endDate: Date) {
  myLessons(startDate: $startDate, endDate: $endDate) {
    nodes {
      ...ScheduleItem
    }
  }
}

query Schedule($id: BigInt!) {
  rozpi(rId: $id) {
    ...Schedule
  }
}

mutation BookLesson($id: BigInt!) {
  bookLesson(input: {lessonId: $id}) {
    rozpisItems {
      ...ScheduleItem
    }
  }
}

mutation CancelLesson($id: BigInt!) {
  cancelLesson(input: {lessonId: $id}) {
    rozpisItems {
      ...ScheduleItemBasic
    }
  }
}
