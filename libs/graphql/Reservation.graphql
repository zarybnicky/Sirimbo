fragment ReservationItemBasic on NabidkaItem {
  __typename
  id: niId
  niPartner
  niPocetHod
  niLock
  paryByNiPartner {
    ...CouplePartial
  }
}

fragment ReservationBasic on Nabidka {
  id: nId
  nOd
  nDo
  nPocetHod
  nMaxPocetHod
  nLock
  nTimestamp
  nVisible
  nTrener
  userByNTrener {
    fullName
    uJmeno
    uPrijmeni
    id: uId
  }
}

fragment Reservation on Nabidka {
  ...ReservationBasic
  nabidkaItemsByNiIdRodic {
    nodes {
      ...ReservationItemBasic
    }
  }
}

fragment MyReservation on Nabidka {
  ...Reservation
  myLessons
  freeLessons
}

query ReservationList($first: Int, $offset: Int) {
  nabidkas(first: $first, offset: $offset, orderBy: [N_OD_DESC]) {
    nodes {
      ...ReservationBasic
    }
    totalCount
  }
}

query ReservationDetailList($first: Int, $offset: Int) {
  nabidkas(first: $first, offset: $offset, orderBy: [N_OD_DESC]) {
    nodes {
      ...Reservation
    }
    totalCount
  }
}

query Reservation($id: BigInt!) {
  nabidka(nId: $id) {
    ...Reservation
  }
}

query ReservationRange($startDate: Date!, $endDate: Date!) {
  reservationsForRange(startDate: $startDate, endDate: $endDate) {
    nodes {
      ...MyReservation
    }
  }
}

mutation SetDesiredLessons($id: BigInt!, $lessonCount: Int!) {
  reservationSetDesiredLessons(input: {reservationId: $id, lessonCount: $lessonCount}) {
    reservation {
      ...MyReservation
    }
  }
}
