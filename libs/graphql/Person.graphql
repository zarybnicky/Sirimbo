fragment PersonBasic on Person {
  id
  firstName
  lastName
  gender
  birthDate
  legacyUserId
  cstsId
  wdsfId
}

fragment Person on Person {
  ...PersonBasic
  nationalIdNumber
  nationality
  primaryEmail
  primaryPhone
  cohortIds
  isAdmin
  isTrainer
}

fragment PersonWithFullLinks on Person {
  ...Person
  tenantMembershipsList {
    id
    active
    since
    until
    tenant {
      ...Tenant
    }
  }
  cohortMembershipsList {
    id
    active
    since
    until
    cohort {
      ...Cohort
    }
  }
  tenantAdministratorsList {
    id
    active
    tenantId
    since
    until
  }
  tenantTrainersList {
    id
    active
    tenantId
    since
    until
  }
  couplesList {
    ...Couple
  }
}

query Person($id: BigInt!) {
  person(id: $id) {
    ...PersonWithFullLinks
  }
}

query PersonList($inTenants: [BigInt!]!, $inCohort: BigInt, $isTrainer: Boolean, $isAdmin: Boolean) {
  filteredPeopleList(inTenants: $inTenants, inCohort: $inCohort, isTrainer: $isTrainer, isAdmin: $isAdmin) {
    ...Person
  }
}

query TrainerList($tenantId: BigInt) {
  tenantTrainersList(condition: {tenantId: $tenantId, active: true }) {
    person {
      ...Person
    }
  }
}

mutation CreatePerson($input: CreatePersonInput!) {
  createPerson(input: $input) {
    p {
      ...Person
    }
  }
}
