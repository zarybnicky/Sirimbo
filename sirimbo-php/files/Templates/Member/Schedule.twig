{% extends "Layout.twig" %}

{% block title %}Tréninky{% endblock %}

{% block content %}
<div class="container">
  <div class="row flex-wrap flex-space-around">
    {% for item in data %}
      <div class="col-12 col-md-6 col-lg-4 pb-2">
        <div class="widget">

          {% if item.type == 'schedule' %}
            <div class="widget-title text-center">
              {% include 'Member/RozpisHeader.twig' with {'item': item} %}
            </div>
            <div class="widget-content">
              {% for lesson in item.items %}
                <form class="row mx-auto mb-1 no-gutters" action="" method="post">
                  <input type='hidden' name='ri_id' value='{{ lesson.ri_id }}'>
                  <div class="col-4">{{ lesson.ri_od | date('H:i') }}-{{ lesson.ri_do | date('H:i') }}</div>
                  <div class="col-8">
                    {{ lesson.u_jmeno }} {{ lesson.u_prijmeni }}
                    {% if lesson.canReserve %}
                      <button name="action" value="signup" class="py-0 btn btn-outline-primary btn-sm">+</button>
                    {% elseif lesson.canCancel %}
                      <button name="action" value="signout" class="py-0 btn btn-outline-primary btn-sm">&times;</button>
                    {% endif %}
                  </div>
                </form>
              {% endfor %}
            </div>

          {% elseif item.type == 'reservation' %}
            <div class="widget-title text-center">
              {% include 'Member/NabidkaHeader.twig' with {'item': item} %}
            </div>
            <form class="widget-content" action="" method="post">
              <input type='hidden' name='n_id' value='{{ item.ni_id }}'>
              <table class="nocolor" style="width:100%">
                {% for row in item.items %}
                  <tr>
                    <td>{{ row.ni_pocet_hod }}x</td>
                    <td>{{ row.u_jmeno }} {{ row.u_prijmeni }}</td>
                    <td>
                      {% if row.canDelete %}
                        <button name="p_id" value="{{ row.p_id }}"
                                class="py-0 btn btn-outline-primary btn-sm">&times;</button>
                      {% endif %}
                    </td>
                  </tr>
                {% endfor %}
              </table>
              {% if item.canAdd %}
                <div class="form-inline text-center" style="padding:10px 0 5px">
                  <input class="w-auto form-control" type="text" placeholder="Počet hodin" name="hodiny" />
                  <button class="btn btn-primary">Rezervovat</button>
                </div>
              {% endif %}
            </form>
          {% endif %}

        </div>
      </div>
    {% else %}
      <div class="alert alert-info">Žádné termíny tréninků nejsou vypsané.</div>
    {% endfor %}
  </div>
</div>
{% endblock %}
