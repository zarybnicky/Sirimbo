{% extends "Layout.twig" %}

{% block title %}Správa uživatelů{% endblock %}
{% block subheader %}<h2>{{ action == 'add' ? 'Přidat' : 'Upravit' }} uživatele</h2>{% endblock %}

{% block content %}
<form class="container" action="" method="POST">
  <div class="form-row mb-2">
    <div class="form-group col-12 col-md-6">
      <label for="username">Přihlašovací jméno</label>
      <input class="form-control" type="text" {{ action == 'edit' ? readonly : '' }}
             name="login" value="{{ login }}" />
      <small class="form-text text-muted">
        Pouze písmena bez diakritiky, číslice a podtržítka, 3 - 20 znaků
      </small>
    </div>
    <div class="form-group col-12 col-md-6">
      <label for="pass">Heslo</label>
      <input class="form-control" type="text" {{ action == 'edit' ? readonly : '' }}
             name="pass" value="{{ pass }}" />
      <small class="form-text text-muted">
        Pouze písmena bez diakritiky, číslice a podtržítka, 6 - 32 znaků
      </small>
    </div>
  </div>

  <div class="form-row mb-2">
    <div class="form-group col-12 col-md-6">
      <label for="jmeno">Jméno</label>
      <input class="form-control" type="text" name="jmeno" value="{{ jmeno }}" />
    </div>
    <div class="form-group col-12 col-md-6">
      <label for="prijmeni">Příjmení</label>
      <input class="form-control" type="text" name="prijmeni" value="{{ prijmeni }}" />
    </div>
  </div>

  <div class="form-row mb-2">
    <div class="form-group col-12 col-md-6">
      <label for="narozeni">Datum narození</label>
      <input class="form-control" type="date" name="narozeni" value="{{ narozeni }}" />
    </div>
    <div class="form-group col-12 col-md-6 pt-4">
      {{ inlineRadio('pohlavi', 'm', pohlavi == 'm', 'Muž') }}
      {{ inlineRadio('pohlavi', 'f', pohlavi == 'f', 'Žena') }}
    </div>
  </div>

  <div class="form-row mb-2">
    <div class="form-group col-12 col-md-6">
      <label for="email">E-mail</label>
      <input class="form-control" type="text" name="email" value="{{ email }}" />
    </div>
    <div class="form-group col-12 col-md-6">
      <label for="telefon">Telefon</label>
      <input class="form-control" type="text" name="telefon" value="{{ telefon }}" />
    </div>
  </div>

  <div class="mt-3 mb-1 text-muted">Bydliště</div>
  <div class="form-row mb-2">
    <div class="form-group mb-2 col-12 col-md-6">
      <label for="street">Ulice</label>
      <input class="form-control" type="text" name="street" value="{{ street }}" />
    </div>
    <div class="form-group col-6 col-md-3">
      <label for="popisne">Č. popisné</label>
      <input class="form-control" type="text" name="popisne" value="{{ popisne }}" />
    </div>
    <div class="form-group col-6 col-md-3">
      <label for="orientacni">Č. orientační</label>
      <input class="form-control" type="text" name="orientacni" value="{{ orientacni }}" />
    </div>

    <div class="form-group mb-2 col-12 col-md-6">
      <label for="city">Město</label>
      <input class="form-control" type="text" name="city" value="{{ city }}" />
    </div>
    <div class="form-group col-12 col-md-6">
      <label for="district">Část města</label>
      <input class="form-control" type="text" name="district" value="{{ district }}" />
    </div>

    <div class="form-group col-12 col-md-6">
      <label for="postal">PSČ</label>
      <input class="form-control" type="text" name="postal" value="{{ postal }}" />
    </div>
  </div>

  <div class="form-group mb-2">
    <label for="nationality">Národnost</label>
    {{ select('nationality', countries, nationality) }}
  </div>

  <div class="form-group mb-2">
    <label for="poznamky">Poznámky</label>
    <textarea class="form-control" name="poznamky" rows="15">{{ poznamky }}</textarea>
  </div>
  <div class="form-check mb-2">
    {{ checkbox('dancer', 'dancer', dancer, 'Aktivní tanečník') }}
  </div>
  <div class="form-check mb-2">
    {{ checkbox('teacher', 'teacher', teacher, 'Trenér') }}
  </div>
  <div class="form-check mb-2">
    {{ checkbox('lock', 'lock', lock, 'Uzamknout') }}
  </div>
  <div class="form-check mb-2">
    {{ checkbox('ban', 'ban', ban, 'Ban') }}
  </div>
  <div class="form-check mb-2">
    {{ checkbox('system', 'system', system, 'Systémový uživatel') }}
  </div>
  <div class="form-group mb-2">
    <label for="group">Oprávnění</label>
    {{ selectAssoc('group', groups, 'pe_id', 'pe_name', group) }}
  </div>
  <div class="form-group mb-2">
    <div style="font-weight:bold">Skupina</div>
    {% for item in skupiny %}
      <div class='mb-0 form-group form-check'>
        <input type=checkbox class='form-check-input' name='skupina'
               value='1' {{ skupina == item.s_id ? ' checked' : '' }} />
        <label class='form-check-label'>
          <div class="box" title="{{ item.s_name }}"
               style="background-color:{{ item.s_color_rgb }}">
          </div>&nbsp;{{ item.s_name }}
        </label>
      </div>
    {% endfor %}
  </div>
  <div class="mb-2">
      Uživatel vytvořen: {{ createdAt }}<br>
      Uživatel souhlasil s GDPR: {{ gdprSignedAt }}
  </div>
  <div class="form-group">
    <input type='hidden' name='returnURI' value='{{ returnURI }}'>
    <a class="btn btn-outline-primary" href="{{ returnURI }}">Zpět</a>
    <button class="btn btn-primary">{{ action == 'add' ? 'Přidat' : 'Upravit' }}</button>
  </div>
</form>
{% endblock %}
